(self.webpackChunkgauge_chart_plugin=self.webpackChunkgauge_chart_plugin||[]).push([[1314],{51314:function(e,t,i){i.r(t),i.d(t,{AttributeDatasetInfo:function(){return ld},AttributeDisplayFormSelect:function(){return ed},AttributeFilter:function(){return Gs},AttributeFilterAllValuesFilteredResult:function(){return vs},AttributeFilterButton:function(){return Ks},AttributeFilterButtonTooltip:function(){return Ca},AttributeFilterConfigurationButton:function(){return id},AttributeFilterDeleteButton:function(){return rd},AttributeFilterDependencyTooltip:function(){return ud},AttributeFilterDropdownActions:function(){return Ia},AttributeFilterDropdownBody:function(){return Ja},AttributeFilterDropdownButton:function(){return Ea},AttributeFilterElementsActions:function(){return ts},AttributeFilterElementsSearchBar:function(){return is},AttributeFilterElementsSelect:function(){return ss},AttributeFilterElementsSelectError:function(){return ds},AttributeFilterElementsSelectItem:function(){return gs},AttributeFilterElementsSelectLoading:function(){return ps},AttributeFilterEmptyAttributeResult:function(){return fs},AttributeFilterEmptyResult:function(){return Cs},AttributeFilterEmptySearchResult:function(){return hs},AttributeFilterError:function(){return ya},AttributeFilterFilteredStatus:function(){return Fs},AttributeFilterLoading:function(){return Sa},AttributeFilterSelectionStatus:function(){return Ds},AttributeFilterSimpleDropdownButton:function(){return qs},AttributeFilterSimpleDropdownButtonWithSelection:function(){return Ws},AttributeFilterStatusBar:function(){return Ns},DateFilter:function(){return Sn},DateFilterHelpers:function(){return q},EmptyElementsSearchBar:function(){return od},MeasureValueFilter:function(){return Gn},MeasureValueFilterDropdown:function(){return Wn},RankingFilter:function(){return Or},RankingFilterDropdown:function(){return jr},SingleSelectionAttributeFilterElementsSelectItem:function(){return Es},SingleSelectionAttributeFilterStatusBar:function(){return Ts},defaultDateFilterOptions:function(){return c},filterVisibleDateFilterOptions:function(){return F},getAttributeFilterSubtitle:function(){return Oa},getLocalizedIcuDateFormatPattern:function(){return at},isAbsoluteDateFilterOption:function(){return y},isRelativeDateFilterOption:function(){return v},isRelativeDateFilterWithBoundOption:function(){return C},isUiRelativeDateFilterForm:function(){return b},isWarningMessage:function(){return Tn},newAttributeFilterHandler:function(){return ba},useAttributeFilterContext:function(){return Qa},useAttributeFilterController:function(){return Wa},useAttributeFilterHandler:function(){return qa},useAttributeFilterSearch:function(){return dd},useAutoOpenAttributeFilterDropdownButton:function(){return ad},useOnCloseAttributeFilterDropdownButton:function(){return sd}});var n=i(30381);const r="YYYY-MM-DD",l="YYYY-MM-DD HH:mm",o="HH:mm",a=", HH:mm",s="00:00",d="23:59",u="MM/dd/yyyy",c={allTime:{localIdentifier:"ALL_TIME",type:"allTime",name:"",visible:!0},absoluteForm:{localIdentifier:"ABSOLUTE_FORM",type:"absoluteForm",from:n().subtract(1,"month").startOf("day").format(r),to:n().startOf("day").format(r),name:"",visible:!0},absolutePreset:[],relativeForm:{localIdentifier:"RELATIVE_FORM",type:"relativeForm",granularity:"GDC.time.month",from:void 0,to:void 0,name:"",visible:!0},relativePreset:{"GDC.time.date":[{from:-6,to:0,granularity:"GDC.time.date",localIdentifier:"LAST_7_DAYS",type:"relativePreset",visible:!0,name:""},{from:-29,to:0,granularity:"GDC.time.date",localIdentifier:"LAST_30_DAYS",type:"relativePreset",visible:!0,name:""},{from:-89,to:0,granularity:"GDC.time.date",localIdentifier:"LAST_90_DAYS",type:"relativePreset",visible:!0,name:""}],"GDC.time.month":[{from:0,to:0,granularity:"GDC.time.month",localIdentifier:"THIS_MONTH",type:"relativePreset",visible:!0,name:""},{from:-1,to:-1,granularity:"GDC.time.month",localIdentifier:"LAST_MONTH",type:"relativePreset",visible:!0,name:""},{from:-11,to:0,granularity:"GDC.time.month",localIdentifier:"LAST_12_MONTHS",type:"relativePreset",visible:!0,name:""}],"GDC.time.quarter":[{from:0,to:0,granularity:"GDC.time.quarter",localIdentifier:"THIS_QUARTER",type:"relativePreset",visible:!0,name:""},{from:-1,to:-1,granularity:"GDC.time.quarter",localIdentifier:"LAST_QUARTER",type:"relativePreset",visible:!0,name:""},{from:-3,to:0,granularity:"GDC.time.quarter",localIdentifier:"LAST_4_QUARTERS",type:"relativePreset",visible:!0,name:""}],"GDC.time.year":[{from:0,to:0,granularity:"GDC.time.year",localIdentifier:"THIS_YEAR",type:"relativePreset",visible:!0,name:""},{from:-1,to:-1,granularity:"GDC.time.year",localIdentifier:"LAST_YEAR",type:"relativePreset",visible:!0,name:""}]}},m={"GDC.time.minute":"minute","GDC.time.hour":"hour","GDC.time.date":"day","GDC.time.week_us":"week","GDC.time.month":"month","GDC.time.quarter":"quarter","GDC.time.year":"year"};var g=i(44037);const p=(e,t)=>{if(!e||!t)return e;if((0,g.isAllTimeDateFilterOption)(e)||(0,g.isAbsoluteDateFilterForm)(e)||(0,g.isAbsoluteDateFilterPreset)(e)||(0,g.isRelativeDateFilterForm)(e))return e;if((0,g.isRelativeDateFilterPreset)(e)){const{from:t,to:i}=e,n=0===i&&t<i;return{...e,from:n?e.from-1:e.from,to:n?-1:i}}throw new Error("Unknown date filter value type")},f=e=>!!e.visible&&!!(0,g.isRelativeDateFilterPreset)(e)&&0===e.to&&e.from<e.to;var h=i(79697);const b=e=>!(0,h.Z)(e)&&"relativeForm"===e.type,y=e=>(0,g.isAbsoluteDateFilterForm)(e)||(0,g.isAbsoluteDateFilterPreset)(e),v=e=>(0,g.isRelativeDateFilterForm)(e)||(0,g.isRelativeDateFilterPreset)(e),C=e=>v(e)&&!(0,h.Z)(e.boundedFilter);function x(e){return b(e)||(0,g.isRelativeDateFilterPreset)(e)?e.granularity:void 0}function E(e){return e?.visible}function S(e){return E(e)?e:void 0}function I({absoluteForm:e,absolutePreset:t,allTime:i,relativeForm:n,relativePreset:r}){return{...i&&{allTime:i},...e&&{absoluteForm:e},...!(0,h.Z)(t)&&{absolutePreset:t},...n&&{relativeForm:n},...!(0,h.Z)(r)&&{relativePreset:r}}}function F(e){const t=S(e.allTime),i=S(e.absoluteForm),n=S(e.relativeForm),r=e.absolutePreset?.filter(E);return I({allTime:t,absoluteForm:i,absolutePreset:r,relativeForm:n,relativePreset:e.relativePreset&&(l=e.relativePreset,Object.keys(l).reduce(((e,t)=>{const i=l[t].filter(E);return i.length&&(e[t]=i),e}),{}))});var l}function w(e){return e.from>e.to?{...e,from:e.to,to:e.from}:e}var k=i(52620),A=i(26786),D=i(86738);const j=(0,i(39061).vU)({minute:{id:"filters.granularity.minutes"},hour:{id:"filters.granularity.hours"},day:{id:"filters.granularity.days"},week:{id:"filters.granularity.weeks"},month:{id:"filters.granularity.months"},quarter:{id:"filters.granularity.quarters"},year:{id:"filters.granularity.years"},allTimeExcluded:{id:"filters.allTime.excludeCurrentPeriod"},minuteExcluded:{id:"filters.minute.excludeCurrentPeriod"},hourExcluded:{id:"filters.hour.excludeCurrentPeriod"},dayExcluded:{id:"filters.day.excludeCurrentPeriod"},weekExcluded:{id:"filters.week.excludeCurrentPeriod"},monthExcluded:{id:"filters.month.excludeCurrentPeriod"},quarterExcluded:{id:"filters.quarter.excludeCurrentPeriod"},yearExcluded:{id:"filters.year.excludeCurrentPeriod"},minute_history:{id:"filters.floatingRange.option.minute.offset.history"},minute_today:{id:"filters.floatingRange.option.minute.offset.today"},minute_future:{id:"filters.floatingRange.option.minute.offset.future"},hour_history:{id:"filters.floatingRange.option.hour.offset.history"},hour_today:{id:"filters.floatingRange.option.hour.offset.today"},hour_future:{id:"filters.floatingRange.option.hour.offset.future"},day_history:{id:"filters.floatingRange.option.day.offset.history"},day_today:{id:"filters.floatingRange.option.day.offset.today"},day_future:{id:"filters.floatingRange.option.day.offset.future"},week_history:{id:"filters.floatingRange.option.week.offset.history"},week_today:{id:"filters.floatingRange.option.week.offset.today"},week_future:{id:"filters.floatingRange.option.week.offset.future"},month_history:{id:"filters.floatingRange.option.month.offset.history"},month_today:{id:"filters.floatingRange.option.month.offset.today"},month_future:{id:"filters.floatingRange.option.month.offset.future"},quarter_history:{id:"filters.floatingRange.option.quarter.offset.history"},quarter_today:{id:"filters.floatingRange.option.quarter.offset.today"},quarter_future:{id:"filters.floatingRange.option.quarter.offset.future"},year_history:{id:"filters.floatingRange.option.year.offset.history"},year_today:{id:"filters.floatingRange.option.year.offset.today"},year_future:{id:"filters.floatingRange.option.year.offset.future"},"GDC.time.minute":{id:"filters.minute.title"},"GDC.time.hour":{id:"filters.hour.title"},"GDC.time.date":{id:"filters.day.title"},"GDC.time.week_us":{id:"filters.week.title"},"GDC.time.month":{id:"filters.month.title"},"GDC.time.quarter":{id:"filters.quarter.title"},"GDC.time.year":{id:"filters.year.title"},top:{id:"rankingFilter.top"},bottom:{id:"rankingFilter.bottom"},topWithAttr:{id:"rankingFilter.preview.top_with_attribute"},topWithoutAttr:{id:"rankingFilter.preview.top_without_attribute"},bottomWithAttr:{id:"rankingFilter.preview.bottom_with_attribute"},bottomWithoutAttr:{id:"rankingFilter.preview.bottom_without_attribute"},ALL:{id:"mvf.operator.all"},GREATER_THAN:{id:"mvf.operator.greaterThan"},GREATER_THAN_OR_EQUAL_TO:{id:"mvf.operator.greaterThanOrEqualTo"},LESS_THAN:{id:"mvf.operator.lessThan"},LESS_THAN_OR_EQUAL_TO:{id:"mvf.operator.lessThanOrEqualTo"},EQUAL_TO:{id:"mvf.operator.equalTo"},NOT_EQUAL_TO:{id:"mvf.operator.notEqualTo"},BETWEEN:{id:"mvf.operator.between"},NOT_BETWEEN:{id:"mvf.operator.notBetween"},thisMinute:{id:"filters.thisMinute.title"},lastMinute:{id:"filters.lastMinute.title"},nextMinute:{id:"filters.nextMinute.title"},thisHour:{id:"filters.thisHour.title"},lastHour:{id:"filters.lastHour.title"},nextHour:{id:"filters.nextHour.title"},thisDay:{id:"filters.thisDay.title"},lastDay:{id:"filters.lastDay.title"},nextDay:{id:"filters.nextDay.title"},thisWeek:{id:"filters.thisWeek.title"},thisWeekToDate:{id:"filters.thisWeekToDate.title"},lastWeek:{id:"filters.lastWeek.title"},nextWeek:{id:"filters.nextWeek.title"},thisMonth:{id:"filters.thisMonth.title"},thisMonthToDate:{id:"filters.thisMonthToDate.title"},lastMonth:{id:"filters.lastMonth.title"},nextMonth:{id:"filters.nextMonth.title"},thisQuarter:{id:"filters.thisQuarter.title"},thisQuarterToDate:{id:"filters.thisQuarterToDate.title"},lastQuarter:{id:"filters.lastQuarter.title"},nextQuarter:{id:"filters.nextQuarter.title"},thisYear:{id:"filters.thisYear.title"},thisYearToDate:{id:"filters.thisYearToDate.title"},lastYear:{id:"filters.lastYear.title"},nextYear:{id:"filters.nextYear.title"},lastNMinutes:{id:"filters.lastNMinutes"},lastNHours:{id:"filters.lastNHours"},lastNDays:{id:"filters.lastNDays"},lastNWeeks:{id:"filters.lastNWeeks"},lastNMonths:{id:"filters.lastNMonths"},lastNQuarters:{id:"filters.lastNQuarters"},lastNYears:{id:"filters.lastNYears"},nextNMinutes:{id:"filters.nextNMinutes"},nextNHours:{id:"filters.nextNHours"},nextNDays:{id:"filters.nextNDays"},nextNWeeks:{id:"filters.nextNWeeks"},nextNMonths:{id:"filters.nextNMonths"},nextNQuarters:{id:"filters.nextNQuarters"},nextNYears:{id:"filters.nextNYears"},"minutes.past":{id:"filters.interval.minutes.past"},"minutes.past.sameValue":{id:"filters.interval.minutes.past.sameValue"},"minutes.future":{id:"filters.interval.minutes.future"},"minutes.future.sameValue":{id:"filters.interval.minutes.future.sameValue"},"minutes.mixed":{id:"filters.interval.minutes.mixed"},"hours.past":{id:"filters.interval.hours.past"},"hours.past.sameValue":{id:"filters.interval.hours.past.sameValue"},"hours.future":{id:"filters.interval.hours.future"},"hours.future.sameValue":{id:"filters.interval.hours.future.sameValue"},"hours.mixed":{id:"filters.interval.hours.mixed"},"days.past":{id:"filters.interval.days.past"},"days.past.sameValue":{id:"filters.interval.days.past.sameValue"},"days.future":{id:"filters.interval.days.future"},"days.future.sameValue":{id:"filters.interval.days.future.sameValue"},"days.mixed":{id:"filters.interval.days.mixed"},"weeks.past":{id:"filters.interval.weeks.past"},"weeks.past.sameValue":{id:"filters.interval.weeks.past.sameValue"},"weeks.future":{id:"filters.interval.weeks.future"},"weeks.future.sameValue":{id:"filters.interval.weeks.future.sameValue"},"weeks.mixed":{id:"filters.interval.weeks.mixed"},"months.past":{id:"filters.interval.months.past"},"months.past.sameValue":{id:"filters.interval.months.past.sameValue"},"months.future":{id:"filters.interval.months.future"},"months.future.sameValue":{id:"filters.interval.months.future.sameValue"},"months.mixed":{id:"filters.interval.months.mixed"},"quarters.past":{id:"filters.interval.quarters.past"},"quarters.past.sameValue":{id:"filters.interval.quarters.past.sameValue"},"quarters.future":{id:"filters.interval.quarters.future"},"quarters.future.sameValue":{id:"filters.interval.quarters.future.sameValue"},"quarters.mixed":{id:"filters.interval.quarters.mixed"},"years.past":{id:"filters.interval.years.past"},"years.past.sameValue":{id:"filters.interval.years.past.sameValue"},"years.future":{id:"filters.interval.years.future"},"years.future.sameValue":{id:"filters.interval.years.future.sameValue"},"years.mixed":{id:"filters.interval.years.mixed"},relevantValuesParentFiltersTooltip:{id:"attributesDropdown.relevantValues.tooltip.parentFilters"},relevantValuesLimitsTooltip:{id:"attributesDropdown.relevantValues.tooltip.limits"},relevantValuesParentFiltersLimitsTooltip:{id:"attributesDropdown.relevantValues.tooltip.parentFiltersLimits"}}),O=(e,t=r)=>{if(!(e instanceof Date&&isNaN(e.getTime())))return e instanceof Date?n(e).local().format(t):e},P=e=>"string"!=typeof e?e:new Date(n(e,l).format()),N=(e,t,i=s)=>"string"!=typeof e?e:t&&1===e.split(" ").length?`${e} ${i}`:e,T=(e,t,i,r="–")=>{const l=i.includes(o),u=i.replace(a,""),c=N(e,l,s),m=N(t,l,d),g=P(c),p=P(m),f=(b=p,0===(h=g).getHours()&&0===h.getMinutes()&&23===b.getHours()&&59===b.getMinutes());var h,b;if(n(g).isSame(p,"day"))return l&&!f?`${(0,k.WU)(g,u)}, ${((e,t,i="–")=>{const n=(0,k.WU)(e,o),r=(0,k.WU)(t,o);return n===r?n:`${n} ${i} ${r}`})(g,p,r)}`:(0,k.WU)(g,u);const y=f?u:i;return`${(0,k.WU)(g,y)} ${r} ${(0,k.WU)(p,y)}`},M=[{predicate:(e,t)=>0===e&&0===t,formatter:(e,t,i,n,r)=>(0,g.isUpperBound)(r)&&0===r.to?n.formatMessage(j[`this${(0,A.Z)(i)}ToDate`]):n.formatMessage(j[`this${(0,A.Z)(i)}`])},{predicate:(e,t)=>1===e&&1===t,formatter:(e,t,i,n,r)=>n.formatMessage(j[`next${(0,A.Z)(i)}`])},{predicate:(e,t)=>-1===e&&-1===t,formatter:(e,t,i,n,r)=>n.formatMessage(j[`last${(0,A.Z)(i)}`])},{predicate:e=>0===e,formatter:(e,t,i,n,r)=>n.formatMessage(j[`nextN${(0,A.Z)(i)}s`],{n:Math.abs(t)+1})},{predicate:(e,t)=>0===t,formatter:(e,t,i,n,r)=>n.formatMessage(j[`lastN${(0,A.Z)(i)}s`],{n:Math.abs(e)+1})},{predicate:(e,t)=>e<0&&e===t,formatter:(e,t,i,n,r)=>n.formatMessage(j[`${i}s.past.sameValue`],{value:Math.abs(e)})},{predicate:(e,t)=>e>0&&e===t,formatter:(e,t,i,n,r)=>n.formatMessage(j[`${i}s.future.sameValue`],{value:Math.abs(e)})},{predicate:(e,t)=>e<0&&t<0,formatter:(e,t,i,n,r)=>n.formatMessage(j[`${i}s.past`],{from:Math.abs(e),to:Math.abs(t)})},{predicate:(e,t)=>e>0&&t>0,formatter:(e,t,i,n,r)=>n.formatMessage(j[`${i}s.future`],{from:Math.abs(e),to:Math.abs(t)})},{predicate:()=>!0,formatter:(e,t,i,n,r)=>n.formatMessage(j[`${i}s.mixed`],{from:Math.abs(e),to:Math.abs(t)})}],L=(e,t,i,n,r)=>{const l=m[i];if(void 0===l)return i;const{formatter:o}=M.find((i=>i.predicate(e,t)));return o(e,t,l,n,r)},R=(e,t,i)=>{if((0,g.isAbsoluteDateFilterForm)(e)||(0,g.isRelativeDateFilterForm)(e))return _(e,t,i);if((0,g.isAllTimeDateFilterOption)(e)||(0,g.isAbsoluteDateFilterPreset)(e)||(0,g.isRelativeDateFilterPreset)(e))return e.name||_(e,t,i);throw new Error("Unknown DateFilterOption type")},B=(e,t,i=u)=>{const n=(0,D.getIntl)(t);return R(e,n,i)},_=(e,t,i)=>{if((0,g.isAbsoluteDateFilterForm)(e))return((e,t)=>e.from&&e.to?T(e.from,e.to,t):"")(e,i);if((0,g.isAbsoluteDateFilterPreset)(e))return((e,t)=>T(e.from,e.to,t))(e,i);if((0,g.isAllTimeDateFilterOption)(e))return(e=>e.formatMessage({id:"filters.allTime.title"}))(t);if((0,g.isRelativeDateFilterForm)(e))return((e,t)=>"number"==typeof e.from&&"number"==typeof e.to?L(e.from,e.to,e.granularity,t,e.boundedFilter):"")(e,t);if((0,g.isRelativeDateFilterPreset)(e))return((e,t)=>L(e.from,e.to,e.granularity,t,e.boundedFilter))(e,t);throw new Error("Unknown DateFilterOption type")},V=e=>{const t={};return e.visible||(t[e.type]={}),t},H=(e,t)=>({...e,absoluteForm:{...e.absoluteForm??{},[t]:!0}}),Z=e=>(0,g.isAbsoluteDateFilterForm)(e)?(e=>{let t=V(e);return void 0===e.from&&(t=H(t,"invalidStartDate")),void 0===e.to&&(t=H(t,"invalidEndDate")),void 0===t.absoluteForm&&P(e.from)>P(e.to)&&(t=H(t,"startDateAfterEndDate")),void 0===t.absoluteForm?{}:t})(e):(0,g.isRelativeDateFilterForm)(e)?(e=>{const t=V(e);return["from","to"].forEach((i=>{void 0===e[i]&&(t.relativeForm=t.relativeForm||{})})),t.relativeForm?t:{}})(e):V(e),q={validateFilterOption:Z,getDateFilterTitle:B,getDateFilterTitleUsingTranslator:(e,t,i=u)=>R(e,t,i),getDateFilterRepresentation:(e,t,i=u)=>{const n=(0,D.getIntl)(t);return _(e,n,i)},granularityIntlCodes:m,applyExcludeCurrentPeriod:p,defaultDateFilterOptions:c,canExcludeCurrentPeriod:f,mapOptionToAfm:(e,t,i)=>{const n=p(e,i);if((0,g.isAllTimeDateFilterOption)(n))return null;if(y(n))return((e,t)=>({absoluteDateFilter:{dataSet:t,from:e.from,to:e.to}}))(n,t);if(v(n))return((e,t)=>{const{from:i,to:n,granularity:r,boundedFilter:l}=e;return{relativeDateFilter:{dataSet:t,from:i,to:n,granularity:r,...l?{boundedFilter:l}:{}}}})(n,t);throw new Error("Unknown date filter value provided")},formatAbsoluteDateRange:T,formatRelativeDateRange:L,filterVisibleDateFilterOptions:F};var W=i(5549),G=i(24544),K=i(50576),U=i(31155),z=i(65165);const $="date-filter-selected-list-item-id",Y="date-filter-custom-relative-id",Q="date-filter-custom-static-id",X="date-filter-relative-granularity-tab-id";var J;!function(e){e.OPTION="option",e.TAB="tab"}(J||(J={}));const ee=(e,t,i)=>e.current.contains(t)&&t.role===i,te=(e,t,i)=>{let n,r=t;do{r=(r+i+e.length)%e.length,n=e[r]}while("tab"===n.getAttribute("role"));return n},ie=({tabGranularityRef:e,closeDropdown:t})=>i=>{if(!e.current)return;const n=Array.from(e.current.querySelectorAll("[tabindex]")),r=document.activeElement,l=n.findIndex((e=>e===r));(0,z.makeLinearKeyboardNavigation)({onFocusNext:()=>{if(ee(e,r,J.TAB)){const e=l===n.length-1?n[0]:n[l+1];e?.focus()}},onFocusPrevious:()=>{if(ee(e,r,J.TAB)){const e=l<=0?n[n.length-1]:n[l-1];e?.focus()}},onFocusFirst:()=>{if(ee(e,r,J.TAB)){const{firstElement:t}=(0,z.getFocusableElements)(e.current);t?.focus()}},onFocusLast:()=>{if(ee(e,r,J.TAB)){const{lastElement:t}=(0,z.getFocusableElements)(e.current);t?.focus()}},onClose:t})(i)},ne=(e,t,i,n,r)=>{"Enter"===e.key&&t&&document.activeElement instanceof HTMLInputElement&&!i&&(r(),n()),"Escape"!==e.key&&e.stopPropagation()};var re=i(94184),le=i(19850);function oe({messageId:e,className:t,disabled:i,onClick:n,describedByFromValidation:r}){const l=(0,le.Z)();return(0,W.jsx)(z.Button,{type:"button",value:l.formatMessage({id:e}),className:t,disabled:i,onClick:n,describedByFromValidation:r})}var ae=i(5723),se=(0,ae.Z)((function(e,t,i){return e+(i?"-":"")+t.toLowerCase()}));function de({dateFormat:e,filter:t}){const i=ue({filter:t,dateFormat:e});return(0,W.jsx)(W.Fragment,{children:i})}const ue=({filter:e,dateFormat:t})=>{const i=(0,le.Z)();return B(e,(0,D.resolveLocale)(i.locale),t)},ce=(e=>`only screen and (min-width:${e.lower}px) and (max-width:${e.upper}px)`)({lower:0,upper:640});function me({isSelected:e,isFocusFallback:t,className:i,children:n,...r}){return(0,W.jsx)(W.Fragment,{children:(0,W.jsxs)("button",{id:e?$:void 0,role:"option",className:re("gd-list-item","gd-filter-list-item",{"is-selected":e,"gd-filter-list-item-selected":e},i),tabIndex:e||t?0:-1,"aria-selected":e,...r,children:[n,e?(0,W.jsx)(U.zP,{query:ce,children:(0,W.jsx)(z.CustomizableCheckmark,{className:"gd-customizable-checkmark-mobile-date-filter"})}):null]})})}function ge({filterOptions:e,dateFormat:t,selectedFilterOption:i,onSelectedFilterOptionChange:n,className:r}){return(0,W.jsx)(W.Fragment,{children:e.map((e=>(0,W.jsx)(me,{isSelected:e.localIdentifier===i.localIdentifier,onClick:()=>n(e),className:re(`s-absolute-preset-${se(e.localIdentifier)}`,r),children:(0,W.jsx)(de,{filter:e,dateFormat:t})},e.localIdentifier)))})}function pe({children:e,className:t,id:i,...n}){return(0,W.jsx)("div",{role:"presentation",id:i,className:re("gd-list-item gd-list-item-header gd-filter-list-heading",t),...n,children:e})}var fe=i(97582),he=i(25167),be=i(58179);function ye(e){var t=(0,le.Z)(),i=t.formatMessage,n=t.textComponent,r=void 0===n?he.Fragment:n,l=e.id,o=e.description,a=e.defaultMessage,s=e.values,d=e.children,u=e.tagName,c=void 0===u?r:u,m=i({id:l,description:o,defaultMessage:a},s,{ignoreTag:e.ignoreTag});return"function"==typeof d?d(Array.isArray(m)?m:[m]):c?he.createElement(c,null,m):he.createElement(he.Fragment,null,m)}ye.displayName="FormattedMessage";var ve=he.memo(ye,(function(e,t){var i=e.values,n=(0,fe.__rest)(e,["values"]),r=t.values,l=(0,fe.__rest)(t,["values"]);return(0,be.wU)(r,i)&&(0,be.wU)(n,l)}));ve.displayName="MemoizedFormattedMessage";var Ce=ve;function xe({granularity:e}){const t=j[e]||null;return t?(0,W.jsx)(Ce,{id:t.id}):null}const Ee=["GDC.time.year","GDC.time.quarter","GDC.time.month","GDC.time.week_us","GDC.time.date","GDC.time.hour","GDC.time.minute"];function Se({granularity:e,items:t,dateFormat:i,selectedFilterOption:n,className:r,onSelectedFilterOptionChange:l}){const o=re("gd-list-items-group"),a=(0,z.useIdPrefixed)("group-title");return(0,W.jsxs)("ul",{role:"group",className:o,"aria-labelledby":a,children:[(0,W.jsx)(pe,{className:r,id:a,children:(0,W.jsx)(xe,{granularity:e})}),t.map((e=>(0,W.jsx)(me,{isSelected:e.localIdentifier===n.localIdentifier,onClick:()=>l(e),className:re(`s-relative-preset-${se(e.localIdentifier)}`,r),children:(0,W.jsx)(de,{filter:e,dateFormat:i})},e.localIdentifier)))]})}function Ie({dateFormat:e,filterOption:t,selectedFilterOption:i,onSelectedFilterOptionChange:n,className:r}){const l=Ee.filter((e=>Boolean(t?.[e]?.length>0))).map((e=>({granularity:e,items:t[e]})));return(0,W.jsx)(W.Fragment,{children:l.map((t=>(0,W.jsx)(G.Fragment,{children:(0,W.jsx)(Se,{granularity:t.granularity,items:t.items,dateFormat:e,selectedFilterOption:i,className:r,onSelectedFilterOptionChange:n})},t.granularity)))})}const Fe=(e,t,i)=>{const n=i?l:r;return{from:O(e.from,n),to:O(e.to,n),localIdentifier:t,type:"absoluteForm",name:"",visible:!0}},we=(e,t=!1)=>{const i=e.from&&e.from.split(" ").length>1,n=e.to&&e.to.split(" ").length>1,r=e&&P(e.from),l=e&&P(e.to);return r&&!i&&t&&(r.setHours(0),r.setMinutes(0)),l&&!n&&t&&(l.setHours(23),l.setMinutes(59)),{from:r,to:l}};var ke=i(81971),Ae=i(99500),De=i(70152),je=i(27159),Oe=i(12254),Pe=i(75075),Ne=i(7516),Te=i(77167),Me=i(57989),Le=i(67267),Re=i(73114),Be=i(65248),_e=i(3564),Ve=i(20722),He=i(29515),Ze=i(78510),qe=i(65367),We=i(63945),Ge=i(21818),Ke=i(22051),Ue=i(64369);const ze=e=>void 0===e?void 0:n(e).format(r),$e=(e,t)=>{if(void 0!==e&&!isNaN(e.getTime()))return(0,k.WU)(e,t)},Ye=(e,t)=>{try{const i=(0,Ke.Qc)(e,t,new Date);return(0,Ue.J)(i)&&i.getFullYear()>=1e3&&e===$e(i,t)?i:void 0}catch{return}},Qe=e=>void 0!==e&&!isNaN(e.getTime()),Xe=(e,t)=>{if(!Qe(e))return;if(void 0===t)return;const i=new Date(e);return i.setHours(t.hours,t.minutes),i},Je=e=>{if(Qe(e))return{hours:e.getHours(),minutes:e.getMinutes()}},et={"en-US":ke._,"de-DE":Ae.de,"es-ES":De.es,"fr-FR":je.fr,"ja-JP":Oe.ja,"nl-NL":Pe.nl,"pt-BR":Ne.F,"pt-PT":Te.pt,"zh-Hans":Me.U,"ru-RU":Le.ru,"it-IT":Re.it,"es-419":De.es,"en-GB":Be.e,"fr-CA":_e.J,"zh-Hant":Me.U,"en-AU":Ve.g,"fi-FI":He.fi,"zh-HK":Me.U,"tr-TR":Ze.tr,"pl-PL":qe.pl,"ko-KR":We.ko},tt=[{align:"bl tl",offset:{x:0,y:1}}];function it(e){switch(e){case"Sunday":return 0;case"Monday":return 1;default:throw new Error(`Unknown week start ${e}`)}}const nt=(0,G.forwardRef)((({mode:e,originalDateRange:t,selectedDateRange:i,onDateRangeSelect:n,dayPickerProps:r,alignTo:l,weekStart:o,renderAsOverlay:a,calendarClassNames:s,intl:d},u)=>{const[c,m]=(0,G.useState)("from"===e?i.from:i.to);var g;const p=(b={mode:"range",showOutsideDays:!0,modifiers:{start:t.from,end:t.to},selected:{from:t.from,to:t.to},locale:(g=d.locale,et[g])},(y=r)?((e,t)=>{const i=(n=e.modifiers,r=t.modifiers,n||r?{...n,...r}:void 0);var n,r;return{...e,...t,...i?{modifiers:i}:{}}})(b,y):b),f=(0,W.jsx)("div",{className:"gd-date-range-picker-wrapper",ref:u,children:(0,W.jsx)(Ge._,{...p,mode:"range",month:c,onSelect:n,selected:i,classNames:{root:s},onMonthChange:m,weekStartsOn:it(o)})}),h=(0,W.jsx)(z.Overlay,{alignTo:l,alignPoints:tt,closeOnOutsideClick:!0,closeOnMouseDrag:!0,closeOnParentScroll:!0,children:f});var b,y;return a?h:f}));nt.displayName="DayPicker";var rt=i(93791);const lt=e=>{const t=n().locale(rt.Z(e)),i=t?.localeData&&t.localeData();return i?._longDateFormat?.L},ot={"en-US":"M/d/y","en-GB":"dd/MM/y","en-AU":"dd/MM/y","cs-CZ":"d. M. y","de-DE":"d.M.y","es-ES":"d/M/y","fr-FR":"dd/MM/y","ja-JP":"y/M/d","nl-NL":"d-M-y","pt-BR":"dd/MM/y","pt-PT":"dd/MM/y","zh-Hans":"y/M/d","zh-Hant":"y/M/d","zh-HK":"y/M/d","ru-RU":"dd.MM.y","it-IT":"dd/MM/y","es-419":"d/M/y","fr-CA":"dd/MM/y","fi-FI":"d-M-y","tr-TR":"dd/MM/y","pl-PL":"dd.MM.y","ko-KR":"y.MM.dd"},at=e=>ot[e]??ot["en-US"];function st({dateFormat:e,isTimeEnabled:t,dateHintId:i,timeHintId:n,intl:r}){return(0,W.jsxs)("div",{className:"gd-date-range__hint",children:[(0,W.jsx)("div",{id:i,children:r.formatMessage({id:"filters.staticPeriod.dateFormatHint"},{format:e||lt(r.locale)})}),t?(0,W.jsx)("div",{id:n,children:r.formatMessage({id:"filters.staticPeriod.timeFormatHint"})}):null]})}class dt extends G.Component{inputRef=(0,G.createRef)();invokeInputMethod=e=>{this.inputRef.current&&this.inputRef.current[e]()};blur=()=>this.invokeInputMethod("blur");focus=()=>this.invokeInputMethod("focus");get value(){return this.inputRef.current?this.inputRef.current.value:""}render(){const{className:e}=this.props;return(0,W.jsxs)("span",{className:re(e),children:[(0,W.jsx)("span",{className:"gd-icon-calendar","aria-hidden":"true"}),(0,W.jsx)("input",{...this.props,ref:this.inputRef,className:"input-text s-date-range-picker-input-field"})]})}}function ut({descriptionId:e,errorText:t}){return t?(0,W.jsx)("div",{id:e,className:re("gd-date-range-picker-input__description",{"gd-date-range-picker-input__description--error":!!t,"s-absolute-range-error":!!t}),children:t}):null}const ct=(0,G.forwardRef)((({value:e,inputLabel:t,onKeyDown:i,onClick:n,onChange:r,dateFormat:l,accessibilityConfig:o,isMobile:a,isTimeEnabled:s,isDateOrderError:d,errorMessageTexts:u,withoutApply:c},m)=>{const{inputValue:g,validationContextValue:p,onDateInputChange:f,onDateInputKeyDown:b,onMobileDateChange:y,onDateInputBlur:v}=(({value:e,dateFormat:t,onChange:i,onKeyDown:n,isDateOrderError:r=!1,errorMessageTexts:l,withoutApply:o=!1})=>{const[a,s]=(0,G.useState)($e(e,t)),d=(0,D.useValidationContextValue)((0,D.createInvalidNode)({id:"DateInput"})),{isValid:u,setInvalidDatapoints:c}=d,m=(0,G.useCallback)((e=>{const t=((e,t,i)=>"empty"===e?i.emptyDate:"invalid"===e?i.invalidDate:t?i.startDateAfterEndDate:void 0)(e,r,l);c((()=>[t&&(0,D.createInvalidDatapoint)({message:t})]))}),[l,r,c]);(0,G.useEffect)((()=>{const i=$e(e,t);void 0!==i&&(s(i),m(null))}),[e,t,m]);const g=(0,G.useCallback)((e=>{const n=e.target.value;s(n);const r=Ye(n,t);Qe(r)&&!u&&(m(null),i(r))}),[t,u,m,i]),p=(0,G.useCallback)((e=>{if((0,h.Z)(a))return m("empty"),void i(void 0,e);const n=Ye(a,t);if(void 0===n)return m("invalid"),void i(void 0,e);m(null),i(n,e)}),[t,a,i,m]),f=(0,G.useCallback)((()=>p(!1)),[p]),b=(0,G.useCallback)((e=>{const t=e.target.value,n=P(t),r=Qe(n);i(r?n:void 0),m(r?null:"empty")}),[i,m]),y=(0,G.useCallback)((e=>{(0,z.isEnterKey)(e)&&!o?p(!0):(0,z.isArrowKey)(e)?e.stopPropagation():n(e)}),[o,p,n]);return{inputValue:a,onDateInputChange:g,onMobileDateChange:b,onDateInputBlur:f,onDateInputKeyDown:y,validationContextValue:d}})({value:e,dateFormat:l,onChange:r,onKeyDown:i,isDateOrderError:d,errorMessageTexts:u,withoutApply:c}),C=(0,z.useId)(),{isValid:x,getInvalidDatapoints:E}=p,S=E()[0],I=S?.id??"",F={"aria-label":o.ariaLabel,"aria-labelledby":C,"aria-describedby":x?o.inputHintId:I,...x?{}:{"aria-invalid":!0}},w=(0,W.jsx)(dt,{type:"date",className:re("s-date-range-picker-date","gd-date-range-picker-input","gd-date-range-picker-input-native",{"gd-date-range-picker-input-error":!x,"has-error":!x}),onChange:y,value:ze(e),...F}),k=(0,W.jsxs)("div",{className:re("gd-date-range-picker-input",{"gd-date-range-picker-input-error":!x,"has-error":!x}),children:[(0,W.jsx)("span",{className:"gd-icon-calendar","aria-hidden":"true"}),(0,W.jsx)("input",{ref:m,placeholder:l,onChange:f,onClick:n,onBlur:v,onKeyDown:b,value:g,className:"input-text s-date-range-picker-input-field",...F})]});return(0,W.jsx)(D.ValidationContextStore,{value:p,children:(0,W.jsxs)("div",{className:re("gd-date-range-column",{"gd-date-range-column--with-time":s}),children:[(0,W.jsx)("label",{id:C,children:t}),a?w:k,(0,W.jsx)(ut,{descriptionId:I,errorText:S?.message})]})})}));ct.displayName="DateInput";const mt=e=>String(e).padStart(2,"0"),gt=e=>e?.isValid()?{hours:e.hours(),minutes:e.minutes()}:void 0;function pt({value:e,inputLabel:t,onChange:i,accessibilityConfig:r,errorText:l,isMobile:a,withoutApply:s}){const[d,u]=(0,G.useState)(void 0===(c=e)?void 0:`${mt(c.hours)}:${mt(c.minutes)}`);var c;const m=(0,z.useId)(),g=(0,z.useId)(),p=void 0!==l,f=(0,G.useCallback)((e=>{const t=e.target.value;u(t);const r=n(t,o);(r.isValid()&&p||a)&&i(gt(r))}),[i,p,a]),h=(0,G.useCallback)((e=>{const t=n(d,o);i(gt(t),e)}),[i,d]),b=(0,G.useCallback)((()=>h(!1)),[h]),y=(0,G.useCallback)((e=>{(0,z.isEnterKey)(e)&&!s?h(!0):(0,z.isArrowKey)(e)&&e.stopPropagation()}),[s,h]);return(0,W.jsxs)("div",{className:"gd-date-range-column gd-date-range-column--with-time",children:[(0,W.jsx)("label",{id:m,children:t}),(0,W.jsxs)("span",{className:re("gd-date-range-picker-input","gd-date-range-picker-input-time","s-date-range-picker-input-time",{"gd-date-range-picker-input-error":!!l,"has-error":!!l}),children:[(0,W.jsx)("span",{className:"gd-icon-clock","aria-hidden":"true"}),(0,W.jsx)("input",{type:"time",className:"input-text","aria-label":r.ariaLabel,onChange:f,onBlur:b,onKeyDown:y,value:d,"aria-labelledby":m,"aria-describedby":l?g:r.inputHintId,...l?{"aria-invalid":!0}:{}})]}),(0,W.jsx)(ut,{descriptionId:g,errorText:l})]})}const ft=(0,G.forwardRef)((({date:e,time:t,dateInputLabel:i,timeInputLabel:n,dateTimeLegendLabel:r,onDateChange:l,onTimeChange:o,onDayClick:a,onDateInputKeyDown:s,dateFormat:d,isMobile:u,isTimeEnabled:c,className:m,accessibilityConfig:g,inputErrorMessageTexts:p,errors:f,withoutApply:h},b)=>{const{dateAriaLabel:y,timeAriaLabel:v,dateInputHintId:C,timeInputHintId:x}=g,E=(0,G.useMemo)((()=>({ariaLabel:y,inputHintId:C})),[y,C]),S=(0,G.useMemo)((()=>({ariaLabel:v,inputHintId:x})),[v,x]),I=f?.isTimeOrderError?p.timeInput.startTimeAfterEndTime:void 0;return(0,W.jsx)("div",{className:re(m,{"gd-date-range-row":c}),children:(0,W.jsxs)("fieldset",{children:[(0,W.jsx)("legend",{className:"sr-only",children:c?r:i}),(0,W.jsx)(ct,{ref:b,value:e,inputLabel:i,onChange:l,onKeyDown:s,onClick:a,dateFormat:d,accessibilityConfig:E,errorMessageTexts:p.dateInput,isDateOrderError:f?.isDateOrderError,isMobile:u,isTimeEnabled:c,withoutApply:h}),c?(0,W.jsx)(pt,{value:t,inputLabel:n,onChange:o,accessibilityConfig:S,errorText:I,isMobile:u,withoutApply:h}):null]})})}));ft.displayName="DateTimePicker";const ht="date-range-picker-date-input-hint",bt="date-range-picker-time-input-hint",yt=(0,G.forwardRef)((({date:e,time:t,onDateInputKeyDown:i,onDateChange:n,onTimeChange:r,onInputClick:l,dateFormat:o,isMobile:a,isTimeEnabled:s,errors:u,intl:c},m)=>{const g=(0,G.useMemo)((()=>({dateAriaLabel:c.formatMessage({id:"filters.date.accessibility.label.to"}),timeAriaLabel:c.formatMessage({id:"filters.time.accessibility.label.to"}),dateInputHintId:ht,timeInputHintId:bt})),[c]),p=(0,G.useMemo)((()=>({dateInput:{emptyDate:c.formatMessage({id:"filters.staticPeriod.errors.emptyEndDate"}),invalidDate:c.formatMessage({id:"filters.staticPeriod.errors.invalidEndDate"},{format:o||lt(c.locale)}),startDateAfterEndDate:c.formatMessage({id:"filters.staticPeriod.errors.endDateBeforeStartDate"})},timeInput:{startTimeAfterEndTime:c.formatMessage({id:"filters.staticPeriod.errors.endTimeBeforeStartTime"})}})),[c,o]);return(0,W.jsx)(ft,{ref:m,date:e,time:t,onDateChange:n,onTimeChange:r,onDateInputKeyDown:i,dateInputLabel:c.formatMessage({id:"filters.staticPeriod.dateTo"}),timeInputLabel:c.formatMessage({id:"filters.staticPeriod.timeTo"}),dateTimeLegendLabel:c.formatMessage({id:"filters.staticPeriod.dateTimeTo"}),accessibilityConfig:g,dateFormat:o,isMobile:a,onDayClick:l,isTimeEnabled:s,className:re("s-date-range-picker-to","gd-date-range-picker-to"),defaultTime:d,inputErrorMessageTexts:p,errors:u})}));yt.displayName="ToInputField";const vt=(0,G.forwardRef)((({date:e,time:t,onDateInputKeyDown:i,onDateChange:n,onTimeChange:r,onInputClick:l,dateFormat:o,isMobile:a,isTimeEnabled:d,errors:u,intl:c,withoutApply:m},g)=>{const p=(0,G.useMemo)((()=>({dateAriaLabel:c.formatMessage({id:"filters.date.accessibility.label.from"}),timeAriaLabel:c.formatMessage({id:"filters.time.accessibility.label.from"}),dateInputHintId:ht,timeInputHintId:bt})),[c]),f=(0,G.useMemo)((()=>({dateInput:{emptyDate:c.formatMessage({id:"filters.staticPeriod.errors.emptyStartDate"}),invalidDate:c.formatMessage({id:"filters.staticPeriod.errors.invalidStartDate"},{format:o||lt(c.locale)}),startDateAfterEndDate:c.formatMessage({id:"filters.staticPeriod.errors.startDateAfterEndDate"})},timeInput:{startTimeAfterEndTime:c.formatMessage({id:"filters.staticPeriod.errors.startTimeAfterEndTime"})}})),[c,o]);return(0,W.jsx)(ft,{ref:g,date:e,time:t,onDateChange:n,onTimeChange:r,onDateInputKeyDown:i,dateInputLabel:c.formatMessage({id:"filters.staticPeriod.dateFrom"}),timeInputLabel:c.formatMessage({id:"filters.staticPeriod.timeFrom"}),dateTimeLegendLabel:c.formatMessage({id:"filters.staticPeriod.dateTimeFrom"}),accessibilityConfig:p,dateFormat:o,isMobile:a,onDayClick:l,isTimeEnabled:d,className:re("s-date-range-picker-from","gd-date-range-picker-from"),defaultTime:s,inputErrorMessageTexts:f,errors:u,withoutApply:m})}));vt.displayName="FromInputField";const Ct=()=>{const[e,t]=(0,G.useState)(!1),[i,n]=(0,G.useState)(),r=(0,G.useRef)(null),l=(0,G.useRef)(null),o=(0,G.useRef)(null),a=(0,G.useCallback)((()=>{n("from"),t(!0)}),[]),s=(0,G.useCallback)((()=>{n("to"),t(!0)}),[]),d=(0,G.useCallback)((i=>{!e||"Escape"!==i.key&&"Tab"!==i.key||(t(!1),i.stopPropagation())}),[e]),u=(0,G.useCallback)((()=>t(!1)),[]),c=(0,G.useCallback)((e=>{((e,t,i,n)=>t&&!t.contains(e.target)&&i&&!i.contains(e.target)&&n&&!n.contains(e.target))(e,o.current,r.current,l.current)&&t(!1)}),[]);return(0,G.useEffect)((()=>(document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c))),[c]),{selectedInput:i,isCalendarPopupOpen:e,onDateInputKeyDown:d,onStartDateClick:a,onEndDateClick:s,calendarPopupRef:o,startDateInputRef:r,endDateInputRef:l,closeCalendarPopup:u}},xt=(e,t,i,n)=>{const r=Qe(i),l=Qe(n);if(!r||!l||i<=n)return e(void 0),t(void 0),r&&l;const o=(s=n,!!(a=i)&&!!s&&a.getFullYear()===s.getFullYear()&&a.getMonth()===s.getMonth()&&a.getDate()===s.getDate());var a,s;return e({isDateOrderError:!o,isTimeOrderError:o}),t(void 0),!1};function Et(e,t,i){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:i}const St=(e,t,i,n,r)=>{const[l,o]=(0,G.useState)(e.from),[a,s]=(0,G.useState)(Je(e.from)),[d,u]=(0,G.useState)(e.to),[c,m]=(0,G.useState)(Je(e.to)),[g,p]=(0,G.useState)(),[f,h]=(0,G.useState)(),b=(0,G.useCallback)(((e,t)=>xt(p,h,e,t)),[]),y=(0,G.useCallback)(((e,t)=>xt(h,p,e,t)),[]),v=(0,G.useCallback)(((e,i,n)=>{const o=Xe(Et(e,"startDate",l),Et(e,"startTime",a)),s=Xe(Et(e,"endDate",d),Et(e,"endTime",c));t({from:o,to:s}),i(o,s)&&n&&setTimeout(r,0)}),[t,l,a,d,c,r]),C=(0,G.useCallback)(((e,t)=>{o(e),v({startDate:e},b,t)}),[v,b]),x=(0,G.useCallback)(((e,t)=>{u(e),v({endDate:e},y,t)}),[v,y]),E=(0,G.useCallback)(((e,t)=>{s(e),v({startTime:e},b,t)}),[v,b]),S=(0,G.useCallback)(((e,t)=>{m(e),v({endTime:e},y,t)}),[v,y]),I=(0,G.useCallback)(((e,t)=>{"from"===n?C(t):x(t),i()}),[n,i,C,x]);return{startDate:l,startTime:a,endDate:d,endTime:c,startDateTimeErrors:g,endDateTimeErrors:f,onCalendarDateSelect:I,onStartDateChange:C,onStartTimeChange:E,onEndDateChange:x,onEndTimeChange:S}};function It({range:e,onRangeChange:t,dateFormat:i,dayPickerProps:n,isMobile:r,isTimeEnabled:l,weekStart:o="Sunday",shouldOverlayDatePicker:a=!1,withoutApply:s=!1,submitForm:d}){const u=(0,le.Z)(),{selectedInput:c,isCalendarPopupOpen:m,onDateInputKeyDown:g,onStartDateClick:p,onEndDateClick:f,calendarPopupRef:h,startDateInputRef:b,endDateInputRef:y,closeCalendarPopup:v}=Ct(),{startDate:C,startTime:x,endDate:E,endTime:S,startDateTimeErrors:I,endDateTimeErrors:F,onCalendarDateSelect:w,onStartDateChange:k,onStartTimeChange:A,onEndDateChange:D,onEndTimeChange:j}=St(e,t,v,c,d),O=(0,W.jsx)(vt,{ref:b,date:C,time:x,onDateChange:k,onTimeChange:A,onInputClick:p,onDateInputKeyDown:g,dateFormat:i,isMobile:r,isTimeEnabled:l,errors:I,intl:u,withoutApply:s}),P=(0,W.jsx)(yt,{ref:y,date:E,time:S,onDateChange:D,onTimeChange:j,onInputClick:f,onDateInputKeyDown:g,dateFormat:i,isMobile:r,isTimeEnabled:l,errors:F,intl:u}),N={from:C,to:E},T=(0,W.jsx)(nt,{ref:h,mode:c,originalDateRange:N,selectedDateRange:N,onDateRangeSelect:w,alignTo:`.gd-date-range-picker-${l?c:"from"}`,calendarClassNames:`gd-date-range-picker-picker s-date-range-calendar-${c}`,dayPickerProps:n,weekStart:o,renderAsOverlay:a,intl:u}),M=r?null:(0,W.jsx)(st,{dateFormat:i,isTimeEnabled:l,dateHintId:ht,timeHintId:bt,intl:u});if(l){const e="from"===c&&m,t="to"===c&&m;return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)("div",{className:"gd-date-range-picker datetime s-date-range-picker",children:[O,e?T:null,P,t?T:null]}),M]})}return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)("div",{className:"gd-date-range-picker gd-date-range-row s-date-range-picker",children:[O,P]}),m?T:null,M]})}const Ft={mode:"range",weekStartsOn:0};function wt({dateFormat:e,isMobile:t,selectedFilterOption:i,isTimeEnabled:n,weekStart:r,shouldOverlayDatePicker:l,withoutApply:o,onSelectedFilterOptionChange:a,submitForm:s}){return(0,W.jsx)(It,{dateFormat:e,onRangeChange:e=>{a(Fe(e,i.localIdentifier,n))},range:we(i,n),isMobile:t,dayPickerProps:Ft,isTimeEnabled:n,weekStart:r,shouldOverlayDatePicker:l,submitForm:s,withoutApply:o})}function kt({children:e,isMobile:t,className:i,...n}){return(0,W.jsx)("div",{className:re(i,"gd-date-filter-form-wrapper",!t&&"gd-date-filter-form-wrapper-desktop"),...n,children:(0,W.jsx)("div",{className:"gd-date-filter-form-wrapper-inner",children:e})})}const At="gd-date-filter-item-mobile";function Dt({filterOptions:e,selectedFilterOption:t,dateFormat:i,weekStart:n,isTimeForAbsoluteRangeEnabled:r,isMobile:l,route:o,withoutApply:a,changeRoute:s,onSelectedFilterOptionChange:d,closeDropdown:u,onApplyClick:c}){const m=(0,G.useCallback)((()=>{c(),u()}),[u,c]);if(!e.absoluteForm)return null;const p=e.absoluteForm.localIdentifier===t.localIdentifier,f="absoluteForm"===o;return(0,W.jsxs)(W.Fragment,{children:[l&&f?null:(0,W.jsx)(me,{isSelected:p,onClick:()=>{s("absoluteForm"),(0,g.isAbsoluteDateFilterForm)(t)||d(e.absoluteForm)},className:re("s-absolute-form","s-do-not-close-dropdown-on-click",l&&At),children:e.absoluteForm.name?e.absoluteForm.name:(0,W.jsx)(Ce,{id:"filters.staticPeriod"})}),!p||l&&!f?null:(0,W.jsx)(kt,{isMobile:l,children:(0,W.jsx)(wt,{dateFormat:i,onSelectedFilterOptionChange:d,selectedFilterOption:t,isMobile:l,isTimeEnabled:r,weekStart:n,submitForm:m,withoutApply:a})})]})}function jt({className:e,filterOption:t,selectedFilterOption:i,onSelectedFilterOptionChange:n,isFocusFallback:r}){return(0,W.jsx)(me,{isSelected:t.localIdentifier===i.localIdentifier,onClick:()=>n(t),className:re("s-all-time",e),isFocusFallback:r,children:t.name?t.name:(0,W.jsx)(Ce,{id:"filters.allTime.title"})})}const Ot="gd-date-filter-item-mobile";function Pt({filterOptions:e,selectedFilterOption:t,isMobile:i,isFocusFallback:n,onSelectedFilterOptionChange:r}){return e.allTime?(0,W.jsx)(jt,{filterOption:e.allTime,selectedFilterOption:t,onSelectedFilterOptionChange:r,className:i?Ot:void 0,isFocusFallback:n}):null}var Nt=i(11348);function Tt({className:e,children:t,...i}){const n=(0,le.Z)();return(0,W.jsx)("div",{role:"tablist","aria-label":n.formatMessage({id:"dateFilterDropdown.relativeForm.label"}),className:re("gd-tabs small is-condensed",e),...i,children:t})}function Mt({selected:e,className:t,accessibilityConfig:i,onClick:n,children:r,...l}){return(0,W.jsx)("button",{id:e?X:void 0,onClick:n,role:"tab","aria-selected":e,"aria-controls":e?i?.ariaControls:void 0,tabIndex:e?0:-1,className:re(e&&"is-active","gd-tab",t),...l,children:r})}const Lt={"GDC.time.year":0,"GDC.time.quarter":1,"GDC.time.month":2,"GDC.time.week_us":3,"GDC.time.date":4,"GDC.time.hour":5,"GDC.time.minute":6};function Rt({availableGranularities:e,selectedGranularity:t,accessibilityConfig:i,onSelectedGranularityChange:n}){return(0,W.jsx)(Tt,{className:"gd-relative-filter-form-granularity-tabs s-relative-filter-form-granularity-tabs",children:(r=e,(0,Nt.Z)(r,(e=>Lt[e]))).map((e=>{const r=m[e];return void 0===r?null:(0,W.jsx)(Mt,{selected:e===t,onClick:()=>n(e),className:`s-granularity-${r}`,accessibilityConfig:i,children:(0,W.jsx)(Ce,{id:j[r].id})},e)})).filter(Boolean)});var r}var Bt=i(25356),_t=i(63366),Vt=i(87462),Ht=i(97326),Zt=i(94578),qt=i(45697),Wt=i.n(qt),Gt=i(9155);function Kt(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function Ut(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function zt(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var i=getComputedStyle(e,null);return Ut(i.overflowY,t)||Ut(i.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function $t(e,t,i,n,r,l,o,a){return l<e&&o>t||l>e&&o<t?0:l<=e&&a<=i||o>=t&&a>=i?l-e-n:o>t&&a<i||l<e&&a>i?o-t+r:0}i(59864);var Yt=0;function Qt(e){return"function"==typeof e?e:Xt}function Xt(){}function Jt(e,t){if(null!==e){var i=function(e,t){var i=window,n=t.scrollMode,r=t.block,l=t.inline,o=t.boundary,a=t.skipOverflowHiddenElements,s="function"==typeof o?o:function(e){return e!==o};if(!Kt(e))throw new TypeError("Invalid target");for(var d,u,c=document.scrollingElement||document.documentElement,m=[],g=e;Kt(g)&&s(g);){if((g=null==(u=(d=g).parentElement)?d.getRootNode().host||null:u)===c){m.push(g);break}null!=g&&g===document.body&&zt(g)&&!zt(document.documentElement)||null!=g&&zt(g,a)&&m.push(g)}for(var p=i.visualViewport?i.visualViewport.width:innerWidth,f=i.visualViewport?i.visualViewport.height:innerHeight,h=window.scrollX||pageXOffset,b=window.scrollY||pageYOffset,y=e.getBoundingClientRect(),v=y.height,C=y.width,x=y.top,E=y.right,S=y.bottom,I=y.left,F="start"===r||"nearest"===r?x:"end"===r?S:x+v/2,w="center"===l?I+C/2:"end"===l?E:I,k=[],A=0;A<m.length;A++){var D=m[A],j=D.getBoundingClientRect(),O=j.height,P=j.width,N=j.top,T=j.right,M=j.bottom,L=j.left;if("if-needed"===n&&x>=0&&I>=0&&S<=f&&E<=p&&x>=N&&S<=M&&I>=L&&E<=T)return k;var R=getComputedStyle(D),B=parseInt(R.borderLeftWidth,10),_=parseInt(R.borderTopWidth,10),V=parseInt(R.borderRightWidth,10),H=parseInt(R.borderBottomWidth,10),Z=0,q=0,W="offsetWidth"in D?D.offsetWidth-D.clientWidth-B-V:0,G="offsetHeight"in D?D.offsetHeight-D.clientHeight-_-H:0,K="offsetWidth"in D?0===D.offsetWidth?0:P/D.offsetWidth:0,U="offsetHeight"in D?0===D.offsetHeight?0:O/D.offsetHeight:0;if(c===D)Z="start"===r?F:"end"===r?F-f:"nearest"===r?$t(b,b+f,f,_,H,b+F,b+F+v,v):F-f/2,q="start"===l?w:"center"===l?w-p/2:"end"===l?w-p:$t(h,h+p,p,B,V,h+w,h+w+C,C),Z=Math.max(0,Z+b),q=Math.max(0,q+h);else{Z="start"===r?F-N-_:"end"===r?F-M+H+G:"nearest"===r?$t(N,M,O,_,H+G,F,F+v,v):F-(N+O/2)+G/2,q="start"===l?w-L-B:"center"===l?w-(L+P/2)+W/2:"end"===l?w-T+V+W:$t(L,T,P,B,V+W,w,w+C,C);var z=D.scrollLeft,$=D.scrollTop;F+=$-(Z=Math.max(0,Math.min($+Z/U,D.scrollHeight-O/U+G))),w+=z-(q=Math.max(0,Math.min(z+q/K,D.scrollWidth-P/K+W)))}k.push({el:D,top:Z,left:q})}return k}(e,{boundary:t,block:"nearest",scrollMode:"if-needed"});i.forEach((function(e){var t=e.el,i=e.top,n=e.left;t.scrollTop=i,t.scrollLeft=n}))}}function ei(e,t){return e===t||e.contains&&e.contains(t)}function ti(e,t){var i;function n(){i&&clearTimeout(i)}function r(){for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];n(),i=setTimeout((function(){i=null,e.apply(void 0,l)}),t)}return r.cancel=n,r}function ii(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return t.some((function(t){return t&&t.apply(void 0,[e].concat(n)),e.preventDownshiftDefault||e.hasOwnProperty("nativeEvent")&&e.nativeEvent.preventDownshiftDefault}))}}function ni(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){t.forEach((function(t){"function"==typeof t?t(e):t&&(t.current=e)}))}}function ri(e){var t=e.isOpen,i=e.selectedItem,n=e.resultCount,r=e.previousResultCount,l=e.itemToString;return t?n?n!==r?n+" result"+(1===n?" is":"s are")+" available, use up and down arrow keys to navigate. Press Enter key to select.":"":"No results are available.":i?l(i):""}function li(e,t){return!(e=Array.isArray(e)?e[0]:e)&&t?t:e}var oi=["highlightedIndex","inputValue","isOpen","selectedItem","type"];function ai(e){void 0===e&&(e={});var t={};return oi.forEach((function(i){e.hasOwnProperty(i)&&(t[i]=e[i])})),t}function si(e){var t=e.key,i=e.keyCode;return i>=37&&i<=40&&0!==t.indexOf("Arrow")?"Arrow"+t:t}function di(e,t,i){var n=i-1;("number"!=typeof t||t<0||t>=i)&&(t=e>0?-1:n+1);var r=t+e;return r<0?r=n:r>n&&(r=0),r}var ui=ti((function(){ci().textContent=""}),500);function ci(e){void 0===e&&(e=document);var t=e.getElementById("a11y-status-message");return t||((t=e.createElement("div")).setAttribute("id","a11y-status-message"),t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),t.setAttribute("aria-relevant","additions text"),Object.assign(t.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),e.body.appendChild(t),t)}var mi=Object.freeze({__proto__:null,unknown:0,mouseUp:1,itemMouseEnter:2,keyDownArrowUp:3,keyDownArrowDown:4,keyDownEscape:5,keyDownEnter:6,keyDownHome:7,keyDownEnd:8,clickItem:9,blurInput:10,changeInput:11,keyDownSpaceButton:12,clickButton:13,blurButton:14,controlledPropUpdatedSelectedItem:15,touchEnd:16}),gi=function(){var e=function(e){function t(t){var i=e.call(this,t)||this;i.id=i.props.id||"downshift-"+String(Yt++),i.menuId=i.props.menuId||i.id+"-menu",i.labelId=i.props.labelId||i.id+"-label",i.inputId=i.props.inputId||i.id+"-input",i.getItemId=i.props.getItemId||function(e){return i.id+"-item-"+e},i.input=null,i.items=[],i.itemCount=null,i.previousResultCount=0,i.timeoutIds=[],i.internalSetTimeout=function(e,t){var n=setTimeout((function(){i.timeoutIds=i.timeoutIds.filter((function(e){return e!==n})),e()}),t);i.timeoutIds.push(n)},i.setItemCount=function(e){i.itemCount=e},i.unsetItemCount=function(){i.itemCount=null},i.setHighlightedIndex=function(e,t){void 0===e&&(e=i.props.defaultHighlightedIndex),void 0===t&&(t={}),t=ai(t),i.internalSetState((0,Vt.Z)({highlightedIndex:e},t))},i.clearSelection=function(e){i.internalSetState({selectedItem:null,inputValue:"",highlightedIndex:i.props.defaultHighlightedIndex,isOpen:i.props.defaultIsOpen},e)},i.selectItem=function(e,t,n){t=ai(t),i.internalSetState((0,Vt.Z)({isOpen:i.props.defaultIsOpen,highlightedIndex:i.props.defaultHighlightedIndex,selectedItem:e,inputValue:i.props.itemToString(e)},t),n)},i.selectItemAtIndex=function(e,t,n){var r=i.items[e];null!=r&&i.selectItem(r,t,n)},i.selectHighlightedItem=function(e,t){return i.selectItemAtIndex(i.getState().highlightedIndex,e,t)},i.internalSetState=function(e,t){var n,r,l={},o="function"==typeof e;return!o&&e.hasOwnProperty("inputValue")&&i.props.onInputValueChange(e.inputValue,(0,Vt.Z)({},i.getStateAndHelpers(),{},e)),i.setState((function(t){t=i.getState(t);var a=o?e(t):e;a=i.props.stateReducer(t,a),n=a.hasOwnProperty("selectedItem");var s={},d={};return n&&a.selectedItem!==t.selectedItem&&(r=a.selectedItem),a.type=a.type||0,Object.keys(a).forEach((function(e){t[e]!==a[e]&&(l[e]=a[e]),"type"!==e&&(d[e]=a[e],i.isControlledProp(e)||(s[e]=a[e]))})),o&&a.hasOwnProperty("inputValue")&&i.props.onInputValueChange(a.inputValue,(0,Vt.Z)({},i.getStateAndHelpers(),{},a)),s}),(function(){Qt(t)(),Object.keys(l).length>1&&i.props.onStateChange(l,i.getStateAndHelpers()),n&&i.props.onSelect(e.selectedItem,i.getStateAndHelpers()),void 0!==r&&i.props.onChange(r,i.getStateAndHelpers()),i.props.onUserAction(l,i.getStateAndHelpers())}))},i.rootRef=function(e){return i._rootNode=e},i.getRootProps=function(e,t){var n,r=void 0===e?{}:e,l=r.refKey,o=void 0===l?"ref":l,a=r.ref,s=(0,_t.Z)(r,["refKey","ref"]),d=(void 0===t?{}:t).suppressRefError,u=void 0!==d&&d;i.getRootProps.called=!0,i.getRootProps.refKey=o,i.getRootProps.suppressRefError=u;var c=i.getState().isOpen;return(0,Vt.Z)(((n={})[o]=ni(a,i.rootRef),n.role="combobox",n["aria-expanded"]=c,n["aria-haspopup"]="listbox",n["aria-owns"]=c?i.menuId:null,n["aria-labelledby"]=i.labelId,n),s)},i.keyDownHandlers={ArrowDown:function(e){var t=this;if(e.preventDefault(),this.getState().isOpen){var i=e.shiftKey?5:1;this.moveHighlightedIndex(i,{type:4})}else this.internalSetState({isOpen:!0,type:4},(function(){var e=t.getItemCount();e>0&&t.setHighlightedIndex(di(1,t.getState().highlightedIndex,e),{type:4})}))},ArrowUp:function(e){var t=this;if(e.preventDefault(),this.getState().isOpen){var i=e.shiftKey?-5:-1;this.moveHighlightedIndex(i,{type:3})}else this.internalSetState({isOpen:!0,type:3},(function(){var e=t.getItemCount();e>0&&t.setHighlightedIndex(di(-1,t.getState().highlightedIndex,e),{type:4})}))},Enter:function(e){var t=this.getState(),i=t.isOpen,n=t.highlightedIndex;if(i&&null!=n){e.preventDefault();var r=this.items[n],l=this.getItemNodeFromIndex(n);if(null==r||l&&l.hasAttribute("disabled"))return;this.selectHighlightedItem({type:6})}},Escape:function(e){e.preventDefault(),this.reset({type:5,selectedItem:null,inputValue:""})}},i.buttonKeyDownHandlers=(0,Vt.Z)({},i.keyDownHandlers,{" ":function(e){e.preventDefault(),this.toggleMenu({type:12})}}),i.inputKeyDownHandlers=(0,Vt.Z)({},i.keyDownHandlers,{Home:function(e){this.highlightFirstOrLastIndex(e,!0,{type:7})},End:function(e){this.highlightFirstOrLastIndex(e,!1,{type:8})}}),i.getToggleButtonProps=function(e){var t=void 0===e?{}:e,n=t.onClick,r=(t.onPress,t.onKeyDown),l=t.onKeyUp,o=t.onBlur,a=(0,_t.Z)(t,["onClick","onPress","onKeyDown","onKeyUp","onBlur"]),s=i.getState().isOpen,d={onClick:ii(n,i.buttonHandleClick),onKeyDown:ii(r,i.buttonHandleKeyDown),onKeyUp:ii(l,i.buttonHandleKeyUp),onBlur:ii(o,i.buttonHandleBlur)},u=a.disabled?{}:d;return(0,Vt.Z)({type:"button",role:"button","aria-label":s?"close menu":"open menu","aria-haspopup":!0,"data-toggle":!0},u,{},a)},i.buttonHandleKeyUp=function(e){e.preventDefault()},i.buttonHandleKeyDown=function(e){var t=si(e);i.buttonKeyDownHandlers[t]&&i.buttonKeyDownHandlers[t].call((0,Ht.Z)(i),e)},i.buttonHandleClick=function(e){e.preventDefault(),i.props.environment.document.activeElement===i.props.environment.document.body&&e.target.focus(),i.internalSetTimeout((function(){return i.toggleMenu({type:13})}))},i.buttonHandleBlur=function(e){var t=e.target;i.internalSetTimeout((function(){i.isMouseDown||null!=i.props.environment.document.activeElement&&i.props.environment.document.activeElement.id===i.inputId||i.props.environment.document.activeElement===t||i.reset({type:14})}))},i.getLabelProps=function(e){return(0,Vt.Z)({htmlFor:i.inputId,id:i.labelId},e)},i.getInputProps=function(e){var t,n=void 0===e?{}:e,r=n.onKeyDown,l=n.onBlur,o=n.onChange,a=n.onInput,s=(n.onChangeText,(0,_t.Z)(n,["onKeyDown","onBlur","onChange","onInput","onChangeText"])),d={},u=i.getState(),c=u.inputValue,m=u.isOpen,g=u.highlightedIndex;return s.disabled||((t={}).onChange=ii(o,a,i.inputHandleChange),t.onKeyDown=ii(r,i.inputHandleKeyDown),t.onBlur=ii(l,i.inputHandleBlur),d=t),(0,Vt.Z)({"aria-autocomplete":"list","aria-activedescendant":m&&"number"==typeof g&&g>=0?i.getItemId(g):null,"aria-controls":m?i.menuId:null,"aria-labelledby":i.labelId,autoComplete:"off",value:c,id:i.inputId},d,{},s)},i.inputHandleKeyDown=function(e){var t=si(e);t&&i.inputKeyDownHandlers[t]&&i.inputKeyDownHandlers[t].call((0,Ht.Z)(i),e)},i.inputHandleChange=function(e){i.internalSetState({type:11,isOpen:!0,inputValue:e.target.value,highlightedIndex:i.props.defaultHighlightedIndex})},i.inputHandleBlur=function(){i.internalSetTimeout((function(){var e=i.props.environment.document&&!!i.props.environment.document.activeElement&&!!i.props.environment.document.activeElement.dataset&&i.props.environment.document.activeElement.dataset.toggle&&i._rootNode&&i._rootNode.contains(i.props.environment.document.activeElement);i.isMouseDown||e||i.reset({type:10})}))},i.menuRef=function(e){i._menuNode=e},i.getMenuProps=function(e,t){var n,r=void 0===e?{}:e,l=r.refKey,o=void 0===l?"ref":l,a=r.ref,s=(0,_t.Z)(r,["refKey","ref"]),d=(void 0===t?{}:t).suppressRefError,u=void 0!==d&&d;return i.getMenuProps.called=!0,i.getMenuProps.refKey=o,i.getMenuProps.suppressRefError=u,(0,Vt.Z)(((n={})[o]=ni(a,i.menuRef),n.role="listbox",n["aria-labelledby"]=s&&s["aria-label"]?null:i.labelId,n.id=i.menuId,n),s)},i.getItemProps=function(e){var t,n=void 0===e?{}:e,r=n.onMouseMove,l=n.onMouseDown,o=n.onClick,a=(n.onPress,n.index),s=n.item,d=void 0===s?void 0:s,u=(0,_t.Z)(n,["onMouseMove","onMouseDown","onClick","onPress","index","item"]);void 0===a?(i.items.push(d),a=i.items.indexOf(d)):i.items[a]=d;var c=o,m=((t={onMouseMove:ii(r,(function(){a!==i.getState().highlightedIndex&&(i.setHighlightedIndex(a,{type:2}),i.avoidScrolling=!0,i.internalSetTimeout((function(){return i.avoidScrolling=!1}),250))})),onMouseDown:ii(l,(function(e){e.preventDefault()}))}).onClick=ii(c,(function(){i.selectItemAtIndex(a,{type:9})})),t),g=u.disabled?{onMouseDown:m.onMouseDown}:m;return(0,Vt.Z)({id:i.getItemId(a),role:"option","aria-selected":i.getState().highlightedIndex===a},g,{},u)},i.clearItems=function(){i.items=[]},i.reset=function(e,t){void 0===e&&(e={}),e=ai(e),i.internalSetState((function(t){var n=t.selectedItem;return(0,Vt.Z)({isOpen:i.props.defaultIsOpen,highlightedIndex:i.props.defaultHighlightedIndex,inputValue:i.props.itemToString(n)},e)}),t)},i.toggleMenu=function(e,t){void 0===e&&(e={}),e=ai(e),i.internalSetState((function(t){var n=t.isOpen;return(0,Vt.Z)({isOpen:!n},n&&{highlightedIndex:i.props.defaultHighlightedIndex},{},e)}),(function(){var n=i.getState(),r=n.isOpen,l=n.highlightedIndex;r&&i.getItemCount()>0&&"number"==typeof l&&i.setHighlightedIndex(l,e),Qt(t)()}))},i.openMenu=function(e){i.internalSetState({isOpen:!0},e)},i.closeMenu=function(e){i.internalSetState({isOpen:!1},e)},i.updateStatus=ti((function(){var e=i.getState(),t=i.items[e.highlightedIndex],n=i.getItemCount(),r=i.props.getA11yStatusMessage((0,Vt.Z)({itemToString:i.props.itemToString,previousResultCount:i.previousResultCount,resultCount:n,highlightedItem:t},e));i.previousResultCount=n,function(e,t){var i=ci(t);e&&(i.textContent=e,ui())}(r,i.props.environment.document)}),200);var n=i.props,r=n.defaultHighlightedIndex,l=n.initialHighlightedIndex,o=void 0===l?r:l,a=n.defaultIsOpen,s=n.initialIsOpen,d=void 0===s?a:s,u=n.initialInputValue,c=void 0===u?"":u,m=n.initialSelectedItem,g=void 0===m?null:m,p=i.getState({highlightedIndex:o,isOpen:d,inputValue:c,selectedItem:g});return null!=p.selectedItem&&void 0===i.props.initialInputValue&&(p.inputValue=i.props.itemToString(p.selectedItem)),i.state=p,i}(0,Zt.Z)(t,e);var i=t.prototype;return i.internalClearTimeouts=function(){this.timeoutIds.forEach((function(e){clearTimeout(e)})),this.timeoutIds=[]},i.getState=function(e){var t=this;return void 0===e&&(e=this.state),Object.keys(e).reduce((function(i,n){return i[n]=t.isControlledProp(n)?t.props[n]:e[n],i}),{})},i.isControlledProp=function(e){return void 0!==this.props[e]},i.getItemCount=function(){var e=this.items.length;return null!=this.itemCount?e=this.itemCount:void 0!==this.props.itemCount&&(e=this.props.itemCount),e},i.getItemNodeFromIndex=function(e){return this.props.environment.document.getElementById(this.getItemId(e))},i.scrollHighlightedItemIntoView=function(){var e=this.getItemNodeFromIndex(this.getState().highlightedIndex);this.props.scrollIntoView(e,this._menuNode)},i.moveHighlightedIndex=function(e,t){var i=this.getItemCount();if(i>0){var n=di(e,this.getState().highlightedIndex,i);this.setHighlightedIndex(n,t)}},i.highlightFirstOrLastIndex=function(e,t,i){var n=this.getItemCount()-1;n<0||!this.getState().isOpen||(e.preventDefault(),this.setHighlightedIndex(t?0:n,i))},i.getStateAndHelpers=function(){var e=this.getState(),t=e.highlightedIndex,i=e.inputValue,n=e.selectedItem,r=e.isOpen,l=this.props.itemToString,o=this.id,a=this.getRootProps,s=this.getToggleButtonProps,d=this.getLabelProps,u=this.getMenuProps,c=this.getInputProps,m=this.getItemProps,g=this.openMenu,p=this.closeMenu,f=this.toggleMenu,h=this.selectItem,b=this.selectItemAtIndex,y=this.selectHighlightedItem,v=this.setHighlightedIndex,C=this.clearSelection,x=this.clearItems;return{getRootProps:a,getToggleButtonProps:s,getLabelProps:d,getMenuProps:u,getInputProps:c,getItemProps:m,reset:this.reset,openMenu:g,closeMenu:p,toggleMenu:f,selectItem:h,selectItemAtIndex:b,selectHighlightedItem:y,setHighlightedIndex:v,clearSelection:C,clearItems:x,setItemCount:this.setItemCount,unsetItemCount:this.unsetItemCount,setState:this.internalSetState,itemToString:l,id:o,highlightedIndex:t,inputValue:i,isOpen:r,selectedItem:n}},i.componentDidMount=function(){var e=this,t=function(t,i){void 0===i&&(i=!0);var n=e.props.environment.document;return[e._rootNode,e._menuNode].some((function(e){return e&&(ei(e,t)||i&&ei(e,n.activeElement))}))},i=function(){e.isMouseDown=!0},n=function(i){e.isMouseDown=!1,!t(i.target)&&e.getState().isOpen&&e.reset({type:1},(function(){return e.props.onOuterClick(e.getStateAndHelpers())}))},r=function(){e.isTouchMove=!1},l=function(){e.isTouchMove=!0},o=function(i){var n=t(i.target,!1);e.isTouchMove||n||!e.getState().isOpen||e.reset({type:16},(function(){return e.props.onOuterClick(e.getStateAndHelpers())}))},a=this.props.environment;a.addEventListener("mousedown",i),a.addEventListener("mouseup",n),a.addEventListener("touchstart",r),a.addEventListener("touchmove",l),a.addEventListener("touchend",o),this.cleanup=function(){e.internalClearTimeouts(),e.updateStatus.cancel(),a.removeEventListener("mousedown",i),a.removeEventListener("mouseup",n),a.removeEventListener("touchstart",r),a.removeEventListener("touchmove",l),a.removeEventListener("touchend",o)}},i.shouldScroll=function(e,t){var i=(void 0===this.props.highlightedIndex?this.getState():this.props).highlightedIndex,n=(void 0===t.highlightedIndex?e:t).highlightedIndex;return i&&this.getState().isOpen&&!e.isOpen||i!==n},i.componentDidUpdate=function(e,t){this.isControlledProp("selectedItem")&&this.props.selectedItemChanged(e.selectedItem,this.props.selectedItem)&&this.internalSetState({type:15,inputValue:this.props.itemToString(this.props.selectedItem)}),!this.avoidScrolling&&this.shouldScroll(t,e)&&this.scrollHighlightedItemIntoView(),this.updateStatus()},i.componentWillUnmount=function(){this.cleanup()},i.render=function(){var e=li(this.props.children,Xt);this.clearItems(),this.getRootProps.called=!1,this.getRootProps.refKey=void 0,this.getRootProps.suppressRefError=void 0,this.getMenuProps.called=!1,this.getMenuProps.refKey=void 0,this.getMenuProps.suppressRefError=void 0,this.getLabelProps.called=!1,this.getInputProps.called=!1;var t=li(e(this.getStateAndHelpers()));return t?this.getRootProps.called||this.props.suppressRefError?t:function(e){return"string"==typeof e.type}(t)?(0,Gt.cloneElement)(t,this.getRootProps(function(e){return e.props}(t))):void 0:null},t}(Gt.Component);return e.defaultProps={defaultHighlightedIndex:null,defaultIsOpen:!1,getA11yStatusMessage:ri,itemToString:function(e){return null==e?"":String(e)},onStateChange:Xt,onInputValueChange:Xt,onUserAction:Xt,onChange:Xt,onSelect:Xt,onOuterClick:Xt,selectedItemChanged:function(e,t){return e!==t},environment:"undefined"==typeof window?{}:window,stateReducer:function(e,t){return t},suppressRefError:!1,scrollIntoView:Jt},e.stateChangeTypes=mi,e}();Wt().array.isRequired,Wt().func,Wt().func,Wt().func,Wt().bool,Wt().number,Wt().number,Wt().number,Wt().bool,Wt().bool,Wt().bool,Wt().any,Wt().any,Wt().any,Wt().string,Wt().string,Wt().string,Wt().func,Wt().string,Wt().func,Wt().func,Wt().func,Wt().func,Wt().func,Wt().shape({addEventListener:Wt().func,removeEventListener:Wt().func,document:Wt().shape({getElementById:Wt().func,activeElement:Wt().any,body:Wt().any})}),"undefined"==typeof window||window;var pi=gi,fi=i(96446);const hi=e=>"option"===e?.type&&e.label?e.label:"",bi=e=>e.filter((e=>"option"===e.type)),yi="GDC.time.date",vi={inputCategory:"Empty"},Ci={inputCategory:"TooBig"},xi={"GDC.time.minute":120,"GDC.time.hour":48,[yi]:365,"GDC.time.week_us":104,"GDC.time.month":60,"GDC.time.quarter":20,"GDC.time.year":20},Ei=e=>e?.trim(),Si=e=>{if(!e)return vi;const t=/^[^-\d]*(-?\d+)(?:\s|$)/.exec(e);if(t){const n=t[1],r=Number.parseInt(n,10);return i=r,Math.abs(i)<=99999?{offset:r,isOnlyNumber:n===e,inputCategory:"Numeric"}:Ci}var i;return{inputCategory:"Textual",trimmedValue:e}},Ii=(e,t,i)=>{const n=m[t],r=e<0?"history":0===e?"today":"future";return{type:"option",value:e,label:void 0===n?t:i.formatMessage(j[`${n}_${r}`],{offset:e,n:Math.abs(e)})}},Fi=(e,t,i)=>e.map((e=>Ii(e,t,i))),wi=(e,t,i,n)=>{const r=e.toLowerCase(),l=((e,t,i)=>{const n=[-1,0,1],r=Math.abs(e),l=void 0!==e&&r>1?[-r,...n,r]:n;return Fi(l,t,i)})(t,i,n).filter((e=>e.label.toLowerCase().includes(r)));return l.length>0?l:(e=>[{type:"error",label:e.formatMessage({id:"filters.floatingRange.noMatch"})}])(n)},ki=(e,t)=>{const i=Ei(t);return bi(e).find((e=>e.label===i))},Ai=(e,t)=>{const i=Ei(t);return bi(e).findIndex((e=>e.label===i))},Di=(e,t)=>bi(e).find((e=>e.value===t));function ji({children:e,className:t,...i}){return(0,W.jsx)("div",{className:re("gd-select-heading gd-list-item gd-list-item-header",t),...i,children:e})}function Oi({isFocused:e,isSelected:t,className:i,children:n,...r}){return(0,W.jsx)("div",{className:re("gd-list-item","gd-select-option",t&&"gd-select-option-is-selected",e&&"gd-select-option-is-focused s-select-item-focused",i),...r,children:n})}function Pi({className:e,...t}){return(0,W.jsx)("hr",{className:re("gd-separator-generic",e),...t})}function Ni({className:e,...t}){return(0,W.jsx)("div",{className:re("gd-select-separator",e),...t,children:(0,W.jsx)(Pi,{})})}const Ti={option:32,heading:22,error:22,separator:1},Mi=e=>t=>{const i=e[t].type;return Ti[i]},Li=e=>Math.floor(e.length/2);class Ri extends G.Component{static defaultProps={selectedItem:null,visibleItemsRange:3};listRef=(0,G.createRef)();render(){const{items:e,selectedItem:t,highlightedIndex:i,getItemProps:n,getMenuProps:r,className:l,optionClassName:o,visibleItemsRange:a}=this.props,s=(({items:e,selectedItem:t,highlightedIndex:i,getItemProps:n,optionClassName:r})=>function({index:l,style:o}){const a=bi(e),s=e[l];if("option"===s.type){const e=n({item:s,index:a.indexOf(s),isSelected:!(!t||!s)&&t.value===s.value,className:r});return(0,W.jsx)(Oi,{...e,isFocused:!(!a[i]||!s)&&a[i].value===s.value,style:o,children:s.label},`${s.type}-${s.value}`)}return"heading"===s.type||"error"===s.type?(0,W.jsx)(ji,{style:o,children:s.label},`${s.type}-${s.label}`):"separator"===s.type?(0,W.jsx)(Ni,{style:o},`${s.type}-${l}`):null})({items:e,selectedItem:t,highlightedIndex:i,getItemProps:n,optionClassName:o}),d=Li(bi(e)),u=(0,fi.Z)(Math.max(d-a,0),Math.min(d+a+1,e.length)),c=Mi(e),m=u.reduce(((e,t)=>e+c(t)),0);return(0,W.jsx)("div",{...r({className:re("gd-select-menu-wrapper",l)}),children:(0,W.jsx)("div",{className:"gd-select-menu s-select-menu",children:(0,W.jsx)("div",{className:"List",ref:this.listRef,style:{height:m,width:"100%",overflowY:1===e.length?"hidden":"auto"},children:e.map(((e,t)=>(0,W.jsx)(s,{index:t,style:{height:c(t)}},`item-${t}`)))})})})}scrollToIndex=(e=this.props.highlightedIndex)=>{if(this.listRef.current){const{items:t}=this.props,i=bi(t)[null===e?Li(bi(t)):e],n=t.indexOf(i);if(n>=0){const e=this.listRef.current,i=Mi(t),r=t.slice(0,n).reduce(((e,t,n)=>e+i(n)),0),l=i(n),o=Math.max(0,r-Math.max(0,e.clientHeight/2-l/2));e.scrollTo({top:o})}}};scrollToTop=()=>{this.listRef.current&&this.listRef.current.scrollTo({top:0})};componentDidUpdate=e=>{const{highlightedIndex:t,items:i,setHighlightedIndex:n,inputValue:r}=this.props,l=bi(e.items).length-1,o=bi(i).length-1,a=0===e.highlightedIndex&&t===o,s=e.highlightedIndex===l&&0===t,d=""===r.trim(),u=""!==e.inputValue.trim()&&d,c=e.inputValue.trim()!==r.trim(),m=Li(bi(i));u?n(m):c&&n(0);const g=1===this.props.items.length;u?this.scrollToIndex(m):a||s?this.scrollToIndex():g&&this.scrollToTop()};componentDidMount(){if(this.props.inputValue)this.scrollToIndex();else{const e=Li(bi(this.props.items));this.props.setHighlightedIndex(e),this.scrollToIndex(e)}}}const Bi=(0,Bt.b)(pi);function _i({initialIsOpen:e=!1,placeholder:t,getItems:i,value:n=null,className:r,style:l,optionClassName:o,visibleItemsRange:a=3,accessibilityConfig:s,inputValue:d,onChange:u=(()=>{}),onInputValueChange:c,onBlur:m}){const[g,p]=(0,G.useState)(""),f=(0,G.useCallback)((e=>{e&&(p(e.label),u(e.value))}),[u]),h=(0,G.useCallback)((e=>{p(e),c(e)}),[c]),b=(0,G.useCallback)(((e,t)=>{m?m():(t(e),h(e?e.label:""))}),[m,h]),y=(0,G.useCallback)((e=>{const t=e.target.value;h(t)}),[h]),v=(0,G.useMemo)((()=>null===n?[]:i(n.toString())),[i,n]),C=(0,G.useMemo)((()=>null!==n&&Di(v,n)||null),[n,v]),x=(0,G.useCallback)((e=>{const t=i(e);return C&&e.trim()!==C.label&&!Di(t,C.value)?C.value<0?[C,...t]:[...t,C]:t}),[i,C]),E=(0,G.useMemo)((()=>x(g)),[x,g]),S=(0,G.useMemo)((()=>bi(E)),[E]),I=""!==g.trim(),F=C?Ai(S,C.label):void 0,w=I?0:C?F:Li(S),k=(0,G.useCallback)(((e,t)=>{const i=x(t),n=bi(i);e(C?Ai(n,C.label):Li(n))}),[C,x]);return(0,W.jsx)(Bi,{onChange:f,itemToString:hi,initialIsOpen:e,selectedItem:C,itemCount:S.length,inputValue:d,defaultHighlightedIndex:w,children:({getInputProps:e,getMenuProps:i,getItemProps:n,isOpen:u,openMenu:c,closeMenu:m,highlightedIndex:f,setHighlightedIndex:h,selectItem:v})=>{const x=""!==g.trim()&&f>S.length-1?0:f,I={items:E,selectedItem:C,highlightedIndex:x,getItemProps:n,getMenuProps:i,className:"gd-dynamic-select-menu",optionClassName:o,inputValue:d,setHighlightedIndex:h,visibleItemsRange:a};return(0,W.jsxs)("div",{className:re("gd-dynamic-select",r),style:l,role:void 0,"aria-expanded":void 0,"aria-haspopup":void 0,"aria-labelledby":void 0,onKeyDown:e=>{u&&"Tab"!==e.key&&e.stopPropagation(),u&&"Tab"===e.key&&m()},children:[(0,W.jsx)("div",{className:"gd-dynamic-select-input-wrapper",children:(0,W.jsx)("input",{type:"text",className:"s-relative-range-input gd-input-field","aria-describedby":s?.descriptionId,"aria-activedescendant":void 0,...e({role:"combobox","aria-expanded":u,"aria-haspopup":"listbox","aria-autocomplete":"list","aria-labelledby":s?.labelId,placeholder:t,value:d,onFocus:()=>{""!==g.trim()&&(p(""),k(h,"")),c()},onChange:y,onBlur:()=>b(C,v)})})}),u&&E.length>0?(0,W.jsx)(Ri,{...I}):null]})}})}var Vi;function Hi(e){return(0,W.jsxs)("div",{className:re(e.className,"gd-relative-range-picker-select-wrapper s-relative-range-picker-select-wrapper"),children:[(0,W.jsx)("label",{className:"gd-label",id:e.labelId,children:e.label}),e.children,e.errorMessage?(0,W.jsx)("div",{id:e.errorId,className:"s-gd-relative-range-picker-error gd-relative-range-picker-select-wrapper__error-message",children:e.errorMessage}):null]})}!function(e){e.INVALID_VALUE="INVALID_VALUE",e.EMPTY_VALUE="EMPTY_VALUE"}(Vi||(Vi={}));const Zi=(e,t)=>{const i=void 0===e?null:Di(t,e);return i?hi(i):e?e.toString():""},qi=(0,G.memo)((function(e){const{label:t,value:i,inputValue:n,error:r,onChange:l,onInputChange:o,onBlur:a,commonProps:s,intl:d,isMobile:u,className:c,wrapperClassName:m}=e,g=(0,z.useIdPrefixed)("label");return(0,W.jsx)(Hi,{label:t,labelId:g,errorMessage:r?.message,errorId:r?.id??"",className:m,children:(0,W.jsx)(_i,{...s,value:i,onChange:l,inputValue:n,onInputValueChange:o,onBlur:a,placeholder:d.formatMessage({id:"filters.relative.placeholder"}),className:re(c,"gd-relative-range-picker-picker",{"gd-relative-range-picker-picker-mobile":u,"has-error":null!==r}),accessibilityConfig:{labelId:g,...r&&{descriptionId:r.id}}})})}));function Wi({selectedFilterOption:e,isMobile:t,accessibilityConfig:i,id:n,onSelectedFilterOptionChange:r}){const l=(0,le.Z)(),o=(0,D.useValidationContextValue)((0,D.createInvalidNode)({id:"RelativeRangePicker",children:{from:(0,D.createInvalidNode)({id:"from"}),to:(0,D.createInvalidNode)({id:"to"})}})),{setInvalidDatapoints:a,getInvalidDatapoints:s}=o,d=s({path:["from"]})[0]??null,u=s({path:["to"]})[0]??null,c=(0,G.useCallback)(((e,t)=>{a((()=>[!!t&&(0,D.createInvalidDatapoint)({message:t})]),[e])}),[a]),m=(0,G.useMemo)((()=>((e,t,i)=>n=>{const r=function(e="",t=yi,i){const n=Ei(e),r=Si(n);switch(r.inputCategory){case"Empty":return((e,t)=>{const i=xi[e],n=Fi((0,fi.Z)(-i,0),e,t),r=Fi((0,fi.Z)(1,i+1),e,t);return[...n,{type:"separator"},Ii(0,e,t),{type:"separator"},...r]})(t,i);case"TooBig":return(e=>[{type:"error",label:e.formatMessage({id:"filters.floatingRange.tooBig"},{limit:99999})}])(i);case"Textual":return wi(r.trimmedValue,void 0,t,i);case"Numeric":{const{offset:e,isOnlyNumber:l}=r;return l?((e,t,i)=>Fi(e>0?[e,-e]:[e],t,i))(e,t,i):wi(n,e,t,i)}}}(n,e,i);return t?r.filter((e=>"separator"!==e.type)):r})(e.granularity,t,l)),[e.granularity,t,l]),[g,p]=(0,G.useState)(Zi(e.from,void 0===e.from?[]:m(e.from.toString()))),[f,h]=(0,G.useState)(Zi(e.to,void 0===e.to?[]:m(e.to.toString()))),b=(0,G.useMemo)((()=>({visibleItemsRange:t?5:3,optionClassName:"s-relative-date-filter-option s-do-not-close-dropdown-on-click",getItems:m,inputValue:"",onInputValueChange:()=>{}})),[t,m]),y=(0,G.useCallback)((t=>{r({...e,from:t}),void 0!==t&&(p(Zi(t,m(t?.toString()))),c("from",null))}),[r,e,m,c]),v=(0,G.useCallback)((t=>{r({...e,to:t}),void 0!==t&&(h(Zi(t,m(t?.toString()))),c("to",null))}),[r,e,m,c]),C=(0,G.useCallback)((e=>{if(""===e)return Vi.EMPTY_VALUE;const t=m(e);return ki(t,e)?null:Vi.INVALID_VALUE}),[m]),x=(0,G.useCallback)((e=>{if(p(e),C(e))y(void 0);else{c("from",null);const t=m(e),i=ki(t,e);i&&y(i.value)}}),[C,y,c,m]),E=(0,G.useCallback)((e=>{if(h(e),C(e))v(void 0);else{c("to",null);const t=m(e),i=ki(t,e);i&&v(i.value)}}),[C,v,c,m]),S=(0,G.useCallback)((()=>{const e=C(g);if(e){switch(e){case Vi.INVALID_VALUE:c("from",l.formatMessage({id:"filters.relative.from.invalid.value"}));break;case Vi.EMPTY_VALUE:c("from",l.formatMessage({id:"filters.relative.from.empty.value"}))}y(void 0)}else c("from",null)}),[C,g,y,c,l]),I=(0,G.useCallback)((()=>{const e=C(f);if(e){switch(e){case Vi.INVALID_VALUE:c("to",l.formatMessage({id:"filters.relative.to.invalid.value"}));break;case Vi.EMPTY_VALUE:c("to",l.formatMessage({id:"filters.relative.to.empty.value"}))}v(void 0)}else c("to",null)}),[C,f,v,c,l]);return(0,W.jsxs)("div",{id:n,className:"gd-relative-range-picker s-relative-range-picker",role:i?.role,"aria-labelledby":i?.ariaLabelledBy,children:[(0,W.jsx)(qi,{className:"s-relative-range-picker-from",wrapperClassName:"s-relative-range-picker-from-wrapper",label:l.formatMessage({id:"filters.relative.from.label"}),value:e.from,inputValue:g,error:d,onChange:y,onInputChange:x,onBlur:S,commonProps:b,intl:l,isMobile:t}),(0,W.jsx)(qi,{className:"s-relative-range-picker-to",wrapperClassName:"s-relative-range-picker-to-wrapper",label:l.formatMessage({id:"filters.relative.to.label"}),value:e.to,inputValue:f,error:u,onChange:v,onInputChange:E,onBlur:I,commonProps:b,intl:l,isMobile:t})]})}const Gi=(0,G.forwardRef)((({relativeDateFilterId:e,selectedFilterOption:t,availableGranularities:i,onSelectedFilterOptionChange:n,isMobile:r,onKeyDown:l},o)=>(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("div",{ref:o,children:(0,W.jsx)(Rt,{availableGranularities:i,selectedGranularity:t.granularity,onSelectedGranularityChange:e=>n({...t,...t.granularity!==e&&{from:void 0,to:void 0},granularity:e}),accessibilityConfig:{ariaControls:e}})}),(0,W.jsx)("div",{onKeyDown:l,children:(0,W.jsx)(Wi,{selectedFilterOption:t,onSelectedFilterOptionChange:n,isMobile:r,accessibilityConfig:{ariaLabelledBy:X,role:"tabpanel"},id:e},t.granularity)})]})));Gi.displayName="RelativeDateFilterForm";const Ki="gd-date-filter-item-mobile";function Ui({filterOptions:e,selectedFilterOption:t,isMobile:i,route:n,availableGranularities:r,errors:l,withoutApply:o,onSelectedFilterOptionChange:a,changeRoute:s,closeDropdown:d,onApplyClick:u}){const c=(0,G.useRef)(null),m=(0,G.useRef)(null),p=(0,z.useId)(),f=(0,G.useCallback)(((e,t)=>{ie({relativeDateFilterRef:c,tabGranularityRef:m,closeDropdown:t})(e)}),[c,m]);if(!e.relativeForm)return null;const b=e.relativeForm.localIdentifier===t.localIdentifier,y="relativeForm"===n;return(0,W.jsxs)(W.Fragment,{children:[i&&y?null:(0,W.jsx)(me,{isSelected:b,onClick:()=>{s("relativeForm"),(0,g.isRelativeDateFilterForm)(t)||a(e.relativeForm)},className:re("s-relative-form","s-do-not-close-dropdown-on-click",i&&Ki),children:e.relativeForm.name?e.relativeForm.name:(0,W.jsx)(Ce,{id:"filters.floatingRange"})}),!b||i&&!y?null:(0,W.jsx)(kt,{isMobile:i,children:(0,W.jsx)("div",{ref:c,onKeyDown:e=>f(e,d),children:(0,W.jsx)(Gi,{onSelectedFilterOptionChange:a,selectedFilterOption:t,availableGranularities:r,isMobile:i,ref:m,relativeDateFilterId:p,onKeyDown:e=>ne(e,(0,h.Z)(l),o,d,u)})})})]})}const zi="gd-date-filter-item-mobile";function $i({filterOptions:e,selectedFilterOption:t,isMobile:i,route:n,errors:r,dateFormat:l,isTimeForAbsoluteRangeEnabled:o,weekStart:a,availableGranularities:s,withoutApply:d,closeDropdown:u,changeRoute:c,onApplyClick:m,onSelectedFilterOptionChange:g}){return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(Pt,{filterOptions:e,selectedFilterOption:t,onSelectedFilterOptionChange:g,isMobile:i}),(0,W.jsx)(Dt,{filterOptions:e,route:n,closeDropdown:u,onApplyClick:m,changeRoute:c,dateFormat:l,onSelectedFilterOptionChange:g,selectedFilterOption:t,isMobile:i,isTimeForAbsoluteRangeEnabled:o,weekStart:a,withoutApply:d}),(0,h.Z)(s)?null:(0,W.jsx)(Ui,{filterOptions:e,onSelectedFilterOptionChange:g,selectedFilterOption:t,availableGranularities:s,isMobile:i,changeRoute:c,route:n,errors:r||void 0,onApplyClick:m,closeDropdown:u,withoutApply:d}),e.absolutePreset&&e.absolutePreset.length>0?(0,W.jsx)(ge,{dateFormat:l,filterOptions:e.absolutePreset,selectedFilterOption:t,onSelectedFilterOptionChange:g,className:i?zi:void 0}):null,e.relativePreset?(0,W.jsx)(Ie,{dateFormat:l,filterOption:e.relativePreset,selectedFilterOption:t,onSelectedFilterOptionChange:g,className:i?zi:void 0}):null]})}const Yi="gd-date-filter-item-mobile";function Qi({filterOptions:e,selectedFilterOption:t,isMobile:i,dateFormat:n,onSelectedFilterOptionChange:r}){return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(Pt,{filterOptions:e,selectedFilterOption:t,onSelectedFilterOptionChange:r,isMobile:i,isFocusFallback:t.localIdentifier===e.absoluteForm?.localIdentifier||t.localIdentifier===e.relativeForm?.localIdentifier}),e.absolutePreset&&e.absolutePreset.length>0?(0,W.jsx)(ge,{dateFormat:n,filterOptions:e.absolutePreset,selectedFilterOption:t,onSelectedFilterOptionChange:r,className:i?Yi:void 0}):null,e.relativePreset?(0,W.jsx)(Ie,{dateFormat:n,filterOption:e.relativePreset,selectedFilterOption:t,onSelectedFilterOptionChange:r,className:i?Yi:void 0}):null]})}function Xi({onBack:e,title:t,ariaLabel:i,...n}){const r=(0,z.useUiAutofocusConnectors)();return(0,W.jsxs)("button",{tabIndex:0,className:"gd-extended-date-filter-header s-do-not-close-dropdown-on-click",onClick:t=>{t.preventDefault(),e()},"aria-label":i,...n,...r,children:[(0,W.jsx)("span",{className:"gd-icon-navigateleft"})," ",t]})}function Ji({filterOptions:e,selectedFilterOption:t,isMobile:i,route:n,errors:r,dateFormat:l,isTimeForAbsoluteRangeEnabled:o,weekStart:a,availableGranularities:s,withoutApply:d,closeDropdown:u,onBack:c,onApplyClick:m,onSelectedFilterOptionChange:g,isRedesigned:p=!1}){const f=(0,le.Z)();if(!p&&"absoluteForm"===n){const r=f.formatMessage({id:"filters.staticPeriod"});return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(Xi,{onBack:()=>c(null),title:r}),(0,W.jsx)(Dt,{filterOptions:e,route:n,closeDropdown:u,onApplyClick:m,changeRoute:c,dateFormat:l,onSelectedFilterOptionChange:g,selectedFilterOption:t,isMobile:i,isTimeForAbsoluteRangeEnabled:o,weekStart:a,withoutApply:d})]})}if(!p&&"relativeForm"===n){const l=f.formatMessage({id:"filters.floatingRange"});return(0,h.Z)(s)?null:(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(Xi,{onBack:()=>c(null),title:l}),(0,W.jsx)(Ui,{filterOptions:e,errors:r||void 0,onSelectedFilterOptionChange:g,selectedFilterOption:t,availableGranularities:s,isMobile:i,changeRoute:c,route:n,onApplyClick:m,closeDropdown:u,withoutApply:d})]})}return p?(0,W.jsx)(Qi,{filterOptions:e,selectedFilterOption:t,onSelectedFilterOptionChange:g,isMobile:i,dateFormat:l}):(0,W.jsx)($i,{filterOptions:e,selectedFilterOption:t,onSelectedFilterOptionChange:g,isMobile:i,route:n,closeDropdown:u,onApplyClick:m,changeRoute:c,dateFormat:l,errors:r||void 0,isTimeForAbsoluteRangeEnabled:o,weekStart:a,availableGranularities:s})}const en=[{align:"bc tc",offset:{x:-1,y:5}}];function tn({onConfiguration:e}){return(0,W.jsx)("div",{className:"gd-date-filter-configuration-button s-gd-date-filter-configuration-button",children:(0,W.jsxs)(z.BubbleHoverTrigger,{children:[(0,W.jsx)(z.Button,{className:"gd-button-link gd-button-icon-only gd-icon-settings gd-button-small gd-configuration-button s-configuration-button",disabled:!1,onClick:e}),(0,W.jsx)(z.Bubble,{className:"bubble-primary",alignPoints:en,children:(0,W.jsx)(Ce,{id:"dateFilterDropdown.configuration"})})]})})}function nn(){return(0,W.jsxs)("div",{className:"s-extended-date-filter-edit-mode-message gd-extended-date-filter-edit-mode-message",children:[(0,W.jsx)("div",{className:"gd-extended-date-filter-edit-mode-message-text",children:(0,W.jsx)(Ce,{id:"dateFilterDropdown.setDefault",values:{nbsp:(0,W.jsx)(W.Fragment,{children:" "})}})}),(0,W.jsx)("hr",{className:"gd-separator-generic"})]})}function rn({disabled:e,granularity:t}){const i=m[t],n=e||void 0===t||void 0===i?j.allTimeExcluded.id:j[`${i}Excluded`].id;return(0,W.jsx)(Ce,{id:n,children:(...e)=>(0,W.jsx)("span",{className:"input-label-text",children:e})})}const ln=[{align:"tc bc"}];function on({value:e,onChange:t,disabled:i,granularity:n}){return(0,W.jsx)("div",{className:"gd-extended-date-filter-exclude-current",children:(0,W.jsxs)(z.BubbleHoverTrigger,{children:[(0,W.jsxs)("label",{className:re("s-exclude-current-period","input-checkbox-label",{"s-exclude-current-perod-enabled":!i,"s-exclude-current-perod-disabled":i}),children:[(0,W.jsx)("input",{type:"checkbox",className:"input-checkbox",checked:e,onChange:e=>t(e.target.checked),disabled:i,onKeyDown:n=>{i||(0,z.isSpaceKey)(n)&&(n.preventDefault(),t(!e))}})," ",(0,W.jsx)(rn,{granularity:n,disabled:i})]}),i?(0,W.jsx)(z.Bubble,{alignPoints:ln,children:(0,W.jsx)(Ce,{id:"filters.excludeCurrentPeriod.unavailable"})}):null]})})}function an({className:e,children:t,...i}){return(0,W.jsx)("div",{className:re("gd-visible-scrollbar",e),...i,children:t})}const sn=(0,G.forwardRef)(((e,t)=>{const[i,n]=(0,G.useState)(null),r=(0,le.Z)(),l=(e=null)=>{n(e)};(0,G.useEffect)((()=>{e.isMobile&&((0,g.isAbsoluteDateFilterForm)(e.selectedFilterOption)?l("absoluteForm"):(0,g.isRelativeDateFilterForm)(e.selectedFilterOption)&&l("relativeForm"))}),[e.isMobile,e.selectedFilterOption]);const{isExcludeCurrentPeriodEnabled:o,isMobile:a,dateFilterButton:s,errors:d,isConfigurationEnabled:u,withoutApply:c,selectedFilterOption:m,isEditMode:p,excludeCurrentPeriod:f,filterOptions:b,showHeaderMessage:y=!0,dateFormat:v,isTimeForAbsoluteRangeEnabled:C,weekStart:E,availableGranularities:S,onApplyClick:I,onCancelClick:F,closeDropdown:w,onConfigurationClick:k,onExcludeCurrentPeriodChange:A,onSelectedFilterOptionChange:D}=e,j=!a||o,O=(e=>{if(window.innerHeight<=414){const t=e?30:0;return window.innerHeight-t-53-8}})(j),P=window.innerHeight<=640?"gd-extended-date-filter-body-scrollable-small-screen":"gd-extended-date-filter-body-scrollable";let N={},T={};return O&&(N={display:"block",height:`${O}px`},T={minHeight:`${O}px`}),(0,W.jsxs)("div",{className:re("gd-extended-date-filter-body","s-extended-date-filters-body",a&&"gd-extended-date-filter-body-mobile"),children:[null===i&&a?(0,W.jsx)("div",{onClick:()=>{F(),w()},children:s}):null,(0,W.jsxs)("div",{ref:t,role:"listbox","aria-label":r.formatMessage({id:"dateFilterDropdown.label"}),className:re("gd-extended-date-filter-body-wrapper",{"gd-extended-date-filter-body-wrapper-wide":(0,g.isRelativeDateFilterForm)(m)}),style:N,children:[p&&!a&&y?(0,W.jsx)(nn,{}):null,a?(0,W.jsx)(Ji,{filterOptions:b,selectedFilterOption:m,onSelectedFilterOptionChange:D,isMobile:a,route:i,closeDropdown:w,onApplyClick:I,onBack:l,dateFormat:v,errors:d||void 0,isTimeForAbsoluteRangeEnabled:C,weekStart:E,availableGranularities:S,withoutApply:c}):(0,W.jsx)(an,{className:P,style:T,children:(0,W.jsx)($i,{filterOptions:b,selectedFilterOption:m,onSelectedFilterOptionChange:D,isMobile:a,route:i,closeDropdown:w,onApplyClick:I,changeRoute:l,dateFormat:v,errors:d||void 0,isTimeForAbsoluteRangeEnabled:C,weekStart:E,availableGranularities:S,withoutApply:c})})]}),j?(0,W.jsx)(on,{value:f,onChange:A,disabled:!o,granularity:x(m)}):null,(0,W.jsxs)("div",{className:re("gd-extended-date-filter-actions"),children:[(0,W.jsx)("div",{className:"gd-extended-date-filter-actions-left-content",children:u?(0,W.jsx)(tn,{onConfiguration:k}):null}),(0,W.jsxs)("div",{className:"gd-extended-date-filter-actions-buttons",children:[(0,W.jsx)(oe,{messageId:c?"close":"cancel",className:re("gd-button-secondary gd-button-small",c?"s-date-filter-close":"s-date-filter-cancel"),onClick:()=>{F(),w()}}),!c&&(0,W.jsx)(oe,{messageId:"apply",className:"gd-button-action gd-button-small s-date-filter-apply",disabled:!(0,h.Z)(d),onClick:()=>{I(),w()},describedByFromValidation:!0})]})]})]})}));function dn({filterOptions:e,selectedFilterOption:t,availableGranularities:i,onStaticButtonClick:n,onRelativeButtonClick:r,absoluteButtonRef:l,relativeButtonRef:o,absoluteFormId:a,relativeFormId:s}){const d=(0,G.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),n()}),[n]),u=(0,G.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),r()}),[r]);return(0,W.jsx)("div",{className:"gd-date-filter-form-buttons",children:(0,W.jsxs)("div",{role:"group",className:"gd-date-filter-form-buttons-container",children:[e.absoluteForm?(0,W.jsx)(z.Button,{id:Q,ref:l,className:re("gd-date-filter-form-button","gd-list-item","gd-menu-item","is-submenu","s-absolute-form-button",{"is-selected":t.localIdentifier===e.absoluteForm.localIdentifier}),onClick:d,value:e.absoluteForm.name?e.absoluteForm.name:(0,W.jsx)(Ce,{id:"filters.staticPeriod"}),accessibilityConfig:{popupType:"dialog",popupId:a,ariaExpanded:!1,ariaCurrent:t.localIdentifier===e.absoluteForm.localIdentifier}}):null,e.relativeForm&&i.length>0?(0,W.jsx)(z.Button,{id:Y,ref:o,className:re("gd-date-filter-form-button","gd-list-item","gd-menu-item","is-submenu","s-relative-form-button",{"is-selected":t.localIdentifier===e.relativeForm.localIdentifier}),onClick:u,value:e.relativeForm.name?e.relativeForm.name:(0,W.jsx)(Ce,{id:"filters.floatingRange"}),accessibilityConfig:{popupType:"dialog",popupId:s,ariaExpanded:!1,ariaCurrent:t.localIdentifier===e.relativeForm.localIdentifier}}):null]})})}function un({title:e,onBack:t,children:i,className:n,backLabel:r,isMobile:l}){const o=(0,le.Z)();return(0,W.jsxs)("div",{className:re("gd-date-filter-form-navigation",n),children:[l?(0,W.jsx)(Xi,{onBack:t,title:e,ariaLabel:r}):(0,W.jsx)(z.UiSubmenuHeader,{title:e,onBack:()=>t(),backAriaLabel:r??o.formatMessage({id:"menu.back"}),useShortenedTitle:!1}),(0,W.jsx)(z.UiFocusManager,{enableAutofocus:!0,children:(0,W.jsx)("div",{className:"gd-date-filter-form-navigation-content",children:i})})]})}function cn({filterOptions:e,selectedFilterOption:t,onSelectedFilterOptionChange:i,dateFormat:n,weekStart:r,isTimeForAbsoluteRangeEnabled:l,availableGranularities:o,isMobile:a,withoutApply:s,activeForm:d,onBackNavigation:u,onClose:c,submitForm:m,errors:g}){const p="absoluteForm"===d&&e.absoluteForm,f="relativeForm"===d&&e.relativeForm&&o.length>0,b=(0,le.Z)(),y=(0,G.useRef)(null),v=(0,G.useRef)(null),C=(0,z.useId)(),x=(0,G.useCallback)(((e,t)=>{ie({relativeDateFilterRef:y,tabGranularityRef:v,closeDropdown:t})(e)}),[y,v]);return(0,W.jsxs)("div",{className:"gd-date-filter-form-content",children:[p?(0,W.jsx)(un,{title:e.absoluteForm.name?e.absoluteForm.name:b.formatMessage({id:"filters.staticPeriod"}),onBack:u,backLabel:b.formatMessage({id:"menu.back"}),isMobile:a,children:(0,W.jsx)(kt,{isMobile:a,children:(0,W.jsx)(wt,{dateFormat:n,onSelectedFilterOptionChange:i,selectedFilterOption:t,isMobile:a,isTimeEnabled:l,weekStart:r,submitForm:m,withoutApply:s})})}):null,f?(0,W.jsx)(un,{title:e.relativeForm.name?e.relativeForm.name:b.formatMessage({id:"filters.floatingRange"}),onBack:u,backLabel:b.formatMessage({id:"menu.back"}),isMobile:a,children:(0,W.jsx)("div",{ref:y,onKeyDown:e=>x(e,c),children:(0,W.jsx)(kt,{isMobile:a,children:(0,W.jsx)(Gi,{onSelectedFilterOptionChange:i,selectedFilterOption:t,availableGranularities:o,isMobile:a,ref:v,relativeDateFilterId:C,onKeyDown:e=>ne(e,(0,h.Z)(g),s,c,m)})})})}):null]})}sn.displayName="DateFilterBody";const mn=(0,G.forwardRef)(((e,t)=>{const[i,n]=(0,G.useState)(null),r=(0,G.useRef)(null),l=(0,G.useRef)(null),o=(0,le.Z)(),a=(e=null)=>{n(e)},s=()=>{const e=i;n(null),setTimeout((()=>{"absoluteForm"===e&&r.current?r.current.focus():"relativeForm"===e&&l.current&&l.current.focus()}),0)};(0,G.useEffect)((()=>{e.isMobile&&((0,g.isAbsoluteDateFilterForm)(e.selectedFilterOption)?a("absoluteForm"):(0,g.isRelativeDateFilterForm)(e.selectedFilterOption)&&a("relativeForm"))}),[e.isMobile,e.selectedFilterOption]);const{isExcludeCurrentPeriodEnabled:d,isMobile:u,dateFilterButton:c,errors:m,isConfigurationEnabled:p,withoutApply:f,selectedFilterOption:b,isEditMode:y,excludeCurrentPeriod:v,filterOptions:C,showHeaderMessage:E=!0,dateFormat:S,isTimeForAbsoluteRangeEnabled:I,weekStart:F,availableGranularities:w,onApplyClick:k,onCancelClick:A,closeDropdown:D,onConfigurationClick:j,onExcludeCurrentPeriodChange:O,onSelectedFilterOptionChange:P,ariaLabel:N,id:T}=e,M=!u||d,L=(e=>{if(window.innerHeight<=414){const t=e?30:0;return window.innerHeight-t-53-8}})(M),R=window.innerHeight<=640?"gd-extended-date-filter-body-scrollable-small-screen":"gd-extended-date-filter-body-scrollable";let B={},_={};L&&(B={display:"block",height:`${L}px`},_={minHeight:`${L}px`});const V=!!(C.absoluteForm||C.relativeForm&&w.length>0),H=(0,z.useIdPrefixed)(),Z="absoluteForm"+H,q="relativeForm"+H,K=i?"absoluteForm"===i?Z:q:T,U=i?"absoluteForm"===i?o.formatMessage({id:"filters.staticPeriod"}):o.formatMessage({id:"filters.floatingRange"}):N;return(0,W.jsxs)("div",{className:re(!u&&"gd-extended-date-filter-body-redesigned","gd-extended-date-filter-body","s-extended-date-filters-body",u&&"gd-extended-date-filter-body-mobile",i&&"gd-active-form"),onKeyDown:e=>{"ArrowLeft"===e.key&&i&&(e.preventDefault(),e.stopPropagation(),s())},role:"dialog",id:K,"aria-label":U,children:[null===i&&u?(0,W.jsx)("div",{onClick:()=>{A(),D()},children:c}):null,i?(0,W.jsx)("div",{className:"gd-extended-date-filter-form-wrapper",ref:t,children:(0,W.jsx)(cn,{filterOptions:C,selectedFilterOption:b,onSelectedFilterOptionChange:P,dateFormat:S,weekStart:F,isTimeForAbsoluteRangeEnabled:I,availableGranularities:w,isMobile:u,withoutApply:f,activeForm:i,onBackNavigation:s,onClose:D,submitForm:()=>{k(),f||D()},errors:m||void 0})}):null,i?null:(0,W.jsxs)("div",{ref:t,role:"listbox","aria-label":o.formatMessage({id:"dateFilterDropdown.label"}),className:re("gd-extended-date-filter-body-wrapper",{"gd-extended-date-filter-body-wrapper-wide":(0,g.isRelativeDateFilterForm)(b)}),style:B,children:[y&&!u&&E?(0,W.jsx)(nn,{}):null,u?(0,W.jsx)(Ji,{filterOptions:C,selectedFilterOption:b,onSelectedFilterOptionChange:P,isMobile:u,route:i,closeDropdown:D,onApplyClick:k,onBack:s,dateFormat:S,errors:m||void 0,isTimeForAbsoluteRangeEnabled:I,weekStart:F,availableGranularities:w,withoutApply:f,isRedesigned:!0}):(0,W.jsx)(an,{className:R,style:_,children:(0,W.jsx)(Qi,{filterOptions:C,selectedFilterOption:b,onSelectedFilterOptionChange:P,isMobile:u,dateFormat:S})})]}),M&&!i?(0,W.jsx)(on,{value:v,onChange:O,disabled:!d,granularity:x(b)}):null,V&&!i?(0,W.jsx)(dn,{filterOptions:C,selectedFilterOption:b,availableGranularities:w,onStaticButtonClick:()=>{const e="absoluteForm"===i?null:"absoluteForm";n(e),"absoluteForm"===e&&C.absoluteForm&&b.localIdentifier!==C.absoluteForm.localIdentifier&&P(C.absoluteForm)},onRelativeButtonClick:()=>{const e="relativeForm"===i?null:"relativeForm";n(e),"relativeForm"===e&&C.relativeForm&&b.localIdentifier!==C.relativeForm.localIdentifier&&P(C.relativeForm)},absoluteButtonRef:r,relativeButtonRef:l,absoluteFormId:Z,relativeFormId:q}):null,(0,W.jsxs)("div",{role:"group",className:re("gd-extended-date-filter-actions"),children:[(0,W.jsx)("div",{className:"gd-extended-date-filter-actions-left-content",children:p?(0,W.jsx)(tn,{onConfiguration:j}):null}),(0,W.jsxs)("div",{className:"gd-extended-date-filter-actions-buttons",children:[(0,W.jsx)(oe,{messageId:f?"close":"cancel",className:re("gd-button-secondary gd-button-small",f?"s-date-filter-close":"s-date-filter-cancel"),onClick:()=>{A(),D()}}),!f&&(0,W.jsx)(oe,{messageId:"apply",className:"gd-button-action gd-button-small s-date-filter-apply",disabled:!(0,h.Z)(m),onClick:()=>{k(),D()},describedByFromValidation:!0})]})]})]})}));mn.displayName="DateFilterBodyRedesigned";var gn=i(39989);const pn=[{align:"bc tl",offset:{x:0,y:5}}];function fn({customIcon:e,disabled:t}){if(!e)return null;const{icon:i,tooltip:n,bubbleClassNames:r,bubbleAlignPoints:l}=e,o=re(["gd-filter-button-custom-icon-wrapper","s-gd-filter-button-custom-icon-wrapper"],{"disabled s-disabled":t});return(0,W.jsx)("div",{className:o,children:(0,W.jsxs)(z.BubbleHoverTrigger,{children:[(0,W.jsx)("i",{className:`gd-filter-button-custom-icon s-gd-filter-button-custom-icon ${i}`}),(0,W.jsx)(z.Bubble,{className:`bubble-primary ${r||""}`,alignPoints:l||pn,children:n})]})})}function hn({isOpen:e,isMobile:t,title:i,children:n,disabled:r,customIcon:l,customFilterName:o,buttonRef:a,dropdownId:s}){const d=(0,G.useCallback)((e=>{(0,z.isActionKey)(e)&&r&&(e.preventDefault(),e.stopPropagation())}),[r]);return(0,W.jsxs)("div",{ref:a,className:re("s-date-filter-button","gd-date-filter-button",`s-date-filter-button-${gn.gl(o)}`,"dropdown-button",t&&"gd-date-filter-button-mobile",e&&"is-active",r&&"disabled"),role:"button","aria-haspopup":"dialog","aria-expanded":e,"aria-controls":e?s:void 0,tabIndex:0,onKeyDown:d,children:[(0,W.jsxs)("div",{className:"button-content",children:[(0,W.jsx)("div",{className:"s-date-filter-title button-title",children:i}),(0,W.jsx)("div",{className:"button-subtitle",children:n})]}),(0,W.jsx)(fn,{customIcon:l,disabled:r})]})}const bn=[{align:"tc bc",offset:{x:0,y:-2}},{align:"cc tc",offset:{x:0,y:10}},{align:"bl tr",offset:{x:-2,y:-8}}];function yn({dateFilterOption:e,dateFormat:t,isOpen:i=!1,isMobile:n=!0,customFilterName:r,disabled:l,customIcon:o,buttonRef:a,dropdownId:s,onClick:d,ButtonComponent:u}){const c=(0,le.Z)().formatMessage({id:"dateFilterDropdown.title"}),m=r??c,g=r?(0,W.jsx)(z.ShortenedText,{tooltipAlignPoints:bn,children:r}):(0,W.jsx)(W.Fragment,{children:m}),p=ue({filter:e,dateFormat:t}),f=u??hn;return(0,W.jsx)(f,{title:g,isOpen:i,isMobile:n,disabled:l,customIcon:o,customFilterName:r,onClick:d,textTitle:m,textSubtitle:p,buttonRef:a,dropdownId:s,children:(0,W.jsx)("span",{className:"s-button-text",children:(0,W.jsx)(de,{filter:e,dateFormat:t})})})}const vn=(e,t=!1)=>t?e+a:e;function Cn({originalSelectedFilterOption:e,originalExcludeCurrentPeriod:t,selectedFilterOption:i,excludeCurrentPeriod:n,onDropdownOpenChanged:r,customFilterName:l,dateFormat:o,disabled:a,openOnInit:s,locale:d,filterOptions:c,isTimeForAbsoluteRangeEnabled:m,weekStart:g,customIcon:f,FilterConfigurationComponent:b,onApplyClick:y,onCancelClick:v,showDropDownHeaderMessage:C,withoutApply:x,ButtonComponent:E,overlayPositionType:S,improveAccessibility:A=!1,...j}){const[O,P]=(0,G.useState)(!1),N=(e=>{try{return(0,k.WU)(new Date,e),e}catch{return console.warn(`Unsupported date format ${e}, the default format ${u} is used instead.`),u}})(o),T=(0,G.useRef)(null),M=(0,G.useRef)(null),L=(0,D.useValidationContextValue)((0,D.createInvalidNode)({id:"DateFilter"})),R=(0,G.useMemo)((()=>function(e){const t=e.absolutePreset?.map(w),i=e.relativePreset&&function(e){return Object.keys(e).reduce(((t,i)=>{const n=e[i];return t[i]=n.map(w),t}),{})}(e.relativePreset);return I({...e,absolutePreset:t,relativePreset:i})}(F(c))),[c]),B=()=>{P(!1)},_=()=>{P(!0)},V=()=>{B(),v()},H=e=>{r(e),e||B()},Z=xn(i,(0,h.Z)(j.errors)),q=xn(n,(0,h.Z)(j.errors)),K=(0,G.useCallback)(((e,t=(()=>{}))=>{(({dateFilterContainerRef:e,dateFilterBodyRef:t,closeDropdown:i})=>n=>{if(!t.current||!e.current)return;const r=Array.from(t.current.querySelectorAll("[tabindex]")),l=document.activeElement,o=(0,z.makeLinearKeyboardNavigation)({onFocusPrevious:()=>{if(ee(t,l,J.OPTION)){const e=Array.from(r).indexOf(document.activeElement),t=te(r,e,-1);t?.focus()}},onFocusNext:()=>{if(ee(t,l,J.OPTION)){const e=Array.from(r).indexOf(document.activeElement),t=te(r,e,1);t?.focus()}},onFocusFirst:()=>{if(ee(t,l,J.OPTION)){const{firstElement:e}=(0,z.getFocusableElements)(t.current);e?.focus()}},onFocusLast:()=>{if(ee(t,l,J.OPTION)){const{lastElement:e}=(0,z.getFocusableElements)(t.current);e?.focus()}},onClose:i,onUnhandledKeyDown:t=>{"Tab"===t.key&&((e,t)=>{if("Tab"!==e.key)return;e.stopPropagation(),e.preventDefault();const i=['[tabindex]:not([tabindex="-1"]):not(:disabled)',"input:not(:disabled)",'button:not([tabindex="-1"]):not(:disabled)'].join(","),n=Array.from(t.current?.querySelectorAll(i)??[]),r=document.activeElement,l=n.indexOf(r);if(-1===l){const t=e.shiftKey?n.length-1:1;n[t]?.focus()}else{const t=(l+(e.shiftKey?-1:1)+n.length)%n.length;n[t]?.focus()}})(t,e)}});o(n)})({dateFilterContainerRef:T,dateFilterBodyRef:M,closeDropdown:t})(e)}),[T,M]),X=A?mn:sn,ie=((e,t,i)=>i?e.localIdentifier===t.relativeForm?.localIdentifier?Y:e.localIdentifier===t.absoluteForm?.localIdentifier?Q:$:$)(i,c,A);return(0,W.jsx)(D.IntlWrapper,{locale:d||"en-US",children:(0,W.jsx)(D.ValidationContextStore,{value:L,children:(0,W.jsx)(U.zP,{query:ce,children:r=>{const o=(i=!1,n=null,o="",s=(()=>{}))=>(0,W.jsx)(yn,{disabled:a,isMobile:r,isOpen:i,dateFilterOption:p(x?Z:e,x?q:t),dateFormat:vn(N,m),customFilterName:l,customIcon:f,onClick:s,ButtonComponent:E,buttonRef:n,dropdownId:o});return(0,W.jsx)(z.Dropdown,{openOnInit:s,closeOnParentScroll:!0,closeOnMouseDrag:!0,closeOnOutsideClick:!0,enableEventPropagation:!0,autofocusOnOpen:!0,initialFocus:ie,alignPoints:[{align:"bl tl"},{align:"tr tl"},{align:"br tr",offset:{x:-11}},{align:"tr tl",offset:{x:0,y:-100}},{align:"tr tl",offset:{x:0,y:-50}}],onOpenStateChanged:H,overlayPositionType:S,renderButton:({isOpen:e,buttonRef:t,dropdownId:i,toggleDropdown:n})=>(0,W.jsx)("span",{onClick:a?()=>{}:n,children:o(e,t,i,n)}),ignoreClicksOnByClass:[".s-do-not-close-dropdown-on-click",".rdp-day"],renderBody:({closeDropdown:e,ariaAttributes:t})=>O?(0,W.jsx)(b,{onSaveButtonClick:B,onCancelButtonClick:V}):(0,W.jsx)("div",{...!A&&{role:"dialog"},className:"gd-extended-date-filter-container",...!A&&{id:t.id},ref:T,onKeyDown:t=>K(t,e),...!A&&{ariaLabel:l},children:(0,W.jsx)(X,{...j,...A&&{id:t.id},...A&&{"aria-label":l},selectedFilterOption:i,excludeCurrentPeriod:n,showHeaderMessage:C,onApplyClick:y,onCancelClick:v,filterOptions:R,isMobile:r,closeDropdown:e,dateFilterButton:o(),dateFormat:N,isTimeForAbsoluteRangeEnabled:m,weekStart:g,isConfigurationEnabled:void 0!==b,onConfigurationClick:_,withoutApply:x,ref:M})})})}})})})}function xn(e,t){const i=(0,G.useRef)(void 0);return t&&(i.current=e),i.current}function En(e){return b(e)&&e.from>e.to?{...e,from:e.to,to:e.from}:e}class Sn extends G.PureComponent{static defaultProps={dateFormat:u,isEditMode:!1,isTimeForAbsoluteRangeEnabled:!1,locale:"en-US",onCancel:()=>{},onOpen:()=>{},onClose:()=>{},weekStart:"Sunday",withoutApply:!1};static getDerivedStateFromProps(e,t){return!e.withoutApply||!e.workingSelectedFilterOption||void 0===e.excludeCurrentPeriod||(0,K.Z)(e.workingSelectedFilterOption,t.initWorkingSelectedFilterOption)&&e.excludeCurrentPeriod===t.initWorkingExcludeCurrentPeriod?(0,K.Z)(e.selectedFilterOption,t.initSelectedFilterOption)&&e.excludeCurrentPeriod===t.initExcludeCurrentPeriod?null:Sn.getStateFromProps(e):Sn.getStateFromWorkingProps(e)}static getStateFromProps(e){const t=f(e.selectedFilterOption);return{initSelectedFilterOption:e.selectedFilterOption,selectedFilterOption:e.selectedFilterOption,initExcludeCurrentPeriod:e.excludeCurrentPeriod,excludeCurrentPeriod:!!t&&e.excludeCurrentPeriod,isExcludeCurrentPeriodEnabled:t,initWorkingSelectedFilterOption:e.workingSelectedFilterOption??e.selectedFilterOption,initWorkingExcludeCurrentPeriod:e.workingExcludeCurrentPeriod??e.excludeCurrentPeriod}}static getStateFromWorkingProps(e){const t=e.workingSelectedFilterOption??e.selectedFilterOption,i=f(t);return{...Sn.getStateFromProps(e),selectedFilterOption:t,excludeCurrentPeriod:!!i&&(e.workingExcludeCurrentPeriod??e.excludeCurrentPeriod),initWorkingExcludeCurrentPeriod:e.workingExcludeCurrentPeriod??e.excludeCurrentPeriod,initWorkingSelectedFilterOption:t,initExcludeCurrentPeriod:e.excludeCurrentPeriod,isExcludeCurrentPeriodEnabled:i}}static getStateFromSelectedOption=(e,t)=>{const i=f(e);return{selectedFilterOption:e,excludeCurrentPeriod:!!i&&t,isExcludeCurrentPeriodEnabled:i}};static checkInitialFilterOption=e=>{!(0,g.isAbsoluteDateFilterForm)(e)||null!==e.from&&void 0!==e.from&&null!==e.to&&void 0!==e.to||console.warn("The default filter option is not valid. Values 'from' and 'to' from absoluteForm filter option must be specified."),!b(e)||null!==e.from&&void 0!==e.from&&null!==e.to&&void 0!==e.to||console.warn("The default filter option is not valid. Values 'from' and 'to' from relativeForm filter option must be specified.")};constructor(e){super(e),this.state=Sn.getStateFromProps(e)}componentDidMount(){Sn.checkInitialFilterOption(this.props.selectedFilterOption)}render(){const{customFilterName:e,dateFilterMode:t,dateFormat:i,filterOptions:n,selectedFilterOption:r,excludeCurrentPeriod:l,availableGranularities:o,isEditMode:a,openOnInit:s,locale:d,isTimeForAbsoluteRangeEnabled:u,weekStart:c,customIcon:m,showDropDownHeaderMessage:g,FilterConfigurationComponent:p,withoutApply:f,ButtonComponent:h,overlayPositionType:b,improveAccessibility:y}=this.props,{excludeCurrentPeriod:v,selectedFilterOption:C,isExcludeCurrentPeriodEnabled:x}=this.state;return"hidden"===t?null:(0,W.jsx)(Cn,{availableGranularities:o,customFilterName:e,dateFormat:i,openOnInit:s,showDropDownHeaderMessage:g,disabled:"readonly"===t,excludeCurrentPeriod:v,originalExcludeCurrentPeriod:l,isExcludeCurrentPeriodEnabled:x,isTimeForAbsoluteRangeEnabled:u,isEditMode:a,filterOptions:n,selectedFilterOption:C,originalSelectedFilterOption:r,locale:d,onApplyClick:this.handleApplyClick,onCancelClick:this.onCancelClicked,onDropdownOpenChanged:this.onDropdownOpenChanged,onExcludeCurrentPeriodChange:this.handleExcludeCurrentPeriodChange,onSelectedFilterOptionChange:this.handleSelectedFilterOptionChange,errors:Z(C),weekStart:c,customIcon:m,FilterConfigurationComponent:p,withoutApply:f,ButtonComponent:h,overlayPositionType:b,improveAccessibility:y})}handleApplyClick=()=>{const e=En(this.state.selectedFilterOption);this.props.onApply(e,this.state.excludeCurrentPeriod)};onChangesDiscarded=()=>{this.props.withoutApply?this.props.withoutApply&&!(0,h.Z)(Z(this.state.selectedFilterOption))&&this.setState((()=>Sn.getStateFromWorkingProps(this.props))):this.setState((()=>Sn.getStateFromProps(this.props)),this.handleSelectChange)};onCancelClicked=()=>{this.props.onCancel(),this.onChangesDiscarded()};onDropdownOpenChanged=e=>{e?this.props.onOpen():(this.props.onClose(),this.onChangesDiscarded())};handleExcludeCurrentPeriodChange=e=>{this.setState({excludeCurrentPeriod:e},this.handleSelectChange)};handleSelectedFilterOptionChange=e=>{this.setState((t=>Sn.getStateFromSelectedOption(e,t.excludeCurrentPeriod)),this.handleSelectChange)};handleSelectChange=()=>{const e=En(this.state.selectedFilterOption);(0,h.Z)(Z(e))&&this.props.onSelect?.(e,this.state.excludeCurrentPeriod)}}var In=function({isActive:e,buttonTitle:t,onClick:i}){const n=re("gd-mvf-dropdown-button","s-mvf-dropdown-button","gd-button","gd-button-secondary","button-dropdown","gd-icon-right",{"gd-icon-navigateup":e,"gd-icon-navigatedown":!e});return(0,W.jsx)("button",{className:n,onClick:i,children:t})},Fn=function({value:e,usePercentage:t,disableAutofocus:i,onValueChange:n,onEnterKeyPress:r,separators:l}){return(0,W.jsx)(z.InputWithNumberFormat,{className:"s-mvf-comparison-value-input",value:e,onEnterKeyPress:r,onChange:n,isSmall:!0,autofocus:!i,suffix:t?"%":"",separators:l})};const wn=e=>{switch(e){case"ALL":return j.ALL.id;case"GREATER_THAN":return j.GREATER_THAN.id;case"GREATER_THAN_OR_EQUAL_TO":return j.GREATER_THAN_OR_EQUAL_TO.id;case"LESS_THAN":return j.LESS_THAN.id;case"LESS_THAN_OR_EQUAL_TO":return j.LESS_THAN_OR_EQUAL_TO.id;case"EQUAL_TO":return j.EQUAL_TO.id;case"NOT_EQUAL_TO":return j.NOT_EQUAL_TO.id;case"BETWEEN":return j.BETWEEN.id;case"NOT_BETWEEN":return j.NOT_BETWEEN.id;default:return}},kn=e=>({ALL:"all",GREATER_THAN:"greater-than",GREATER_THAN_OR_EQUAL_TO:"greater-than-equal-to",LESS_THAN:"less-than",LESS_THAN_OR_EQUAL_TO:"less-than-equal-to",EQUAL_TO:"equal-to",NOT_EQUAL_TO:"not-equal-to",BETWEEN:"between",NOT_BETWEEN:"not-between"}[e]),An=(0,G.memo)((function({operator:e,selectedOperator:t,bubbleText:i=null,onClick:n=(()=>{})}){const r=(0,le.Z)(),l=re("gd-list-item","gd-list-item-shortened",`s-mvf-operator-${gn.gl(e)}`,{"is-selected":t===e}),o=wn(e),a=void 0===o?e:r.formatMessage({id:o});return(0,W.jsxs)("div",{className:l,onClick:t=>{n(e),t.preventDefault()},children:[(0,W.jsx)("div",{className:`gd-icon-${kn(e)}`,title:a}),(0,W.jsx)("span",{title:a,children:(0,A.Z)(a)}),i?(e=>(0,W.jsx)("div",{className:"tooltip-bubble",children:(0,W.jsxs)(z.BubbleHoverTrigger,{tagName:"div",showDelay:400,hideDelay:200,children:[(0,W.jsx)("div",{className:"inlineBubbleHelp"}),(0,W.jsx)(z.Bubble,{className:"bubble-primary",alignPoints:[{align:"tc bl"}],children:e})]})}))(i):null]})}));var Dn=An,jn=(0,G.memo)((function({onSelect:e,onClose:t,selectedOperator:i,alignTo:n}){const r=(0,le.Z)();return(0,W.jsx)(z.Overlay,{closeOnOutsideClick:!0,alignTo:n,alignPoints:[{align:"bl tl"}],onClose:t,children:(0,W.jsx)("div",{className:"gd-dropdown overlay",children:(0,W.jsxs)("div",{className:"gd-mvf-operator-dropdown-body s-mvf-operator-dropdown-body",children:[(0,W.jsx)(Dn,{operator:"ALL",selectedOperator:i,onClick:e}),(0,W.jsx)(z.Separator,{}),(0,W.jsx)(Dn,{operator:"GREATER_THAN",selectedOperator:i,onClick:e}),(0,W.jsx)(Dn,{operator:"GREATER_THAN_OR_EQUAL_TO",selectedOperator:i,onClick:e}),(0,W.jsx)(z.Separator,{}),(0,W.jsx)(Dn,{operator:"LESS_THAN",selectedOperator:i,onClick:e}),(0,W.jsx)(Dn,{operator:"LESS_THAN_OR_EQUAL_TO",selectedOperator:i,onClick:e}),(0,W.jsx)(z.Separator,{}),(0,W.jsx)(Dn,{operator:"BETWEEN",selectedOperator:i,onClick:e,bubbleText:r.formatMessage({id:"mvf.operator.between.tooltip.bubble"})}),(0,W.jsx)(Dn,{operator:"NOT_BETWEEN",selectedOperator:i,onClick:e,bubbleText:r.formatMessage({id:"mvf.operator.notBetween.tooltip.bubble"})}),(0,W.jsx)(z.Separator,{}),(0,W.jsx)(Dn,{operator:"EQUAL_TO",selectedOperator:i,onClick:e}),(0,W.jsx)(Dn,{operator:"NOT_EQUAL_TO",selectedOperator:i,onClick:e})]})})})})),On=(0,G.memo)((function(e){const t=(0,le.Z)(),[i,n]=(0,G.useState)(!1),r=()=>n(!1),l=()=>n((e=>!e));return(0,W.jsxs)(W.Fragment,{children:[(()=>{const{operator:n,isDisabled:r}=e,o=wn(n),a=(0,A.Z)(void 0===o?n:t.formatMessage({id:o})),s=re("gd-mvf-operator-dropdown-button","s-mvf-operator-dropdown-button",`s-mvf-operator-dropdown-button-${gn.gl(n)}`,"gd-button-primary","gd-button-small",{"button-dropdown":!0,"is-dropdown-open":i,"is-active":i});return(0,W.jsx)(z.Button,{title:a,className:s,value:a,onClick:l,iconLeft:`gd-icon-${kn(n)}`,iconRight:i?"gd-icon-navigateup":"gd-icon-navigatedown",disabled:r})})(),i?(0,W.jsx)(jn,{alignTo:".gd-mvf-operator-dropdown-button",onSelect:t=>{r(),e.onSelect(t)},selectedOperator:e.operator,onClose:r}):null]})})),Pn=function({from:e,to:t,usePercentage:i,disableAutofocus:n,onFromChange:r,onToChange:l,onEnterKeyPress:o,separators:a}){return(0,W.jsxs)("div",{className:"gd-mvf-range-input",children:[(0,W.jsx)(z.InputWithNumberFormat,{className:"s-mvf-range-from-input",value:e,onChange:r,onEnterKeyPress:o,isSmall:!0,autofocus:!n,suffix:i?"%":"",separators:a}),(0,W.jsx)(z.InputWithNumberFormat,{className:"s-mvf-range-to-input",value:t,onChange:l,onEnterKeyPress:o,isSmall:!0,suffix:i?"%":"",separators:a})]})},Nn=function({checked:e=!1,onChange:t,intl:i}){return(0,W.jsxs)("label",{className:"input-checkbox-label gd-mvf-treat-null-values-as-zero s-treat-null-values-as-zero",children:[(0,W.jsx)("input",{type:"checkbox",name:"treat-null-values-as",className:"input-checkbox",checked:e,onChange:e=>t(e.target.checked)}),(0,W.jsxs)("span",{className:"input-label-text",children:[i.formatMessage({id:"mvf.treatNullValuesAsZeroLabel"}),(0,W.jsxs)(z.BubbleHoverTrigger,{showDelay:400,hideDelay:200,children:[(0,W.jsx)("span",{className:"inlineBubbleHelp"}),(0,W.jsx)(z.Bubble,{className:"bubble-primary",alignPoints:[{align:"tc bl"}],children:i.formatMessage({id:"mvf.treatNullValuesAsZeroTooltip"})})]})]})]})};function Tn(e){return!(0,h.Z)(e)&&!!e.severity}function Mn({warningMessage:e,className:t}){const i=re("gd-mvf-warning-message",(e=>{if("string"==typeof e)return"gd-mvf-warning-message-low s-mvf-warning-message-low";switch(e.severity){case"low":return"gd-mvf-warning-message-low s-mvf-warning-message-low";case"medium":return"gd-mvf-warning-message-medium s-mvf-warning-message-medium";case"high":return"gd-mvf-warning-message-high s-mvf-warning-message-high"}})(e),t,"s-mvf-warning-message");return(0,W.jsx)("div",{className:i,children:Tn(e)?e.text:e})}const Ln=6,Rn=(0,G.memo)((function(e){const t=(0,le.Z)(),{operator:i,value:n,usePercentage:r,treatNullAsZeroValue:l,valuePrecision:o=Ln}=e,a=(0,G.useCallback)((e=>e?parseFloat(e.toFixed(o)):e),[o]),s=(0,G.useCallback)((e=>e?e/100:e),[]),d=(0,G.useCallback)((e=>e?100*e:e),[]),u=(0,G.useCallback)(((e,t)=>e?(0,g.isComparisonConditionOperator)(t)?{value:a(d(e.value))}:{from:a(d(e.from)),to:a(d(e.to))}:e),[a,d]),[c,m]=(0,G.useState)((()=>({operator:i||"ALL",value:(r?u(n,i):n)||{},enabledTreatNullValuesAsZero:l}))),p=(0,G.useCallback)(((e,t)=>e?(0,g.isComparisonConditionOperator)(t)?{value:a(s(e.value))}:{from:a(s(e.from)),to:a(s(e.to))}:e),[a,s]),f=(0,G.useCallback)((()=>c.operator!==e.operator||c.enabledTreatNullValuesAsZero!==e.treatNullAsZeroValue),[c.operator,c.enabledTreatNullValuesAsZero,e.operator,e.treatNullAsZeroValue]),h=(0,G.useCallback)((()=>{const{value:t=null}=c.value;return null===t||null!==e.value&&!f()&&(e.usePercentage?a(s(t))===e.value.value:t===e.value.value)}),[c.value,e.value,e.usePercentage,f,a,s]),b=(0,G.useCallback)((()=>{const{from:t=null,to:i=null}=c.value;return null===t||null===i||null!==e.value&&!f()&&(e.usePercentage?a(s(t))===e.value.from&&a(s(i))===e.value.to:t===e.value.from&&i===e.value.to)}),[c.value,e.value,e.usePercentage,f,a,s]),y=(0,G.useCallback)((()=>"ALL"===i),[i]),v=(0,G.useCallback)((()=>{const{operator:e}=c;return(0,g.isComparisonConditionOperator)(e)?h():(0,g.isRangeConditionOperator)(e)?b():y()}),[c,h,b,y]),C=(0,G.useCallback)((e=>m((t=>({...t,operator:e})))),[]),x=(0,G.useCallback)((e=>{m((t=>({...t,value:{...t.value,value:e}})))}),[]),E=(0,G.useCallback)((e=>{m((t=>({...t,value:{...t.value,from:e}})))}),[]),S=(0,G.useCallback)((e=>{m((t=>({...t,value:{...t.value,to:e}})))}),[]),I=(0,G.useCallback)((e=>{m((t=>({...t,enabledTreatNullValuesAsZero:e})))}),[]),F=(0,G.useCallback)((()=>{if(v())return;const{enabledTreatNullValuesAsZero:t,operator:i,value:n}=c,{usePercentage:r}=e,l="ALL"===i?null:i,o=r?p(n,i):n;e.onApply(l,o,t)}),[v,c,e,p]),w=(0,G.useCallback)((()=>{const{usePercentage:t,disableAutofocus:i,separators:n}=e,{operator:r,value:{value:l=null,from:o=null,to:a=null}}=c;return(0,g.isComparisonConditionOperator)(r)?(0,W.jsx)(Fn,{value:l,usePercentage:t,onValueChange:x,onEnterKeyPress:F,disableAutofocus:i,separators:n}):(0,g.isRangeConditionOperator)(r)?(0,W.jsx)(Pn,{from:o,to:a,usePercentage:t,onFromChange:E,onToChange:S,onEnterKeyPress:F,disableAutofocus:i,separators:n}):null}),[e,c,x,E,S,F]),{onCancel:k,warningMessage:A,displayTreatNullAsZeroOption:D,enableOperatorSelection:j}=e,{operator:O,enabledTreatNullValuesAsZero:P}=c;return(0,W.jsxs)("div",{className:"gd-mvf-dropdown-body gd-dialog gd-dropdown overlay s-mvf-dropdown-body",children:[(0,W.jsxs)("div",{className:"gd-mvf-dropdown-content",children:[A?(0,W.jsx)("div",{className:"gd-mvf-dropdown-section",children:(0,W.jsx)(Mn,{warningMessage:A})}):null,(0,W.jsx)("div",{className:"gd-mvf-dropdown-section",children:(0,W.jsx)(On,{onSelect:C,operator:O,isDisabled:!j})}),"ALL"===O?null:(0,W.jsxs)("div",{className:"gd-mvf-dropdown-section",children:[w()," ",D?(0,W.jsx)(Nn,{onChange:I,checked:P,intl:t}):null]})]}),(0,W.jsxs)("div",{className:"gd-mvf-dropdown-footer",children:[(0,W.jsx)(z.Button,{className:"gd-button-secondary gd-button-small s-mvf-dropdown-cancel",onClick:k,value:t.formatMessage({id:"cancel"})}),(0,W.jsx)(z.Button,{className:"gd-button-action gd-button-small s-mvf-dropdown-apply",onClick:F,value:t.formatMessage({id:"apply"}),disabled:v()})]})]})})),Bn=(0,G.memo)((function(e){return(0,W.jsx)(D.IntlWrapper,{locale:e.locale,children:(0,W.jsx)(Rn,{...e})})})),_n=["bl tl","tl bl","br tr","tr br"].map((e=>({align:e,offset:{x:1,y:0}}))),Vn=(0,G.memo)((function(e){const{operator:t="ALL",value:i={},usePercentage:n,warningMessage:r,locale:l,onCancel:o,anchorEl:a,separators:s,displayTreatNullAsZeroOption:d=!1,treatNullAsZeroValue:u=!1,enableOperatorSelection:c,onApply:m}=e,g=(0,G.useCallback)(((e,t,i)=>{m(e,t,i)}),[m]),p=null===t?"ALL":t;return(0,W.jsx)(z.Overlay,{alignTo:a,alignPoints:_n,closeOnOutsideClick:!0,closeOnParentScroll:!0,closeOnMouseDrag:!0,onClose:o,children:(0,W.jsx)(Bn,{operator:p,value:i,usePercentage:n,warningMessage:r,locale:l,onCancel:o,onApply:g,separators:s,displayTreatNullAsZeroOption:d,treatNullAsZeroValue:u,enableOperatorSelection:c})})}));function Hn(e){return(0,W.jsx)(D.IntlWrapper,{locale:e.locale,children:(0,W.jsx)(Vn,{...e})})}const Zn=e=>{if(!e)return{};const t=(0,g.measureValueFilterCondition)(e);return t?(0,g.isRangeCondition)(t)?{from:t.range.from,to:t.range.to}:{value:t.comparison.value}:{}},qn=(e,t)=>{if(!e||!(0,g.measureValueFilterCondition)(e))return void 0!==t&&t;const i=(0,g.measureValueFilterCondition)(e);return(0,g.isComparisonCondition)(i)&&void 0!==i.comparison.treatNullValuesAs||(0,g.isRangeCondition)(i)&&void 0!==i.range.treatNullValuesAs||!1},Wn=(0,G.memo)((function({filter:e,onCancel:t,onApply:i,measureIdentifier:n,usePercentage:r,warningMessage:l,locale:o,anchorEl:a,separators:s,displayTreatNullAsZeroOption:d=!1,treatNullAsZeroDefaultValue:u=!1,enableOperatorSelection:c=!0}){const m=(0,G.useCallback)(((e,t,r)=>{null===e||"ALL"===e?i(null):(0,g.isRangeConditionOperator)(e)?i((0,g.newMeasureValueFilter)({localIdentifier:n},e,t.from??0,t.to??0,r?0:void 0)):i((0,g.newMeasureValueFilter)({localIdentifier:n},e,t.value??0,r?0:void 0))}),[n,i]);return(0,W.jsx)(Hn,{onApply:m,onCancel:t,operator:e&&(0,g.measureValueFilterOperator)(e)||null,value:e&&Zn(e)||null,usePercentage:r,warningMessage:l,locale:o,anchorEl:a,separators:s,displayTreatNullAsZeroOption:d,treatNullAsZeroValue:qn(e,u),enableOperatorSelection:c})})),Gn=(0,G.memo)((function({onCancel:e=(()=>{}),filter:t,measureIdentifier:i,buttonTitle:n,usePercentage:r,warningMessage:l,locale:o,separators:a,displayTreatNullAsZeroOption:s,treatNullAsZeroDefaultValue:d,enableOperatorSelection:u,onApply:c}){const[m,g]=(0,G.useState)(!1),p=(0,G.useRef)(null),f=(0,G.useCallback)((e=>{g(!1),c(e)}),[c]),h=(0,G.useCallback)((()=>{g(!1),e()}),[e]),b=(0,G.useCallback)((()=>{g((e=>!e))}),[]);return(0,W.jsxs)(G.Fragment,{children:[(0,W.jsx)("div",{ref:p,children:(0,W.jsx)(In,{onClick:b,isActive:m,buttonTitle:n})}),m?(0,W.jsx)(Wn,{onApply:f,onCancel:h,filter:t,measureIdentifier:i,usePercentage:r,warningMessage:l,locale:o,separators:a,displayTreatNullAsZeroOption:s,treatNullAsZeroDefaultValue:d,enableOperatorSelection:u,anchorEl:p.current}):null]})}));function Kn({isActive:e,onClick:t,title:i,className:n}){const r=re("gd-button","gd-button-secondary","gd-button-small","button-dropdown","gd-icon-right",{"gd-icon-navigateup":e,"gd-icon-navigatedown":!e},"s-rf-dropdown-button",n);return(0,W.jsx)("button",{className:r,onClick:t,children:i})}var Un=i(68774),zn=i(69581),$n=i(27615),Yn=i(25140),Qn=i(90184),Xn=i(836),Jn=i(935),er=(0,zn.Z)((function(e){var t=(0,Jn.Z)(e);return t="function"==typeof t?t:void 0,function(e,t,i){var n=e.length;if(n<2)return n?(0,Qn.Z)(e[0]):[];for(var r=-1,l=Array(n);++r<n;)for(var o=e[r],a=-1;++a<n;)a!=r&&(l[r]=(0,$n.Z)(l[r]||o,e[a],t,i));return(0,Qn.Z)((0,Yn.Z)(l,1),t,i)}((0,Un.Z)(e,Xn.Z),void 0,t)}));const tr=16;function ir({isSelected:e,onSelect:t}){const i=re("gd-list-item","gd-list-item-shortened",{"is-selected":e},"gd-button-link","s-rf-attribute-all-records");return(0,W.jsxs)("button",{className:i,onClick:()=>t(),children:[(0,W.jsx)(Ce,{id:"rankingFilter.allRecords"}),(0,W.jsx)("div",{children:(0,W.jsxs)(z.BubbleHoverTrigger,{showDelay:0,hideDelay:0,children:[(0,W.jsx)("span",{className:"gd-icon-circle-question gd-rf-attribute-all-records-icon s-rf-attribute-all-records-icon"}),(0,W.jsx)(z.Bubble,{className:"bubble-primary gd-rf-tooltip-bubble s-rf-attribute-all-records-bubble",arrowOffsets:{"cr cl":[tr,0],"cl cr":[-tr,0]},alignPoints:[{align:"cr cl"},{align:"cl cr"}],children:(0,W.jsx)(Ce,{id:"rankingFilter.allRecords.tooltip"})})]})})]})}function nr({item:e,iconClass:t,isSelected:i,onSelect:n,onDropDownItemMouseOver:r,onDropDownItemMouseOut:l,customGranularitySelection:o}){const{title:a,ref:s}=e,d=o&&!o.enable,u=re("gd-list-item","gd-list-item-shortened",{"is-selected":i,"is-disabled":d},"gd-button-link",t,`s-rf-attribute-${gn.gl(a)}`);return d?(0,W.jsxs)(z.BubbleHoverTrigger,{showDelay:0,hideDelay:0,children:[(0,W.jsx)(z.Button,{className:u,value:a,title:a,disabled:!0}),(0,W.jsx)(z.Bubble,{className:"bubble-primary gd-rf-tooltip-bubble s-rf-disabled-attribute-bubble",alignPoints:[{align:"cr cl"},{align:"cl cr"}],children:o.warningMessage})]}):(0,W.jsx)("button",{className:u,onClick:()=>n(s),onMouseOver:()=>{r&&r(s)},onMouseOut:()=>{l&&l()},title:a,children:(0,W.jsx)("span",{children:a})})}function rr({items:e,selectedItemRef:t,onSelect:i,onClose:n,onDropDownItemMouseOver:r,onDropDownItemMouseOut:l,customGranularitySelection:o}){return(0,W.jsx)(z.Overlay,{closeOnOutsideClick:!0,alignTo:".gd-rf-attribute-dropdown-button",alignPoints:[{align:"bl tl"},{align:"tl bl"}],onClose:n,children:(0,W.jsxs)("div",{className:"gd-dropdown overlay gd-rf-inner-overlay-dropdown gd-rf-attribute-dropdown-body s-rf-attribute-dropdown-body",children:[e.map((e=>{const{type:n,ref:a}=e;return(0,W.jsx)(nr,{iconClass:"DATE"===n?"gd-icon-date":"gd-icon-attribute",item:e,isSelected:(0,g.areObjRefsEqual)(a,t),onSelect:i,onDropDownItemMouseOver:r,onDropDownItemMouseOut:l,customGranularitySelection:o},(0,g.objRefToString)(a))})),(0,W.jsx)("div",{className:"gd-rf-attribute-dropdown-separator"}),(0,W.jsx)(ir,{isSelected:!t,onSelect:i})]})})}const lr=(e,t)=>e?e.title:t.formatMessage({id:"rankingFilter.allRecords"}),or=e=>e?"DATE"===e.type?"gd-icon-date":"gd-icon-attribute":null;function ar({items:e,selectedItemRef:t,onSelect:i,onDropDownItemMouseOver:n,onDropDownItemMouseOut:r,customGranularitySelection:l}){const o=(0,le.Z)(),[a,s]=(0,G.useState)(!1),d=1===e.length,u=re("gd-button-secondary","gd-button-small","button-dropdown","gd-icon-right",{"gd-icon-navigateup":a,"gd-icon-navigatedown":!a},"gd-rf-attribute-dropdown-button","s-rf-attribute-dropdown-button"),c=e.find((e=>(0,g.areObjRefsEqual)(e.ref,t))),m=lr(c,o);return d?(0,W.jsxs)(z.BubbleHoverTrigger,{showDelay:0,hideDelay:0,children:[(0,W.jsx)(z.Button,{className:u,value:m,disabled:!0}),(0,W.jsx)(z.Bubble,{className:"bubble-primary gd-rf-tooltip-bubble s-rf-attribute-no-options-bubble",alignPoints:[{align:"cr cl"},{align:"cl cr"}],children:(0,W.jsx)(Ce,{id:"rankingFilter.attributeDropdown.oneAttributeTooltip"})})]}):(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(z.Button,{className:u,value:m,onClick:()=>{s(!a)},iconLeft:or(c)}),a?(0,W.jsx)(rr,{items:e,selectedItemRef:t,onSelect:e=>{i(e),s(!1),r?.()},onClose:()=>s(!1),onDropDownItemMouseOver:n,onDropDownItemMouseOut:r,customGranularitySelection:l}):null]})}function sr({item:e,isSelected:t,onSelect:i,onDropDownItemMouseOver:n,onDropDownItemMouseOut:r}){const{title:l,ref:o,sequenceNumber:a}=e,s=re("gd-list-item","gd-list-item-shortened",{"is-selected":t},"gd-button-link","gd-icon-metric",`s-rf-measure-${gn.gl(l)}`);return(0,W.jsxs)("button",{className:s,onClick:()=>i(o),onMouseOver:()=>{n&&n(o)},onMouseOut:()=>{r&&r()},title:l,children:[(0,W.jsx)("span",{className:"gd-rf-measure-title",children:l}),a?(0,W.jsx)("span",{className:"gd-rf-sequence-number",children:a}):null]})}function dr({items:e,selectedItemRef:t,onSelect:i,onClose:n,onDropDownItemMouseOver:r,onDropDownItemMouseOut:l}){return(0,W.jsx)(z.Overlay,{closeOnOutsideClick:!0,alignTo:".gd-rf-measure-dropdown-button",alignPoints:[{align:"bl tl"},{align:"tl bl"}],onClose:n,children:(0,W.jsx)("div",{className:"gd-dropdown overlay gd-rf-inner-overlay-dropdown gd-rf-measure-dropdown-body s-rf-measure-dropdown-body",children:e.map((e=>{const{ref:n}=e;return(0,W.jsx)(sr,{item:e,isSelected:(0,g.areObjRefsEqual)(n,t),onSelect:i,onDropDownItemMouseOver:r,onDropDownItemMouseOut:l},(0,g.objRefToString)(n))}))})})}function ur({items:e,selectedItemRef:t,onSelect:i,onDropDownItemMouseOver:n,onDropDownItemMouseOut:r}){const[l,o]=(0,G.useState)(!1),a=re("gd-button-secondary","gd-button-small","button-dropdown","gd-icon-right",{"gd-icon-navigateup":l,"gd-icon-navigatedown":!l},"gd-rf-measure-dropdown-button","s-rf-measure-dropdown-button"),s=e.find((e=>(0,g.areObjRefsEqual)(e.ref,t))),d=s?.title;return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(z.Button,{className:a,value:d,onClick:()=>{o(!l)},iconLeft:"gd-icon-metric"}),l?(0,W.jsx)(dr,{items:e,selectedItemRef:t,onSelect:e=>{i(e),o(!1),r?.()},onClose:()=>o(!1),onDropDownItemMouseOver:n,onDropDownItemMouseOut:r}):null]})}function cr({title:e,value:t,isSelected:i,onSelect:n}){const r=re("gd-list-item","gd-list-item-shortened",{"is-selected":i},"gd-button-link",`s-rf-operator-${gn.gl(e)}`);return(0,W.jsx)("button",{className:r,onClick:()=>n(t),children:(0,W.jsx)("span",{children:e})})}function mr({items:e,selectedValue:t,onSelect:i,onClose:n}){const r=(0,le.Z)();return(0,W.jsx)(z.Overlay,{closeOnOutsideClick:!0,alignTo:".gd-rf-operator-dropdown-button",alignPoints:[{align:"bl tl"},{align:"tl bl"}],onClose:n,children:(0,W.jsx)("div",{className:"gd-dropdown overlay gd-rf-inner-overlay-dropdown gd-rf-operator-dropdown-body s-rf-operator-dropdown-body",children:e.map((({value:e,translationId:n})=>{const l=r.formatMessage({id:n});return(0,W.jsx)(cr,{title:l,value:e,isSelected:e===t,onSelect:i},e)}))})})}const gr=[{value:"TOP",translationId:j.top.id},{value:"BOTTOM",translationId:j.bottom.id}],pr=e=>gr.find((({value:t})=>t===e)).translationId;function fr({selectedValue:e,onSelect:t}){const i=(0,le.Z)(),[n,r]=(0,G.useState)(!1),l=re("gd-button-secondary","gd-button-small","button-dropdown","gd-icon-right",{"gd-icon-navigateup":n,"gd-icon-navigatedown":!n},"gd-rf-operator-dropdown-button","s-rf-operator-dropdown-button"),o=i.formatMessage({id:pr(e)});return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(z.Button,{className:l,value:o,onClick:()=>{r(!n)}}),n?(0,W.jsx)(mr,{items:gr,selectedValue:e,onSelect:e=>{t(e),r(!1)},onClose:()=>r(!1)}):null]})}const hr=(e,t)=>{switch(e){case"TOP":return t?j.topWithAttr.id:j.topWithoutAttr.id;case"BOTTOM":return t?j.bottomWithAttr.id:j.bottomWithoutAttr.id;default:throw new Error(`Operator '${e}' is not supported!`)}};function br({operator:e,value:t,measure:i,attribute:n}){return(0,W.jsx)("div",{className:"gd-rf-preview s-rf-preview",children:(0,W.jsx)(Ce,{id:hr(e,n),tagName:"span",values:{measure:i.title,attribute:n?.title,operator:e,value:t,strong:e=>(0,W.jsx)("strong",{children:e})}})})}const yr=[3,5,10,15,20,25,50,100].map((e=>({type:"option",value:e,label:`${e}`}))),vr=e=>/^[^-\d]*(-?\d+)(?:\s|$)/.exec(e),Cr=e=>e&&vr(e)&&Number(e)>0&&Number(e)<=99999,xr=(e,t)=>{if(!e)return yr;const i=(e=>e?.trim())(e),n=vr(i);if(n){const e=n[1];return((e,t)=>e<1?[{type:"error",label:t.formatMessage({id:"rankingFilter.valueTooSmall"})}]:e>99999?[{type:"error",label:t.formatMessage({id:"rankingFilter.valueTooLarge"})}]:yr.filter((t=>t.label.toLowerCase().includes(e.toString()))))(Number.parseInt(e,10),t)}return[{type:"error",label:t.formatMessage({id:"rankingFilter.valueTooSmall"})}]},Er=(0,Bt.b)(pi);class Sr extends G.Component{constructor(e){super(e);const t=void 0===e.value?null:Di(e.getItems(e.value.toString()),e.value);this.state={inputValue:t?hi(t):e.value?e.value.toString():""}}inputRef=(0,G.createRef)();static defaultProps={onChange:()=>{},initialIsOpen:!1,visibleItemsRange:3};onChange=e=>{e&&this.props.onChange(e.value)};componentDidUpdate=e=>{if(e.value!==this.props.value){const e=this.props.getItems(this.props.value.toString()),t=Di(e,this.props.value)?.label||this.props.value.toString();this.setState({inputValue:t})}};focus=()=>{this.inputRef.current&&this.inputRef.current.focus()};blur=()=>{this.inputRef.current&&this.inputRef.current.blur()};onInputValueChanged=e=>{e!==this.state.inputValue&&this.setState({inputValue:e})};render(){const{initialIsOpen:e,placeholder:t,getItems:i,value:n=null,className:r,style:l,optionClassName:o,visibleItemsRange:a,ariaLabel:s}=this.props,d=i(this.state.inputValue),u=null===n?[]:i(n.toString()),c=null!==n&&Di(u,n)||null,m=bi(d),g=""!==this.state.inputValue.trim();return(0,W.jsx)(Er,{onChange:this.onChange,itemToString:hi,initialIsOpen:e,selectedItem:c,itemCount:m.length,inputValue:this.state.inputValue,defaultHighlightedIndex:c||g?0:Li(m),children:({getInputProps:e,getMenuProps:i,getItemProps:n,isOpen:u,openMenu:g,closeMenu:p,inputValue:f,highlightedIndex:h,setHighlightedIndex:b,selectItem:y})=>{const v=h>m.length-1?0:h,C={items:d,selectedItem:c,highlightedIndex:v,getItemProps:n,getMenuProps:i,className:"gd-dynamic-select-menu",optionClassName:o,inputValue:f,setHighlightedIndex:b,visibleItemsRange:a};return(0,W.jsxs)("div",{className:re("gd-dynamic-select",r),style:l,"aria-labelledby":void 0,children:[(0,W.jsx)("div",{className:"gd-dynamic-select-input-wrapper",children:(0,W.jsx)("input",{type:"text",className:"s-relative-range-input gd-input-field","aria-label":s,...e({"aria-labelledby":void 0,ref:this.inputRef,placeholder:c?c.label:t,value:f,onFocus:()=>{this.setState({inputValue:""}),g()},onChange:e=>this.onChangeHandler(e,y),onBlur:()=>this.onBlurHandler(c,y,p)})})}),u&&d.length>0?(0,W.jsx)(Ri,{...C}):null]})}})}onBlurHandler=(e,t,i)=>{const{customValueValidator:n,value:r}=this.props;n?(i(),this.onInputValueChanged(r?.toString())):(t(e),this.onInputValueChanged(e?e.label:""))};onChangeHandler=(e,t)=>{const{customValueValidator:i}=this.props,n=e.target.value;i?.(n)&&t({type:"option",value:Number(n),label:n}),this.onInputValueChanged(n)}}function Ir({selectedValue:e,onSelect:t}){const i=(0,le.Z)();return(0,W.jsx)(Sr,{getItems:e=>xr(e,i),onChange:t,value:e,className:"gd-rf-value-dropdown-button s-rf-value-dropdown-button",optionClassName:"s-rf-value-dropdown-item",customValueValidator:Cr})}const Fr=(e,t)=>{const i=e.rankingFilter,n=t.rankingFilter,r=i.operator===n.operator,l=i.value===n.value,o=(0,h.Z)(er(i.attributes,n.attributes,K.Z)),a=(0,K.Z)(i.measure,n.measure);return r&&l&&o&&a};function wr({measureItems:e,attributeItems:t,filter:i,onApply:n,onCancel:r=(()=>{}),onDropDownItemMouseOver:l,onDropDownItemMouseOut:o,customGranularitySelection:a}){const s=(0,le.Z)(),d=i.rankingFilter,[u,c]=(0,G.useState)(d.value),[m,p]=(0,G.useState)(d.operator),[f,h]=(0,G.useState)(d.measure),[b,y]=(0,G.useState)(d.attributes?.[0]),v=e.find((e=>(0,g.areObjRefsEqual)(e.ref,f))),C=t.find((e=>(0,g.areObjRefsEqual)(e.ref,b))),x=(0,G.useCallback)((()=>b?(0,g.newRankingFilter)(f,[b],m,u):(0,g.newRankingFilter)(f,m,u)),[f,b,m,u]);return(0,W.jsxs)("div",{className:"gd-dialog gd-dropdown overlay gd-rf-dropdown-body s-rf-dropdown-body",children:[(0,W.jsx)("div",{className:"gd-rf-dropdown-header",children:(0,W.jsx)(Ce,{id:"rankingFilter.topBottom"})}),(0,W.jsxs)("div",{className:"gd-rf-dropdown-section",children:[(0,W.jsxs)("div",{className:"gd-rf-value-section",children:[(0,W.jsx)(fr,{selectedValue:m,onSelect:p}),(0,W.jsx)(Ir,{selectedValue:u,onSelect:c}),(0,W.jsxs)(z.BubbleHoverTrigger,{showDelay:0,hideDelay:0,children:[(0,W.jsx)("span",{className:"gd-icon-circle-question gd-rf-value-tooltip-icon s-rf-value-tooltip-icon"}),(0,W.jsx)(z.Bubble,{className:"bubble-primary gd-rf-tooltip-bubble s-rf-value-tooltip",alignPoints:[{align:"cr cl"},{align:"cl cr"}],children:(0,W.jsx)(Ce,{id:"rankingFilter.valueTooltip"})})]})]}),(0,W.jsx)("div",{className:"gd-rf-dropdown-section-title",children:(0,W.jsx)(Ce,{id:"rankingFilter.outOf"})}),(0,W.jsx)(ar,{items:t,selectedItemRef:b,onSelect:y,onDropDownItemMouseOver:l,onDropDownItemMouseOut:o,customGranularitySelection:a}),(0,W.jsx)("div",{className:"gd-rf-dropdown-section-title",children:(0,W.jsx)(Ce,{id:"rankingFilter.basedOn"})}),(0,W.jsx)(ur,{items:e,selectedItemRef:f,onSelect:h,onDropDownItemMouseOver:l,onDropDownItemMouseOut:o}),(0,W.jsx)("div",{className:"gd-rf-dropdown-section-title",children:(0,W.jsx)(Ce,{id:"rankingFilter.preview"})}),(0,W.jsx)(br,{measure:v,attribute:C,operator:m,value:u})]}),(0,W.jsxs)("div",{className:"gd-rf-dropdown-footer",children:[(0,W.jsx)(z.Button,{className:"gd-button-secondary gd-button-small s-rf-dropdown-cancel",onClick:()=>r(),value:s.formatMessage({id:"cancel"})}),(0,W.jsx)(z.Button,{className:"gd-button-action gd-button-small s-rf-dropdown-apply",onClick:()=>{const e=x();n(e)},value:s.formatMessage({id:"apply"}),disabled:Fr(i,x())})]})]})}const kr=["bl tl","tl bl","br tr","tr br"].map((e=>({align:e,offset:{x:1,y:0}}))),Ar=e=>{const{measure:t,attributes:i,operator:n,value:r}=e.rankingFilter,l=i?.[0];return{rankingFilter:{operator:n,value:r,measure:t,...l?{attributes:[l]}:{}}}};function Dr({measureItems:e,attributeItems:t,filter:i,onApply:n,onCancel:r=(()=>{}),anchorEl:l,onDropDownItemMouseOver:o,onDropDownItemMouseOut:a,customGranularitySelection:s}){const[d,u]=(0,G.useState)(Ar(i));return(0,W.jsx)(z.Overlay,{closeOnOutsideClick:!0,closeOnParentScroll:!0,closeOnMouseDrag:!0,alignTo:l,alignPoints:kr,onClose:r,ignoreClicksOnByClass:[".gd-rf-inner-overlay-dropdown"],children:(0,W.jsx)(wr,{measureItems:e,attributeItems:t,filter:d,onApply:e=>{u(e),n(e)},onCancel:r,onDropDownItemMouseOver:o,onDropDownItemMouseOut:a,customGranularitySelection:s})})}function jr(e){return(0,W.jsx)(D.IntlWrapper,{locale:e.locale,children:(0,W.jsx)(Dr,{...e})})}function Or({measureItems:e,attributeItems:t,filter:i,onApply:n,onCancel:r=(()=>{}),buttonTitle:l,onDropDownItemMouseOver:o,onDropDownItemMouseOut:a,customGranularitySelection:s,locale:d}){const[u,c]=(0,G.useState)(!1);return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(Kn,{isActive:u,onClick:()=>{c(!u)},title:l,className:"gd-rf-dropdown-button"}),u?(0,W.jsx)(jr,{measureItems:e,attributeItems:t,filter:i,onApply:e=>{n(e),c(!1)},onCancel:()=>{r(),c(!1)},anchorEl:".gd-rf-dropdown-button",onDropDownItemMouseOver:o,onDropDownItemMouseOut:a,customGranularitySelection:s,locale:d}):null]})}var Pr=i(47591),Nr=i(65846),Tr=i(29732),Mr=i(65849),Lr=i(20760),Rr=i(93513),Br="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?Mr.qC:Mr.qC.apply(null,arguments)};function _r(e,t){function i(...i){if(t){let n=t(...i);if(!n)throw new Error(Xr(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:i[0]}}return i.toString=()=>`${e}`,i.type=e,i.match=t=>(0,Mr.LG)(t)&&t.type===e,i}"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;var Vr=class e extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(...e){return super.concat.apply(this,e)}prepend(...t){return 1===t.length&&Array.isArray(t[0])?new e(...t[0].concat(this)):new e(...t.concat(this))}};function Hr(e){return(0,Rr.o$)(e)?(0,Rr.Uy)(e,(()=>{})):e}function Zr(e,t,i){return e.has(t)?e.get(t):e.set(t,i(t)).get(t)}var qr=e=>t=>{setTimeout(t,e)};function Wr(e){const t={},i=[];let n;const r={addCase(e,i){const n="string"==typeof e?e:e.type;if(!n)throw new Error(Xr(28));if(n in t)throw new Error(Xr(29));return t[n]=i,r},addAsyncThunk(e,n){return n.pending&&(t[e.pending.type]=n.pending),n.rejected&&(t[e.rejected.type]=n.rejected),n.fulfilled&&(t[e.fulfilled.type]=n.fulfilled),n.settled&&i.push({matcher:e.settled,reducer:n.settled}),r},addMatcher(e,t){return i.push({matcher:e,reducer:t}),r},addDefaultCase(e){return n=e,r}};return e(r),[t,i,n]}var Gr=Symbol.for("rtk-slice-createasyncthunk");function Kr(e,t){return`${e}/${t}`}function Ur({creators:e}={}){const t=e?.asyncThunk?.[Gr];return function(e){const{name:i,reducerPath:n=i}=e;if(!i)throw new Error(Xr(11));const r=("function"==typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:e}}()):e.reducers)||{},l=Object.keys(r),o={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},a={addCase(e,t){const i="string"==typeof e?e:e.type;if(!i)throw new Error(Xr(12));if(i in o.sliceCaseReducersByType)throw new Error(Xr(13));return o.sliceCaseReducersByType[i]=t,a},addMatcher(e,t){return o.sliceMatchers.push({matcher:e,reducer:t}),a},exposeAction(e,t){return o.actionCreators[e]=t,a},exposeCaseReducer(e,t){return o.sliceCaseReducersByName[e]=t,a}};function s(){const[t={},i=[],n]="function"==typeof e.extraReducers?Wr(e.extraReducers):[e.extraReducers],r={...t,...o.sliceCaseReducersByType};return function(e,t){let l,[a,s,d]=Wr((e=>{for(let t in r)e.addCase(t,r[t]);for(let t of o.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of i)e.addMatcher(t.matcher,t.reducer);n&&e.addDefaultCase(n)}));if("function"==typeof e)l=()=>Hr(e());else{const t=Hr(e);l=()=>t}function u(e=l(),t){let i=[a[t.type],...s.filter((({matcher:e})=>e(t))).map((({reducer:e})=>e))];return 0===i.filter((e=>!!e)).length&&(i=[d]),i.reduce(((e,i)=>{if(i){if((0,Rr.mv)(e)){const n=i(e,t);return void 0===n?e:n}if((0,Rr.o$)(e))return(0,Rr.Uy)(e,(e=>i(e,t)));{const n=i(e,t);if(void 0===n){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return n}}return e}),e)}return u.getInitialState=l,u}(e.initialState)}l.forEach((n=>{const l=r[n],o={reducerName:n,type:Kr(i,n),createNotation:"function"==typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(l)?function({type:e,reducerName:t,createNotation:i},n,r){let l,o;if("reducer"in n){if(i&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(n))throw new Error(Xr(17));l=n.reducer,o=n.prepare}else l=n;r.addCase(e,l).exposeCaseReducer(t,l).exposeAction(t,o?_r(e,o):_r(e))}(o,l,a):function({type:e,reducerName:t},i,n,r){if(!r)throw new Error(Xr(18));const{payloadCreator:l,fulfilled:o,pending:a,rejected:s,settled:d,options:u}=i,c=r(e,l,u);n.exposeAction(t,c),o&&n.addCase(c.fulfilled,o),a&&n.addCase(c.pending,a),s&&n.addCase(c.rejected,s),d&&n.addMatcher(c.settled,d),n.exposeCaseReducer(t,{fulfilled:o||Yr,pending:a||Yr,rejected:s||Yr,settled:d||Yr})}(o,l,a,t)}));const d=e=>e,u=new Map,c=new WeakMap;let m;function g(e,t){return m||(m=s()),m(e,t)}function p(){return m||(m=s()),m.getInitialState()}function f(t,i=!1){function n(e){let r=e[t];return void 0===r&&i&&(r=Zr(c,n,p)),r}function r(t=d){const n=Zr(u,i,(()=>new WeakMap));return Zr(n,t,(()=>{const n={};for(const[r,l]of Object.entries(e.selectors??{}))n[r]=zr(l,t,(()=>Zr(c,t,p)),i);return n}))}return{reducerPath:t,getSelectors:r,get selectors(){return r(n)},selectSlice:n}}const h={name:i,reducer:g,actions:o.actionCreators,caseReducers:o.sliceCaseReducersByName,getInitialState:p,...f(n),injectInto(e,{reducerPath:t,...i}={}){const r=t??n;return e.inject({reducerPath:r,reducer:g},i),{...h,...f(r,!0)}}};return h}}function zr(e,t,i,n){function r(r,...l){let o=t(r);return void 0===o&&n&&(o=i()),e(o,...l)}return r.unwrapped=e,r}var $r=Ur();function Yr(){}var{assign:Qr}=Object;function Xr(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}Symbol.for("rtk-state-proxy-original");const Jr={transformFilterToPrimaryLabel:(e,t)=>{e.displayFormRef=t.payload.primaryLabelRef,e.displayAsLabelRef||(e.displayAsLabelRef=t.payload.secondaryLabelRef)},setDisplayAsLabel:(e,t)=>{(0,g.areObjRefsEqual)(e.displayAsLabelRef,t.payload.displayAsLabel)||(e.elements.cache={}),e.displayAsLabelRef=t.payload.displayAsLabel},setDisplayFormRef:(e,t)=>{e.displayFormRef=t.payload.displayForm}};var el=i(214);const tl=e=>e,il=e=>e.uri,nl=e=>e.elementsForm,rl=e=>e.config.withoutApply,ll="initSelection_",ol={loadCustomElementsRequest:e=>e,loadCustomElementsStart:e=>e,loadCustomElementsSuccess:(e,t)=>{const i=[],{options:{elements:n,filterByPrimaryLabel:r},correlation:l}=t.payload,o="loading"===e.initialization.status&&l.startsWith(ll);if(n){const l=(e=>e?(0,el.isElementsQueryOptionsElementsByValue)(e)?e.values:(0,el.isElementsQueryOptionsElementsByPrimaryDisplayFormValue)(e)?e.primaryValues:e.uris:[])(n);l.forEach((n=>{t.payload.elements.filter((e=>r?e.uri===n:e.title===n)).forEach((t=>{const n=il(t);e.elements.cache[n]||(e.elements.cache[n]=t),o&&i.push(n)}))}))}else t.payload.elements.forEach((t=>{const n=il(t);e.elements.cache[n]||(e.elements.cache[n]=t),o&&i.push(n)}));const a=e.selection.working.keys&&e.selection.working.keys.length>0,s=0===t.payload.elements?.length||0===i.length,d=e.config.enablePreserveSelectionDuringInit&&s&&a;o&&!d&&(e.selection.working.keys=i,e.selection.commited.keys=i)},loadCustomElementsError:e=>e,loadCustomElementsCancelRequest:e=>e,loadCustomElementsCancel:e=>e},al={loadInitialElementsPageRequest:e=>e,loadInitialElementsPageStart:e=>{e.elements.initialPageLoad.status="loading",e.elements.initialPageLoad.error=void 0,e.elements.currentOptions.offset=0,e.elements.lastLoadedOptions.offset=0,e.elements.data=[]},loadInitialElementsPageSuccess:(e,t)=>{e.elements.initialPageLoad.status="success",e.elements.totalCountWithCurrentSettings=t.payload.totalCount,t.payload.elements.forEach((t=>{const i=il(t);e.elements.cache[i]||(e.elements.cache[i]=t)})),e.elements.data=t.payload.elements.map((e=>il(e))),e.elements.lastLoadedOptions=t.payload.options},loadInitialElementsPageError:(e,t)=>{e.elements.initialPageLoad.status="error",e.elements.initialPageLoad.error=t.payload.error},loadInitialElementsPageCancelRequest:e=>e,loadInitialElementsPageCancel:e=>{e.attribute.status="canceled"}},sl={loadNextElementsPageRequest:e=>e,loadNextElementsPageStart:e=>{e.elements.nextPageLoad.status="loading",e.elements.nextPageLoad.error=void 0},loadNextElementsPageSuccess:(e,t)=>{e.elements.nextPageLoad.status="success",t.payload.elements.forEach((t=>{const i=il(t);e.elements.cache[i]||(e.elements.cache[i]=t)})),e.elements.data=e.elements.data.concat(t.payload.elements.map((e=>il(e)))),e.elements.lastLoadedOptions=t.payload.options},loadNextElementsPageError:(e,t)=>{e.elements.nextPageLoad.status="error",e.elements.nextPageLoad.error=t.payload.error},loadNextElementsPageCancelRequest:e=>e,loadNextElementsPageCancel:e=>{e.elements.nextPageLoad.status="canceled"}};var dl=e=>Array.isArray(e)?e:[e];Symbol(),Object.getPrototypeOf({});var ul="undefined"!=typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}},cl=0,ml=1;function gl(){return{s:cl,v:void 0,o:null,p:null}}function pl(e,t={}){let i=gl();const{resultEqualityCheck:n}=t;let r,l=0;function o(){let t=i;const{length:o}=arguments;for(let e=0,i=o;e<i;e++){const i=arguments[e];if("function"==typeof i||"object"==typeof i&&null!==i){let e=t.o;null===e&&(t.o=e=new WeakMap);const n=e.get(i);void 0===n?(t=gl(),e.set(i,t)):t=n}else{let e=t.p;null===e&&(t.p=e=new Map);const n=e.get(i);void 0===n?(t=gl(),e.set(i,t)):t=n}}const a=t;let s;if(t.s===ml)s=t.v;else if(s=e.apply(null,arguments),l++,n){const e=r?.deref?.()??r;null!=e&&n(e,s)&&(s=e,0!==l&&l--),r="object"==typeof s&&null!==s||"function"==typeof s?new ul(s):s}return a.s=ml,a.v=s,s}return o.clearCache=()=>{i=gl(),o.resetResultsCount()},o.resultsCount=()=>l,o.resetResultsCount=()=>{l=0},o}function fl(e,...t){const i="function"==typeof e?{memoize:e,memoizeOptions:t}:e,n=(...e)=>{let t,n=0,r=0,l={},o=e.pop();"object"==typeof o&&(l=o,o=e.pop()),function(e,t="expected a function, instead received "+typeof e){if("function"!=typeof e)throw new TypeError(t)}(o,`createSelector expects an output function after the inputs, but received: [${typeof o}]`);const a={...i,...l},{memoize:s,memoizeOptions:d=[],argsMemoize:u=pl,argsMemoizeOptions:c=[],devModeChecks:m={}}=a,g=dl(d),p=dl(c),f=function(e){const t=Array.isArray(e[0])?e[0]:e;return function(e,t="expected all items to be functions, instead received the following types: "){if(!e.every((e=>"function"==typeof e))){const i=e.map((e=>"function"==typeof e?`function ${e.name||"unnamed"}()`:typeof e)).join(", ");throw new TypeError(`${t}[${i}]`)}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}(e),h=s((function(){return n++,o.apply(null,arguments)}),...g),b=u((function(){r++;const e=function(e,t){const i=[],{length:n}=e;for(let r=0;r<n;r++)i.push(e[r].apply(null,t));return i}(f,arguments);return t=h.apply(null,e),t}),...p);return Object.assign(b,{resultFunc:o,memoizedResultFunc:h,dependencies:f,dependencyRecomputations:()=>r,resetDependencyRecomputations:()=>{r=0},lastResult:()=>t,recomputations:()=>n,resetRecomputations:()=>{n=0},memoize:s,argsMemoize:u})};return Object.assign(n,{withTypes:()=>n}),n}var hl=fl(pl),bl=Object.assign(((e,t=hl)=>{!function(e,t="expected an object, instead received "+typeof e){if("object"!=typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);const i=Object.keys(e);return t(i.map((t=>e[t])),((...e)=>e.reduce(((e,t,n)=>(e[i[n]]=t,e)),{})))}),{withTypes:()=>bl});const yl=hl(tl,(e=>e.selection.working.keys)),vl=hl(tl,(e=>e.selection.working.isInverted)),Cl=hl(tl,(e=>e.selection.working.irrelevantKeys)),xl=hl(tl,(e=>e.selection.commited.keys)),El=hl(tl,(e=>e.selection.commited.isInverted)),Sl=hl(tl,(e=>e.selection.commited.irrelevantKeys)),Il=hl(yl,vl,Cl,((e,t,i)=>({keys:e,isInverted:t,irrelevantKeys:i}))),Fl=hl(xl,El,Sl,((e,t,i)=>({keys:e,isInverted:t,irrelevantKeys:i}))),wl=hl(vl,yl,El,xl,((e,t,i,n)=>e!==i||!(0,K.Z)([...n].sort(),[...t].sort()))),kl=hl(yl,h.Z),Al={init:e=>e,initStart:e=>{e.initialization.status="loading"},initSuccess:e=>{e.initialization.status="success",e.initialization.error=void 0},initError:(e,t)=>{e.initialization.status="error",e.initialization.error=t.payload.error},initCancel:e=>{e.initialization.status="canceled"},loadAttributeRequest:e=>e,loadAttributeStart:e=>{e.attribute.status="loading",e.attribute.error=void 0,e.attribute.data=void 0},loadAttributeSuccess:(e,t)=>{e.attribute.status="success",e.attribute.data=t.payload.attribute},loadAttributeError:(e,t)=>{e.attribute.status="error",e.attribute.error=t.payload.error},loadAttributeCancelRequest:e=>e,loadAttributeCancel:e=>{e.attribute.status="canceled"},...al,...sl,...ol,loadIrrelevantElementsRequest:e=>e,loadIrrelevantElementsStart:e=>{e.selection.commited.irrelevantKeys=[],e.selection.working.irrelevantKeys=[]},loadIrrelevantElementsSuccess:(e,t)=>{e.selection.commited.irrelevantKeys=t.payload.elementTitles,e.selection.working.irrelevantKeys=t.payload.elementTitles},loadIrrelevantElementsError:e=>e,loadIrrelevantElementsCancelRequest:e=>e,loadIrrelevantElementsCancel:e=>e,changeSelection:(e,t)=>{e.selection.working.keys=t.payload.selection,t.payload.irrelevantSelection&&(e.selection.working.irrelevantKeys=t.payload.irrelevantSelection),null!==t.payload.isInverted&&void 0!==t.payload.isInverted&&(e.selection.working.isInverted=t.payload.isInverted)},revertSelection:e=>{const t=xl(e),i=El(e),n=Sl(e);e.selection.working.keys=t,e.selection.working.isInverted=i,e.selection.working.irrelevantKeys=n},commitSelection:e=>{const t=yl(e),i=vl(e),n=Cl(e);e.selection.commited.keys=t,e.selection.commited.isInverted=i,e.selection.commited.irrelevantKeys=n},invertSelection:e=>{const t=vl(e);e.selection.working.isInverted=!t},clearSelection:e=>{e.selection.working.keys=[]},setElementsTotalCount:(e,t)=>{e.elements.totalCount=t.payload.totalCount},initTotalCount:e=>e,initTotalCountStart:e=>{e.elements.totalCountInitialization.status="loading"},initTotalCountSuccess:e=>{e.elements.totalCountInitialization.status="success"},initTotalCountError:(e,t)=>{e.elements.totalCountInitialization.status="error",e.elements.totalCountInitialization.error=t.payload.error},initTotalCountCancel:e=>{e.elements.totalCountInitialization.status="canceled"},setElementsTotalCountWithCurrentSettings:(e,t)=>{e.elements.totalCountWithCurrentSettings=t.payload.totalCount},setOffset:(e,t)=>{e.elements.currentOptions.offset=t.payload.offset},setLimit:(e,t)=>{e.elements.currentOptions.limit=t.payload.limit},setSearch:(e,t)=>{e.elements.currentOptions.search=t.payload.search},setOrder:(e,t)=>{e.elements.currentOptions.order=t.payload.order},setLimitingAttributeFilters:(e,t)=>{e.elements.currentOptions.limitingAttributeFilters=t.payload.filters},setLimitingMeasures:(e,t)=>{e.elements.currentOptions.limitingMeasures=t.payload.filters},setLimitingValidationItems:(e,t)=>{e.elements.currentOptions.limitingValidationItems=t.payload.validateBy},setLimitingDateFilters:(e,t)=>{e.elements.currentOptions.limitingDateFilters=t.payload.filters},setLimitingAttributeFiltersAttributes:(e,t)=>{e.elements.limitingAttributeFiltersAttributes=t.payload.attributes},setCacheId:(e,t)=>{e.elements.cacheId=t.payload.cacheId},...Jr},Dl={initialization:{status:"pending"},attribute:{status:"pending"},elements:{cache:{},currentOptions:{offset:0,limit:500,search:"",limitingAttributeFilters:[],limitingDateFilters:[],limitingMeasures:[],limitingValidationItems:[]},initialPageLoad:{status:"pending"},nextPageLoad:{status:"pending"},limitingAttributeFiltersAttributes:[],lastLoadedOptions:{},totalCountInitialization:{status:"pending"}},config:{},selection:{commited:{},working:{}}},jl=$r({name:"attributeFilterSlice",initialState:Dl,reducers:Al}),Ol=jl.reducer,Pl=jl.actions;function Nl(e,t){if((0,D.isGoodDataSdkError)(t)){const i=t.getCause(),n=i?`\nInner error: ${i}`:"";console.error(`Error while ${e}: ${t.getMessage()}${n}`)}else console.error(`Error while ${e}:`,t)}function Tl(){let e=[];return{invoke:t=>{e.forEach((e=>e(t)))},subscribe:t=>(e.push(t),function(){e=e.filter((e=>e!=t))})}}var Ml=i(51451),Ll=i(86522);async function Rl(e,t){return e.backend.workspace(e.workspace).attributes().getAttributeByDisplayForm(t).catch((e=>{throw(0,D.convertError)(e)}))}function*Bl(){return yield(0,Ll.fw)("attributeFilterContext")}var _l=i(34468),Vl=i(44176),Hl=i(94207);const Zl=(e,t)=>(0,Tr.Z)(e.map((e=>t[e]))),ql=hl(tl,(e=>e.elements.data??[])),Wl=hl(tl,(e=>e.elements.cache)),Gl=hl(ql,Wl,Zl),Kl=hl(tl,(e=>e.elements.totalCount)),Ul=hl(tl,(e=>e.elements.totalCountInitialization?.status)),zl=hl(tl,(e=>e.elements.totalCountInitialization?.error)),$l=hl(tl,(e=>e.elements.totalCountWithCurrentSettings)),Yl=hl(tl,(e=>e.config.staticElements??[])),Ql=hl(tl,(e=>e.elements.currentOptions.search)),Xl=hl(tl,(e=>e.elements.currentOptions.order)),Jl=hl(tl,(e=>e.elements.currentOptions.limit)),eo=hl(tl,(e=>e.elements?.lastLoadedOptions?.offset??e.elements.currentOptions.offset)),to=hl(tl,(e=>e.elements.currentOptions.limitingAttributeFilters)),io=hl(tl,(e=>e.elements.currentOptions.limitingMeasures)),no=hl(tl,(e=>e.elements.currentOptions.limitingValidationItems)),ro=hl(tl,(e=>e.elements.currentOptions.limitingDateFilters)),lo=hl(tl,(e=>e.elements.cacheId)),oo=hl(eo,Jl,Xl,Ql,to,io,ro,no,((e,t,i,n,r,l,o,a)=>({limit:t,limitingAttributeFilters:r,limitingDateFilters:o,limitingMeasures:l,limitingValidationItems:a,offset:e,order:i,search:n}))),ao=hl(tl,(e=>e.elements.lastLoadedOptions)),so=hl(tl,(e=>e.elements.limitingAttributeFiltersAttributes)),uo=hl(tl,(e=>e.elementsForm)),co=hl(tl,(e=>e.config.hiddenElements??[])),mo=hl(uo,co,((e,t)=>"uris"===e?{uris:t}:{values:t})),go=hl(tl,(e=>e.displayFormRef)),po=hl(tl,(e=>e.displayAsLabelRef)),fo=hl(tl,(e=>e.localIdentifier)),ho=hl(tl,(e=>e.originalFilter)),bo=hl(uo,xl,((e,t)=>"uris"===e?{uris:t}:{values:t})),yo=hl(uo,xl,El,co,((e,t,i,n)=>{const r=i?(0,_l.Z)(t,n):(0,Vl.Z)(t,n);return"uris"===e?{uris:r}:{values:r}})),vo=hl(uo,xl,El,co,Gl,((e,t,i,n,r)=>{const l=i?(0,_l.Z)(t,n):(0,Vl.Z)(t,n),o=r.filter((e=>l.find((t=>t===e.uri)))).map((e=>e.title)),a=(0,Hl.Z)(o);return"uris"===e?{uris:a}:{values:a}})),Co=hl(go,El,yo,fo,((e,t,i,n)=>t?(0,g.newNegativeAttributeFilter)(e,i,n):(0,g.newPositiveAttributeFilter)(e,i,n))),xo=hl(go,po,El,yo,vo,fo,((e,t,i,n,r,l)=>i?(0,g.newNegativeAttributeFilter)(t??e,t?r:n,l):(0,g.newPositiveAttributeFilter)(t??e,t?r:n,l)));function*Eo(){yield(0,Ll.Fm)([Pl.loadAttributeRequest.match,Pl.loadAttributeCancelRequest.match],So)}function*So(e){if(Pl.loadAttributeCancelRequest.match(e))return;const{payload:{correlation:t}}=e;try{const e=yield(0,Ll.Ys)(go),i=yield(0,Ll.RE)(Bl);yield(0,Ll.gz)(Pl.loadAttributeStart({correlation:t}));const n=yield(0,Ll.RE)(Rl,i,e),r=n.displayForms.find((e=>e.isPrimary)),l=yield(0,Ll.Ys)(po);return r?.ref&&l&&!(0,g.areObjRefsEqual)(e,r?.ref)&&!(0,g.areObjRefsEqual)(l,r?.ref)&&console.error("AttributeFilter: Filter's displayForm is not primary and provided displayAsLabel is not primary either -> filter will not work correctly. Please provide primary display form in filter definition."),r?.ref&&!(0,g.areObjRefsEqual)(e,r?.ref)&&(console.warn("AttributeFilter: Filter's displayForm is not primary -> migrating filter to primary label"),yield(0,Ll.gz)(Pl.transformFilterToPrimaryLabel({primaryLabelRef:r?.ref,secondaryLabelRef:e,correlation:t}))),yield(0,Ll.gz)(Pl.loadAttributeSuccess({attribute:n,correlation:t})),n}catch(e){yield(0,Ll.gz)(Pl.loadAttributeError({error:e,correlation:t}))}finally{(yield(0,Ll.By)())&&(yield(0,Ll.gz)(Pl.loadAttributeCancel({correlation:t})))}}async function Io(e,t){const i=t.map((e=>(0,g.filterObjRef)(e.attributeFilter)));return Promise.all(i.map((t=>e.backend.workspace(e.workspace).attributes().getAttributeByDisplayForm(t)))).catch((e=>{throw(0,D.convertError)(e)}))}var Fo=i(8297);class wo{allItems;items;limit;offset;totalCount;constructor(e,t=50,i=0){this.allItems=e,(0,Pr.kG)(i>=0,`paging offset must be non-negative, got: ${i}`),(0,Pr.kG)(t>0,`limit must be a positive number, got: ${t}`),this.items=e.slice(i,i+t),this.offset=Math.min(i,e.length),this.limit=t,this.totalCount=e.length}async next(){return 0===this.items.length?this:new wo(this.allItems,this.limit,this.offset+this.items.length)}async goTo(e){return 0===this.items.length?this:new wo(this.allItems,this.limit,e*this.items.length)}async all(){return[...this.allItems]}async allSorted(e){return[...this.allItems].sort(e)}}const ko=e=>!!e.capabilities.supportsElementUris,Ao=e=>t=>(0,g.attributeElementsIsEmpty)(e)?t:(0,g.isAttributeElementsByRef)(e)?t.filter((t=>!e.uris.includes(t.uri))):t.filter((t=>!e.values.includes(t.title))),Do=e=>t=>{if(!e)return t;if((0,el.isElementsQueryOptionsElementsByPrimaryDisplayFormValue)(e))throw new el.NotImplemented("Elements by primary display form value are not supported yet");return(0,el.isElementsQueryOptionsElementsByValue)(e)?t.filter((t=>e.values.includes(t.title))):t.filter((t=>e.uris.includes(t.uri)))},jo=e=>t=>e?t.filter((t=>t.title.toLowerCase().includes(e.toLowerCase()))):t;async function Oo(e,t,i,n,r){return n?.length?async function(e,t,i){let n=jo(e.search)(Do(e.elements)(Ao(t.hiddenElements)(i)));return"desc"===e.order&&(n=[...n].reverse()),new wo(n,e.limit,e.offset)}(t,i,n):async function(e,t,i,n){const{backend:r,workspace:l}=e,{displayFormRef:o,elements:a,limit:s,limitingAttributeFilters:d,limitingDateFilters:u,limitingMeasures:c,limitingValidationItems:m,offset:p,search:f,order:b,includeTotalCountWithoutFilters:y,excludePrimaryLabel:v=!0,filterByPrimaryLabel:C,signal:x}=t,E=(0,h.Z)(d)&&(0,h.Z)(u)&&(0,h.Z)(c)&&!f&&!v&&!b&&0===p;if(ko(r)&&(0,el.isElementsQueryOptionsElementsByValue)(a)&&E){const e=await async function(e,t,i,n,r){const l=n.values,o=[(0,g.newPositiveAttributeFilter)(i,l)];(0,g.attributeElementsIsEmpty)(r.hiddenElements)||o.push((0,g.newNegativeAttributeFilter)(i,r.hiddenElements));const a=await e.workspace(t).execution().forItems([(0,g.newAttribute)(i)],o).execute().catch((e=>{throw(0,D.convertError)(e)})),s=await a.readAll().catch((e=>{throw(0,D.convertError)(e)})),d=D.DataViewFacade.for(s),[u]=d.meta().attributeHeaders();return u.map((([e])=>({title:e.attributeHeaderItem.name,uri:e.attributeHeaderItem.uri})))}(r,l,o,a,i);return new wo(e,s,p)}let S=r.workspace(l).attributes().elements().forDisplayForm(o);const I={cacheId:n,filterByPrimaryLabel:C};s&&(S=S.withLimit(s)),p&&(S=S.withOffset(p)),f&&(I.filter=f),v&&!ko(r)&&(I.excludePrimaryLabel=!0),a&&(I.elements=ko(r)||(0,el.isValueBasedElementsQueryOptionsElements)(a)?a:{primaryValues:a.uris}),b&&(I.order=b),y&&(I.includeTotalCountWithoutFilters=y),(0,h.Z)(I)||(S=S.withOptions(I)),u?.length&&(S=S.withDateFilters(u));const F=function(e,t,i,n){return(0,g.attributeElementsIsEmpty)(i)?t??[]:[{attributeFilter:(0,g.newNegativeAttributeFilter)(e,i),overAttribute:n.ref},...t??[]]}(o,d,i.hiddenElements,i.attribute);return F.length&&(S=S.withAttributeFilters(F)),c?.length&&(S=S.withMeasures(c)),x&&S.withSignal(x),r.capabilities.supportsAttributeFilterElementsLimiting&&m?.length>0&&(S=S.withAvailableElementsOnly(m)),S.query().catch((e=>{throw(0,D.convertError)(e)}))}(e,t,i,r)}const Po=hl(tl,(e=>e.attribute.data)),No=hl(tl,(e=>e.attribute.status)),To=hl(tl,(e=>e.attribute.error));function*Mo(e,t){const i=yield(0,Ll.RE)(Bl),n=yield(0,Ll.Ys)(mo),r=yield(0,Ll.Ys)(Po),l=yield(0,Ll.Ys)(go),o=yield(0,Ll.Ys)(po),a=yield(0,Ll.Ys)(Yl),s=o&&!e.search?{filterByPrimaryLabel:!0}:{},d={...e,...s},u=yield(0,Ll.RE)(Oo,i,{displayFormRef:o||l,...d},{hiddenElements:n,attribute:r},a,t);return{elements:u.items,totalCount:u.totalCount,options:(0,Fo.Z)(d,"signal"),cacheId:u.cacheId}}function*Lo(){yield(0,Ll.Fm)([Pl.loadInitialElementsPageRequest.match,Pl.loadInitialElementsPageCancelRequest.match],Ro)}function*Ro(e){if(Pl.loadInitialElementsPageCancelRequest.match(e))return;const t=yield(0,Ll.RE)(Bl),i=new AbortController,{payload:{correlation:n}}=e;try{yield(0,Ll.gz)(Pl.loadInitialElementsPageStart({correlation:n}));const e=yield(0,Ll.Ys)(oo),r=yield(0,Ll.Ys)(lo),l={...e,signal:i.signal,excludePrimaryLabel:!1},o=yield(0,Ll.RE)(Mo,l,r),a=yield(0,Ll.RE)(Io,t,e.limitingAttributeFilters??[]);yield(0,Ll.gz)(Pl.setLimitingAttributeFiltersAttributes({attributes:a})),yield(0,Ll.gz)(Pl.setCacheId({cacheId:o.cacheId})),yield(0,Ll.gz)(Pl.loadInitialElementsPageSuccess({...o,correlation:n}))}catch(e){yield(0,Ll.gz)(Pl.loadInitialElementsPageError({error:e,correlation:n}))}finally{(yield(0,Ll.By)())&&(i.abort(),yield(0,Ll.gz)(Pl.loadInitialElementsPageCancel({correlation:n})))}}const Bo=hl(tl,(e=>e.elements.nextPageLoad.status)),_o=hl(tl,(e=>e.elements.nextPageLoad.error)),Vo=hl(ao,(e=>({...e,offset:e.offset+e.limit}))),Ho=hl(ao,$l,((e,t)=>e.offset+e.limit<t)),Zo=hl(oo,ao,((e,t)=>!(0,K.Z)((0,Fo.Z)(e,"offset","excludePrimaryLabel","filterByPrimaryLabel"),(0,Fo.Z)(t,"offset","excludePrimaryLabel","filterByPrimaryLabel"))));function*qo(){yield(0,Ll.Fm)([Pl.loadNextElementsPageRequest.match,Pl.loadNextElementsPageCancelRequest.match,Pl.loadInitialElementsPageRequest.match],Wo)}function*Wo(e){if(Pl.loadNextElementsPageCancelRequest.match(e)||Pl.loadInitialElementsPageRequest.match(e))return;const{payload:{correlation:t}}=e;if(yield(0,Ll.Ys)(Ho))try{yield(0,Ll.gz)(Pl.loadNextElementsPageStart({correlation:t}));const e=yield(0,Ll.Ys)(Vo),i=yield(0,Ll.Ys)(lo),n={...e,excludePrimaryLabel:!1},r=yield(0,Ll.RE)(Mo,n,i);yield(0,Ll.gz)(Pl.loadNextElementsPageSuccess({...r,correlation:t}))}catch(e){yield(0,Ll.gz)(Pl.loadNextElementsPageError({error:e,correlation:t}))}finally{(yield(0,Ll.By)())&&(yield(0,Ll.gz)(Pl.loadNextElementsPageCancel({correlation:t})))}}function*Go(){yield(0,Ll.ib)([Pl.loadCustomElementsRequest.match],Ko)}function*Ko({payload:{correlation:e,options:t}}){try{yield(0,Ll.gz)(Pl.loadCustomElementsStart({correlation:e}));const{result:i,canceled:n,anotherRequest:r}=yield(0,Ll.S3)({result:(0,Ll.RE)(Mo,t),anotherRequest:(0,Ll.qn)((t=>Pl.loadCustomElementsRequest.match(t)&&(!e||t.payload.correlation===e))),canceled:(0,Ll.qn)((t=>Pl.loadCustomElementsCancelRequest.match(t)&&(!e||t.payload.correlation===e)))});if(i)return yield(0,Ll.gz)(Pl.loadCustomElementsSuccess({...i,correlation:e})),i;(n||r)&&(yield(0,Ll.gz)(Pl.loadCustomElementsCancel({correlation:e})))}catch(t){yield(0,Ll.gz)(Pl.loadCustomElementsError({error:t,correlation:e}))}finally{(yield(0,Ll.By)())&&(yield(0,Ll.gz)(Pl.loadCustomElementsCancel({correlation:e})))}}function*Uo(){yield(0,Ll.Fm)([Pl.loadIrrelevantElementsRequest.match,Pl.loadIrrelevantElementsCancelRequest.match],zo)}function*zo(e){if(Pl.loadIrrelevantElementsCancelRequest.match(e))return;const t=new AbortController,{payload:{correlation:i}}=e;try{yield(0,Ll.gz)(Pl.loadIrrelevantElementsStart({correlation:i}));const e=yield(0,Ll.Ys)(nl),n=yield(0,Ll.Ys)(oo),r=yield(0,Ll.Ys)(rl),l=yield(0,Ll.Ys)(r?yl:xl),o="values"===e?{values:l}:{uris:l},a={...n,signal:t.signal,excludePrimaryLabel:!1,search:"",elements:o},s=(yield(0,Ll.RE)(Mo,a)).elements.map((e=>e.uri)),d=(0,Vl.Z)(l,s);yield(0,Ll.gz)(Pl.loadIrrelevantElementsSuccess({elementTitles:d,correlation:i}))}catch(e){yield(0,Ll.gz)(Pl.loadIrrelevantElementsError({error:e,correlation:i}))}finally{(yield(0,Ll.By)())&&(t.abort(),yield(0,Ll.gz)(Pl.loadIrrelevantElementsCancel({correlation:i})))}}function*$o(e){yield(0,Ll.rM)(So,Pl.loadAttributeRequest({correlation:e}));const{error:t}=yield(0,Ll.S3)({success:(0,Ll.qn)((t=>Pl.loadAttributeSuccess.match(t)&&t.payload.correlation===e)),error:(0,Ll.qn)((t=>Pl.loadAttributeError.match(t)&&t.payload.correlation===e)),cancel:(0,Ll.qn)((t=>Pl.loadAttributeCancel.match(t)&&t.payload.correlation===e))});if(t)throw t.payload.error}function*Yo(e){yield(0,Ll.rM)(Ro,Pl.loadInitialElementsPageRequest({correlation:e}));const{error:t}=yield(0,Ll.S3)({success:(0,Ll.qn)((t=>Pl.loadInitialElementsPageSuccess.match(t)&&t.payload.correlation===e)),error:(0,Ll.qn)((t=>Pl.loadInitialElementsPageError.match(t)&&t.payload.correlation===e)),cancel:(0,Ll.qn)((t=>Pl.loadInitialElementsPageCancel.match(t)&&t.payload.correlation===e))});if(t)throw t.payload.error}function*Qo(e){yield(0,Ll.rM)(zo,Pl.loadIrrelevantElementsRequest({correlation:e}));const{error:t}=yield(0,Ll.S3)({success:(0,Ll.qn)((t=>Pl.loadIrrelevantElementsSuccess.match(t)&&t.payload.correlation===e)),error:(0,Ll.qn)((t=>Pl.loadIrrelevantElementsError.match(t)&&t.payload.correlation===e)),cancel:(0,Ll.qn)((t=>Pl.loadIrrelevantElementsCancel.match(t)&&t.payload.correlation===e))});if(t)throw t.payload.error}function*Xo(e){const t=yield(0,Ll.Ys)(bo),i=(0,g.isAttributeElementsByRef)(t)?t.uris:t.values;if(0===i.length)return;const n=`${ll}${e}`;yield(0,Ll.rM)(Ko,Pl.loadCustomElementsRequest({options:{elements:t,offset:0,limit:Math.max(550,i.length),search:void 0,excludePrimaryLabel:!1},correlation:n}));const{error:r}=yield(0,Ll.S3)({success:(0,Ll.qn)((e=>Pl.loadCustomElementsSuccess.match(e)&&e.payload.correlation===n)),error:(0,Ll.qn)((e=>Pl.loadCustomElementsError.match(e)&&e.payload.correlation===n)),cancel:(0,Ll.qn)((e=>Pl.loadCustomElementsCancel.match(e)&&e.payload.correlation===n))});if(r)throw r.payload.error}function*Jo(e){const t=`initTotalCount_${e}`;yield(0,Ll.rM)(Ko,Pl.loadCustomElementsRequest({options:{limit:1,includeTotalCountWithoutFilters:!0,excludePrimaryLabel:!1},correlation:t}));const{success:i,error:n}=yield(0,Ll.S3)({success:(0,Ll.qn)((e=>Pl.loadCustomElementsSuccess.match(e)&&e.payload.correlation===t)),error:(0,Ll.qn)((e=>Pl.loadCustomElementsError.match(e)&&e.payload.correlation===t)),cancel:(0,Ll.qn)((e=>Pl.loadCustomElementsCancel.match(e)&&e.payload.correlation===t))});if(n)throw n.payload.error;i&&(yield(0,Ll.gz)(Pl.setElementsTotalCount({totalCount:i.payload.totalCount})))}function ea(e){return(0,h.Z)(e)||e.every((e=>!!(0,g.isNegativeAttributeFilter)(e.attributeFilter)&&(0,g.attributeElementsIsEmpty)((0,g.filterAttributeElements)(e.attributeFilter))))}function*ta(){yield(0,Ll.Fm)(Pl.init.match,ia)}function*ia({payload:{correlation:e}}){try{yield(0,Ll.gz)(Pl.initStart({correlation:e}));const t=yield(0,Ll.RE)(Bl),i=yield(0,Ll.Ys)(co),n=yield(0,Ll.Ys)(to),r=yield(0,Ll.Ys)(no),l=yield(0,Ll.Ys)(ro),o=yield(0,Ll.Ys)(kl),a=t.backend.capabilities.supportsShowingFilteredElements,s=!ea(n)||r.length>0||l.length>0,d=[Xo,Yo];i?.length>0?yield(0,Ll.RE)($o,e):d.unshift($o),s&&d.push(Jo),s&&!o&&a&&d.push(Qo),yield(0,Ll.$6)(d.map((t=>(0,Ll.RE)(t,e)))),yield(0,Ll.gz)(Pl.initSuccess({correlation:e}))}catch(t){yield(0,Ll.gz)(Pl.initError({error:t,correlation:e}))}finally{(yield(0,Ll.By)())&&(yield(0,Ll.$6)([(0,Ll.gz)(Pl.initCancel({correlation:e}))]))}}function*na(){yield(0,Ll.Fm)(Pl.initTotalCount.match,ra)}function*ra({payload:{correlation:e}}){try{yield(0,Ll.gz)(Pl.initTotalCountStart({correlation:e})),yield(0,Ll.RE)(Jo,e),yield(0,Ll.gz)(Pl.initTotalCountSuccess({correlation:e}))}catch(t){yield(0,Ll.gz)(Pl.initTotalCountError({error:t,correlation:e}))}finally{(yield(0,Ll.By)())&&(yield(0,Ll.gz)(Pl.initTotalCountCancel({correlation:e})))}}function*la(){try{yield(0,Ll.$6)([Eo,Lo,qo,Go,Uo,ta,na].map((e=>(0,Ll.rM)(e))))}catch(e){console.error("Root saga failed",e)}}const oa=[Pl.loadAttributeError.type,Pl.loadInitialElementsPageError.type,Pl.loadNextElementsPageError.type,Pl.loadCustomElementsError.type,Pl.initError.type],aa=(0,Bt.b)(Ml.ZP);function sa(e){const t=aa({context:{attributeFilterContext:e}}),i=(0,g.filterObjRef)(e.attributeFilter),n=(0,g.filterLocalIdentifier)(e.attributeFilter),r=(0,g.filterAttributeElements)(e.attributeFilter),l=(0,g.isAttributeElementsByValue)(r)?"values":"uris",o=(0,g.isAttributeElementsByValue)(r)?r.values:r.uris,a=(0,g.isNegativeAttributeFilter)(e.attributeFilter),s=function(e){const t=function(e){const{thunk:t=!0,immutableCheck:i=!0,serializableCheck:n=!0,actionCreatorCheck:r=!0}=e??{};let l=new Vr;return t&&("boolean"==typeof t?l.push(Lr.I):l.push((0,Lr.c)(t.extraArgument))),l},{reducer:i,middleware:n,devTools:r=!0,duplicateMiddlewareCheck:l=!0,preloadedState:o,enhancers:a}=e||{};let s,d;if("function"==typeof i)s=i;else{if(!(0,Mr.PO)(i))throw new Error(Xr(1));s=(0,Mr.UY)(i)}d="function"==typeof n?n(t):t();let u=Mr.qC;r&&(u=Br({trace:!1,..."object"==typeof r&&r}));const c=(e=>function(t){const{autoBatch:i=!0}=t??{};let n=new Vr(e);return i&&n.push(((e={type:"raf"})=>t=>(...i)=>{const n=t(...i);let r=!0,l=!1,o=!1;const a=new Set,s="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:qr(10):"callback"===e.type?e.queueNotification:qr(e.timeout),d=()=>{o=!1,l&&(l=!1,a.forEach((e=>e())))};return Object.assign({},n,{subscribe(e){const t=n.subscribe((()=>r&&e()));return a.add(e),()=>{t(),a.delete(e)}},dispatch(e){try{return r=!e?.meta?.RTK_autoBatch,l=!r,l&&(o||(o=!0,s(d))),n.dispatch(e)}finally{r=!0}}})})("object"==typeof i?i:void 0)),n})((0,Mr.md)(...d)),m=u(..."function"==typeof a?a(c):c());return(0,Mr.MT)(s,o,m)}({preloadedState:{...Dl,localIdentifier:n,displayFormRef:i,displayAsLabelRef:e.displayAsLabel,elementsForm:l,selection:{commited:{keys:o,isInverted:a,irrelevantKeys:[]},working:{keys:o,isInverted:a,irrelevantKeys:[]}},config:{hiddenElements:e.hiddenElements,staticElements:e.staticElements,withoutApply:e.withoutApply,enablePreserveSelectionDuringInit:e.enablePreserveSelectionDuringInit},originalFilter:e.attributeFilter},reducer:Ol,middleware:i=>{return i({thunk:!1,serializableCheck:{ignoredActions:oa,ignoredPaths:["initialization.error","attribute.error","elements.initialPageLoad.error","elements.nextPageLoad.error"]}}).concat([t,(n=e.eventListener,e=>t=>i=>{const r=t(i);return n(r,(t=>t(e.getState()))),r})]);var n},devTools:{name:`AttributeFilter state: ${(0,g.objRefToString)(i)}`}}),d=t.run(la);return{context:e,cancelRootSaga:()=>{d.cancel()},dispatch:e=>{s.dispatch(e)},select:e=>e(s.getState())}}const da=hl(tl,(e=>e.initialization.status)),ua=hl(tl,(e=>e.initialization.error)),ca=hl(tl,(e=>e.elements.initialPageLoad.status)),ma=hl(tl,(e=>e.elements.initialPageLoad.error));class ga{redux;config;callbacks;constructor(e){this.config=e,this.initializeBridge()}initializeBridge=()=>{this.callbacks=(()=>{const{registerCallback:e,registrations:t,unsubscribeAll:i}=(()=>{const e=[];return{registrations:{initStart:Tl(),initSuccess:Tl(),initError:Tl(),initCancel:Tl(),initTotalCountStart:Tl(),initTotalCountSuccess:Tl(),initTotalCountError:Tl(),initTotalCountCancel:Tl(),loadAttributeStart:Tl(),loadAttributeSuccess:Tl(),loadAttributeError:Tl(),loadAttributeCancel:Tl(),loadInitialElementsPageStart:Tl(),loadInitialElementsPageSuccess:Tl(),loadInitialElementsPageError:Tl(),loadInitialElementsPageCancel:Tl(),loadNextElementsPageStart:Tl(),loadNextElementsPageSuccess:Tl(),loadNextElementsPageError:Tl(),loadNextElementsPageCancel:Tl(),loadCustomElementsStart:Tl(),loadCustomElementsSuccess:Tl(),loadCustomElementsError:Tl(),loadCustomElementsCancel:Tl(),loadIrrelevantElementsStart:Tl(),loadIrrelevantElementsSuccess:Tl(),loadIrrelevantElementsError:Tl(),loadIrrelevantElementsCancel:Tl(),selectionChanged:Tl(),selectionCommitted:Tl(),update:Tl()},registerCallback:(t,i)=>{const n=i.subscribe(t);return e.push(n),n},unsubscribeAll:()=>{e.forEach((e=>{e()}))}}})();return{registrations:t,registerCallback:e,unsubscribeAll:i,eventListener:(e,i)=>{Pl.initStart.match(e)?t.initStart.invoke(e.payload):Pl.initSuccess.match(e)?t.initSuccess.invoke(e.payload):Pl.initError.match(e)?(Nl("initializing",e.payload.error),t.initError.invoke(e.payload)):Pl.initCancel.match(e)&&t.initCancel.invoke(e.payload),Pl.initTotalCountStart.match(e)?t.initTotalCountStart.invoke(e.payload):Pl.initTotalCountSuccess.match(e)?t.initTotalCountSuccess.invoke(e.payload):Pl.initTotalCountError.match(e)?(Nl("initializing total count",e.payload.error),t.initTotalCountError.invoke(e.payload)):Pl.initTotalCountCancel.match(e)&&t.initTotalCountCancel.invoke(e.payload),Pl.loadAttributeStart.match(e)?t.loadAttributeStart.invoke(e.payload):Pl.loadAttributeSuccess.match(e)?t.loadAttributeSuccess.invoke(e.payload):Pl.loadAttributeError.match(e)?(Nl("loading attribute",e.payload.error),t.loadAttributeError.invoke(e.payload)):Pl.loadAttributeCancel.match(e)&&t.loadAttributeCancel.invoke(e.payload),Pl.loadInitialElementsPageStart.match(e)?t.loadInitialElementsPageStart.invoke(e.payload):Pl.loadInitialElementsPageSuccess.match(e)?t.loadInitialElementsPageSuccess.invoke(e.payload):Pl.loadInitialElementsPageError.match(e)?(Nl("loading initial elements page",e.payload.error),t.loadInitialElementsPageError.invoke(e.payload)):Pl.loadInitialElementsPageCancel.match(e)&&t.loadInitialElementsPageCancel.invoke(e.payload),Pl.loadNextElementsPageStart.match(e)?t.loadNextElementsPageStart.invoke(e.payload):Pl.loadNextElementsPageSuccess.match(e)?t.loadNextElementsPageSuccess.invoke(e.payload):Pl.loadNextElementsPageError.match(e)?(Nl("loading next elements page",e.payload.error),t.loadNextElementsPageError.invoke(e.payload)):Pl.loadNextElementsPageCancel.match(e)&&t.loadNextElementsPageCancel.invoke(e.payload),Pl.loadCustomElementsStart.match(e)?t.loadCustomElementsStart.invoke(e.payload):Pl.loadCustomElementsSuccess.match(e)?t.loadCustomElementsSuccess.invoke(e.payload):Pl.loadCustomElementsError.match(e)?(Nl("loading custom elements",e.payload.error),t.loadCustomElementsError.invoke(e.payload)):Pl.loadCustomElementsCancel.match(e)&&t.loadCustomElementsCancel.invoke(e.payload),Pl.loadIrrelevantElementsStart.match(e)?t.loadIrrelevantElementsStart.invoke(e.payload):Pl.loadIrrelevantElementsSuccess.match(e)?t.loadIrrelevantElementsSuccess.invoke(e.payload):Pl.loadIrrelevantElementsError.match(e)?(Nl("loading irrelevant elements",e.payload.error),t.loadIrrelevantElementsError.invoke(e.payload)):Pl.loadIrrelevantElementsCancel.match(e)&&t.loadIrrelevantElementsCancel.invoke(e.payload),[Pl.changeSelection.match,Pl.revertSelection.match,Pl.invertSelection.match,Pl.clearSelection.match].some((t=>t(e)))&&t.selectionChanged.invoke({selection:i(Il)}),Pl.commitSelection.match(e)&&t.selectionCommitted.invoke({selection:i(Fl)}),[Pl.initStart.match,Pl.initSuccess.match,Pl.initError.match,Pl.initCancel.match,Pl.loadAttributeStart.match,Pl.loadAttributeSuccess.match,Pl.loadAttributeError.match,Pl.loadAttributeCancel.match,Pl.loadInitialElementsPageStart.match,Pl.loadInitialElementsPageSuccess.match,Pl.loadInitialElementsPageError.match,Pl.loadInitialElementsPageCancel.match,Pl.loadNextElementsPageStart.match,Pl.loadNextElementsPageSuccess.match,Pl.loadNextElementsPageError.match,Pl.loadNextElementsPageCancel.match,Pl.loadIrrelevantElementsStart.match,Pl.loadIrrelevantElementsSuccess.match,Pl.loadIrrelevantElementsError.match,Pl.loadIrrelevantElementsCancel.match,Pl.changeSelection.match,Pl.revertSelection.match,Pl.invertSelection.match,Pl.clearSelection.match,Pl.commitSelection.match,Pl.setLimit.match,Pl.setOrder.match,Pl.setSearch.match,Pl.setLimitingMeasures.match,Pl.setLimitingValidationItems.match,Pl.setLimitingAttributeFilters.match,Pl.setLimitingDateFilters.match].some((t=>t(e)))&&t.update.invoke()}}})(),this.redux=sa({...this.config,eventListener:(e,t)=>{this.callbacks.eventListener(e,t)}})};init=e=>{this.redux.dispatch(Pl.init({correlation:e}))};getInitStatus=()=>this.redux.select(da);getInitError=()=>this.redux.select(ua);onInitStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initStart);onInitSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initSuccess);onInitError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initError);onInitCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initCancel);initTotalCount=e=>{this.redux.dispatch(Pl.initTotalCount({correlation:e}))};getInitTotalCountStatus=()=>this.redux.select(Ul);getInitTotalCountError=()=>this.redux.select(zl);onInitTotalCountStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initTotalCountStart);onInitTotalCountSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initTotalCountSuccess);onInitTotalCountError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initTotalCountError);onInitTotalCountCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initTotalCountCancel);loadAttribute=e=>{this.redux.dispatch(Pl.loadAttributeRequest({correlation:e}))};cancelAttributeLoad=()=>{this.redux.dispatch(Pl.loadAttributeCancelRequest())};getAttribute=()=>this.redux.select(Po);getAttributeStatus=()=>this.redux.select(No);getAttributeError=()=>this.redux.select(To);onLoadAttributeStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadAttributeStart);onLoadAttributeSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadAttributeSuccess);onLoadAttributeError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadAttributeError);onLoadAttributeCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadAttributeCancel);loadInitialElementsPage=e=>{this.redux.dispatch(Pl.loadInitialElementsPageRequest({correlation:e}))};cancelInitialElementsPageLoad=()=>{this.redux.dispatch(Pl.loadInitialElementsPageCancelRequest())};getInitialElementsPageStatus=()=>this.redux.select(ca);getInitialElementsPageError=()=>this.redux.select(ma);onLoadInitialElementsPageStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadInitialElementsPageStart);onLoadInitialElementsPageSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadInitialElementsPageSuccess);onLoadInitialElementsPageError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadInitialElementsPageError);onLoadInitialElementsPageCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadInitialElementsPageCancel);loadNextElementsPage=e=>{this.redux.dispatch(Pl.loadNextElementsPageRequest({correlation:e}))};cancelNextElementsPageLoad(){this.redux.dispatch(Pl.loadNextElementsPageCancelRequest())}getNextElementsPageStatus=()=>this.redux.select(Bo);getNextElementsPageError=()=>this.redux.select(_o);onLoadNextElementsPageStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadNextElementsPageStart);onLoadNextElementsPageSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadNextElementsPageSuccess);onLoadNextElementsPageError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadNextElementsPageError);onLoadNextElementsPageCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadNextElementsPageCancel);loadCustomElements=(e,t)=>{this.redux.dispatch(Pl.loadCustomElementsRequest({options:e,correlation:t}))};cancelCustomElementsLoad(e){this.redux.dispatch(Pl.loadCustomElementsCancelRequest({correlation:e}))}onLoadCustomElementsStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadCustomElementsStart);onLoadCustomElementsSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadCustomElementsSuccess);onLoadCustomElementsError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadCustomElementsError);onLoadCustomElementsCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadCustomElementsCancel);loadIrrelevantElements=e=>{this.redux.dispatch(Pl.loadIrrelevantElementsRequest({correlation:e}))};cancelIrrelevantElementsLoad(e){this.redux.dispatch(Pl.loadIrrelevantElementsCancelRequest({correlation:e}))}onLoadIrrelevantElementsStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadIrrelevantElementsStart);onLoadIrrelevantElementsSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadIrrelevantElementsSuccess);onLoadIrrelevantElementsError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadIrrelevantElementsError);onLoadIrrelevantElementsCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadIrrelevantElementsCancel);setDisplayAsLabel=(e,t)=>{this.redux.dispatch(Pl.setDisplayAsLabel({displayAsLabel:e,correlation:t}))};getDisplayAsLabel=()=>this.redux.select(po);setDisplayForm=(e,t)=>{this.redux.dispatch(Pl.setDisplayFormRef({displayForm:e,correlation:t}))};getOffset=()=>this.redux.select(eo);setSearch=e=>{this.redux.dispatch(Pl.setSearch({search:e}))};getSearch=()=>this.redux.select(Ql);setLimit=e=>{this.redux.dispatch(Pl.setLimit({limit:e}))};getLimit=()=>this.redux.select(Jl);setOrder=e=>{this.redux.dispatch(Pl.setOrder({order:e}))};getOrder=()=>this.redux.select(Xl);setLimitingMeasures=e=>{this.redux.dispatch(Pl.setLimitingMeasures({filters:e}))};getLimitingMeasures=()=>this.redux.select(io);setLimitingValidationItems=e=>{this.redux.dispatch(Pl.setLimitingValidationItems({validateBy:e}))};getLimitingValidationItems=()=>this.redux.select(no);setLimitingAttributeFilters=e=>{this.redux.dispatch(Pl.setLimitingAttributeFilters({filters:e}))};getLimitingAttributeFilters=()=>this.redux.select(to);setLimitingDateFilters=e=>{this.redux.dispatch(Pl.setLimitingDateFilters({filters:e}))};getLimitingDateFilters=()=>this.redux.select(ro);getAllElements=()=>this.redux.select(Gl);getElementsByKey=e=>{const t=this.redux.select(Wl);return Zl(e,t)};getTotalCount=()=>this.redux.select(Kl);getTotalCountWithCurrentSettings=()=>this.redux.select($l);getLimitingAttributeFiltersAttributes=()=>this.redux.select(so);changeMultiSelection=({keys:e,isInverted:t,irrelevantKeys:i})=>{this.redux.dispatch(Pl.changeSelection({selection:e,isInverted:t,irrelevantSelection:i}))};revertMultiSelection=()=>{this.redux.dispatch(Pl.revertSelection())};commitMultiSelection=()=>{this.redux.dispatch(Pl.commitSelection())};invertMultiSelection=()=>{this.redux.dispatch(Pl.invertSelection())};clearMultiSelection=()=>{this.redux.dispatch(Pl.clearSelection())};getWorkingMultiSelection=()=>this.redux.select(Il);getCommittedMultiSelection=()=>this.redux.select(Fl);changeSingleSelection=e=>{this.redux.dispatch(Pl.changeSelection({isInverted:!1,selection:(0,Tr.Z)([e])}))};revertSingleSelection=()=>{this.redux.dispatch(Pl.revertSelection())};commitSingleSelection=()=>{this.redux.dispatch(Pl.commitSelection())};getWorkingSingleSelection=()=>{const[e,...t]=this.redux.select(yl);return(0,Pr.kG)(!t.length,"Trying to invoke single select method, but multiple elements are selected."),e};getCommittedSingleSelection=()=>{const[e,...t]=this.redux.select(xl);return(0,Pr.kG)(!t.length,"Trying to invoke single select method, but multiple elements are selected."),e};onMultiSelectionChanged=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.selectionChanged);onMultiSelectionCommitted=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.selectionCommitted);onSingleSelectionChanged=e=>this.callbacks.registerCallback((({selection:t})=>e({selection:t.keys[0]})),this.callbacks.registrations.selectionChanged);onSingleSelectionCommitted=e=>this.callbacks.registerCallback((({selection:t})=>e({selection:t.keys[0]})),this.callbacks.registrations.selectionCommitted);getIsWorkingSelectionEmpty=()=>this.redux.select(kl);getIsWorkingSelectionChanged=()=>this.redux.select(wl);getFilter=()=>this.redux.select(Co);getFilterToDisplay=()=>this.redux.select(xo);getOriginalFilter=()=>this.redux.select(ho);onUpdate=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.update);isLoadElementsOptionsChanged=()=>this.redux.select(Zo)}class pa{bridge;config;constructor(e){this.config=e,this.bridge=new ga(e)}validateStaticElementsLoad=()=>{(0,Pr.kG)(!(this.config.staticElements?.length&&this.getLimitingAttributeFilters()?.length),"Using limitingAttributeFilters is not supported when using static attribute elements"),(0,Pr.kG)(!(this.config.staticElements?.length&&this.getLimitingDateFilters()?.length),"Using limitingDateFilters is not supported when using static attribute elements"),(0,Pr.kG)(!(this.config.staticElements?.length&&this.getLimitingMeasures()?.length),"Using limitingMeasures is not supported when using static attribute elements"),(0,Pr.kG)(!(this.config.staticElements?.length&&this.getLimitingValidationItems()?.length),"Using limitingValidationItems is not supported when using static attribute elements")};init=(e=(0,Nr.Z)())=>{this.validateStaticElementsLoad(),this.bridge.init(e)};onInitStart=e=>this.bridge.onInitStart(e);onInitSuccess=e=>this.bridge.onInitSuccess(e);onInitError=e=>this.bridge.onInitError(e);onInitCancel=e=>this.bridge.onInitCancel(e);getInitStatus=()=>this.bridge.getInitStatus();getInitError=()=>this.bridge.getInitError();initTotalCount=(e=(0,Nr.Z)())=>{this.bridge.initTotalCount(e)};getInitTotalCountStatus=()=>this.bridge.getInitTotalCountStatus();getInitTotalCountError=()=>this.bridge.getInitTotalCountError();onInitTotalCountStart=e=>this.bridge.onInitTotalCountStart(e);onInitTotalCountSuccess=e=>this.bridge.onInitTotalCountSuccess(e);onInitTotalCountError=e=>this.bridge.onInitTotalCountError(e);onInitTotalCountCancel=e=>this.bridge.onInitTotalCountCancel(e);loadAttribute=(e=(0,Nr.Z)())=>{this.bridge.loadAttribute(e)};cancelAttributeLoad=()=>{this.bridge.cancelAttributeLoad()};getAttribute=()=>this.bridge.getAttribute();getAttributeError=()=>this.bridge.getAttributeError();getAttributeStatus=()=>this.bridge.getAttributeStatus();onLoadAttributeStart=e=>this.bridge.onLoadAttributeStart(e);onLoadAttributeSuccess=e=>this.bridge.onLoadAttributeSuccess(e);onLoadAttributeError=e=>this.bridge.onLoadAttributeError(e);onLoadAttributeCancel=e=>this.bridge.onLoadAttributeCancel(e);loadInitialElementsPage=(e=(0,Nr.Z)())=>{const t=this.bridge.getInitStatus();"error"!==t&&((0,Pr.kG)("success"===t,"Cannot call loadInitialElementsPage() before successful initialization."),this.validateStaticElementsLoad(),this.bridge.loadInitialElementsPage(e))};cancelInitialElementsPageLoad(){this.bridge.cancelInitialElementsPageLoad()}getInitialElementsPageStatus=()=>this.bridge.getInitialElementsPageStatus();getInitialElementsPageError=()=>this.bridge.getInitialElementsPageError();onLoadInitialElementsPageStart=e=>this.bridge.onLoadInitialElementsPageStart(e);onLoadInitialElementsPageSuccess=e=>this.bridge.onLoadInitialElementsPageSuccess(e);onLoadInitialElementsPageError=e=>this.bridge.onLoadInitialElementsPageError(e);onLoadInitialElementsPageCancel=e=>this.bridge.onLoadInitialElementsPageCancel(e);loadNextElementsPage=(e=(0,Nr.Z)())=>{(0,Pr.kG)("success"===this.bridge.getInitStatus(),"Cannot call loadNextElementsPage() before successful initialization."),(0,Pr.kG)("success"===this.bridge.getInitialElementsPageStatus(),"Cannot call loadNextElementsPage() before loadInitialElementsPage() completes."),(0,Pr.kG)(!this.bridge.isLoadElementsOptionsChanged(),"Cannot call loadNextElementsPage() when load element options were changed. When options are changed, you should call loadInitialElementsPage() first."),this.bridge.loadNextElementsPage(e)};cancelNextElementsPageLoad(){this.bridge.cancelNextElementsPageLoad()}getNextElementsPageStatus=()=>this.bridge.getNextElementsPageStatus();getNextElementsPageError=()=>this.bridge.getNextElementsPageError();onLoadNextElementsPageStart=e=>this.bridge.onLoadNextElementsPageStart(e);onLoadNextElementsPageSuccess=e=>this.bridge.onLoadNextElementsPageSuccess(e);onLoadNextElementsPageError=e=>this.bridge.onLoadNextElementsPageError(e);onLoadNextElementsPageCancel=e=>this.bridge.onLoadNextElementsPageCancel(e);loadCustomElements=(e,t)=>{this.bridge.loadCustomElements(e,t)};cancelCustomElementsLoad(e){this.bridge.cancelCustomElementsLoad(e)}onLoadCustomElementsStart=e=>this.bridge.onLoadCustomElementsStart(e);onLoadCustomElementsSuccess=e=>this.bridge.onLoadCustomElementsSuccess(e);onLoadCustomElementsError=e=>this.bridge.onLoadCustomElementsError(e);onLoadCustomElementsCancel=e=>this.bridge.onLoadCustomElementsCancel(e);loadIrrelevantElements=e=>{this.bridge.loadIrrelevantElements(e)};cancelIrrelevantElementsLoad(e){this.bridge.cancelIrrelevantElementsLoad(e)}onLoadIrrelevantElementsStart=e=>this.bridge.onLoadIrrelevantElementsStart(e);onLoadIrrelevantElementsSuccess=e=>this.bridge.onLoadIrrelevantElementsSuccess(e);onLoadIrrelevantElementsError=e=>this.bridge.onLoadIrrelevantElementsError(e);onLoadIrrelevantElementsCancel=e=>this.bridge.onLoadIrrelevantElementsCancel(e);setDisplayAsLabel=e=>{this.bridge.setDisplayAsLabel(e)};getDisplayAsLabel=()=>this.bridge.getDisplayAsLabel();setDisplayForm=e=>{this.bridge.setDisplayForm(e)};getOffset=()=>this.bridge.getOffset();setSearch=e=>{this.bridge.setSearch(e)};getSearch=()=>this.bridge.getSearch();setLimit=e=>{this.bridge.setLimit(e)};getLimit=()=>this.bridge.getLimit();setOrder=e=>{this.bridge.setOrder(e)};getOrder=()=>this.bridge.getOrder();setLimitingMeasures=e=>{this.bridge.setLimitingMeasures(e)};getLimitingMeasures=()=>this.bridge.getLimitingMeasures();setLimitingValidationItems=e=>{this.bridge.setLimitingValidationItems(e)};getLimitingValidationItems=()=>this.bridge.getLimitingValidationItems();setLimitingAttributeFilters=e=>{this.bridge.setLimitingAttributeFilters(e)};getLimitingAttributeFilters=()=>this.bridge.getLimitingAttributeFilters();setLimitingDateFilters=e=>{this.bridge.setLimitingDateFilters(e)};getLimitingDateFilters=()=>this.bridge.getLimitingDateFilters();getAllElements=()=>this.bridge.getAllElements();getElementsByKey=e=>this.bridge.getElementsByKey(e);getTotalElementsCount=()=>this.bridge.getTotalCount();getTotalElementsCountWithCurrentSettings=()=>this.bridge.getTotalCountWithCurrentSettings();getLimitingAttributeFiltersAttributes=()=>this.bridge.getLimitingAttributeFiltersAttributes();getFilter=()=>this.bridge.getFilter();getFilterToDisplay=()=>this.bridge.getFilterToDisplay();getOriginalFilter=()=>this.bridge.getOriginalFilter();onUpdate=e=>this.bridge.onUpdate(e)}class fa extends pa{constructor(e){super(e)}changeSelection=e=>{this.bridge.changeMultiSelection(e)};revertSelection=()=>{this.bridge.revertMultiSelection()};commitSelection=()=>{this.bridge.commitMultiSelection()};invertSelection=()=>{this.bridge.invertMultiSelection()};clearSelection=()=>{this.bridge.clearMultiSelection()};getWorkingSelection=()=>this.bridge.getWorkingMultiSelection();isWorkingSelectionEmpty=()=>this.bridge.getIsWorkingSelectionEmpty();isWorkingSelectionChanged=()=>this.bridge.getIsWorkingSelectionChanged();getCommittedSelection=()=>this.bridge.getCommittedMultiSelection();onSelectionChanged=e=>this.bridge.onMultiSelectionChanged(e);onSelectionCommitted=e=>this.bridge.onMultiSelectionCommitted(e)}class ha extends pa{static sanitizeConfig(e){const t=(0,g.filterAttributeElements)(e.attributeFilter),i=((0,g.isAttributeElementsByRef)(t)?t.uris:t.values)[0],n=(0,g.isAttributeElementsByRef)(t)?{uris:[i]}:{values:[i]};return{...e,attributeFilter:(0,g.isPositiveAttributeFilter)(e.attributeFilter)?(0,g.newPositiveAttributeFilter)((0,g.filterObjRef)(e.attributeFilter),n,(0,g.filterLocalIdentifier)(e.attributeFilter)):(0,g.newNegativeAttributeFilter)((0,g.filterObjRef)(e.attributeFilter),n,(0,g.filterLocalIdentifier)(e.attributeFilter))}}constructor(e){super(ha.sanitizeConfig(e))}changeSelection=e=>{this.bridge.changeSingleSelection(e)};revertSelection=()=>{this.bridge.revertSingleSelection()};commitSelection=()=>{this.bridge.commitSingleSelection()};getWorkingSelection=()=>this.bridge.getWorkingSingleSelection();isWorkingSelectionEmpty=()=>this.bridge.getIsWorkingSelectionEmpty();isWorkingSelectionChanged=()=>this.bridge.getIsWorkingSelectionChanged();getCommittedSelection=()=>this.bridge.getCommittedSingleSelection();onSelectionChanged=e=>this.bridge.onSingleSelectionChanged(e);onSelectionCommitted=e=>this.bridge.onSingleSelectionCommitted(e)}function ba(e,t,i,n={selectionMode:"multi",displayAsLabel:void 0,withoutApply:!1}){const{selectionMode:r,hiddenElements:l,staticElements:o,displayAsLabel:a,withoutApply:s,enablePreserveSelectionDuringInit:d}=n;return"multi"===r?new fa({backend:e,workspace:t,attributeFilter:i,hiddenElements:l,staticElements:o,displayAsLabel:a,withoutApply:s,enablePreserveSelectionDuringInit:d}):new ha({backend:e,workspace:t,attributeFilter:i,hiddenElements:l,staticElements:o,displayAsLabel:a,withoutApply:s,enablePreserveSelectionDuringInit:d})}function ya({isOpen:e,isDraggable:t}){return(0,W.jsx)("div",{className:re("gd-attribute-filter-dropdown-button__next","s-attribute-filter","gd-message error s-button-error",{"gd-is-active":e,"gd-is-draggable":t}),children:(0,W.jsx)(Ce,{id:"gs.filter.error"})})}const va=[{align:"cr cl",offset:{x:0,y:50}}];function Ca({children:e}){return(0,W.jsx)("span",{className:"gd-attribute-filter-dropdown-button-icon-tooltip",children:(0,W.jsxs)(z.BubbleHoverTrigger,{children:[(0,W.jsx)(z.IconQuestionMark,{height:16,width:14,className:"s-attribute-filter-tooltip-icon"}),(0,W.jsx)(z.Bubble,{className:"gd-attribute-filter-details s-attribute-filter-details-bubble",alignPoints:va,arrowStyle:{display:"none"},children:e})]})})}const xa=[{align:"tc bc",offset:{x:0,y:-2}},{align:"cc tc",offset:{x:0,y:10}},{align:"bl tr",offset:{x:-2,y:-8}}];function Ea({isOpen:e,title:t,selectedItemsCount:i,showSelectionCount:n=!0,subtitle:r,disabled:l,customIcon:o,isFiltering:a,isLoading:s,isLoaded:d,isError:u,isDraggable:c,icon:m,TooltipContentComponent:g,titleExtension:p,onClick:f,className:h,buttonRef:b,dropdownId:y}){const v=(0,le.Z)(),C=(0,G.useRef)(null),[x,E]=(0,G.useState)(!1),S=u?(0,W.jsx)("i",{className:"gd-icon gd-icon-circle-cross"}):m;(0,G.useEffect)((()=>{const e=C.current;if(!e)return;const t=Math.ceil(e.getBoundingClientRect().width)<e.scrollWidth;E(t)}),[r]);let I=t,F=r;s?(I=v.formatMessage({id:"loading"}),F=v.formatMessage({id:"loading"})):a&&(F=v.formatMessage({id:"filtering"}));const w=(0,G.useCallback)((e=>{(0,z.isActionKey)(e)&&l&&(e.preventDefault(),e.stopPropagation())}),[l]),k=(0,z.useIdPrefixed)("filter-locked-tooltip"),A=(0,W.jsxs)("div",{className:re("gd-attribute-filter-dropdown-button__next","s-attribute-filter",`s-${gn.gl(t)}`,{"gd-message error":u,"gd-is-filtering":a,"gd-is-active":e,"gd-is-loaded":d,"gd-is-draggable":c,disabled:l},h),"aria-haspopup":"dialog","aria-expanded":e,"aria-disabled":l,"aria-describedby":l?k:void 0,onClick:f,onKeyDown:w,"aria-controls":e?y:void 0,role:"button",tabIndex:0,ref:b,children:[S?(0,W.jsx)("div",{className:"gd-attribute-filter-dropdown-button-icon__next",children:S}):null,(0,W.jsxs)("div",{className:"gd-attribute-filter-dropdown-button-content__next",children:[(0,W.jsxs)("div",{className:"gd-attribute-filter-dropdown_button-title-content__next",children:[(0,W.jsx)("div",{className:"gd-attribute-filter-dropdown-button-title__next",children:(0,W.jsx)(z.ShortenedText,{tooltipAlignPoints:xa,className:"s-attribute-filter-button-title",children:`${I}`})}),p,(0,W.jsx)(fn,{customIcon:o,disabled:l}),g&&d?(0,W.jsx)(Ca,{children:(0,W.jsx)(g,{})}):null]}),(0,W.jsxs)("div",{className:"gd-attribute-filter-dropdown-button-subtitle__next",children:[(0,W.jsx)("span",{className:"gd-attribute-filter-dropdown-button-selected-items__next s-attribute-filter-button-subtitle",ref:C,children:F}),n&&x&&d?(0,W.jsx)("span",{className:"gd-attribute-filter-dropdown-button-selected-items-count__next",children:`(${i})`}):null]})]})]});return l?(0,W.jsx)(z.UiTooltip,{id:k,anchor:A,content:v.formatMessage({id:"filters.locked.filter.tooltip"}),triggerBy:["focus"],arrowPlacement:"top",showArrow:!0}):A}function Sa({onClick:e}){return(0,W.jsx)(Ea,{isLoading:!0,onClick:e})}function Ia({isApplyDisabled:e,onApplyButtonClick:t,onCancelButtonClick:i,withoutApply:n}){const r=(0,le.Z)(),l=r.formatMessage({id:"gs.list.cancel"}),o=r.formatMessage({id:"close"}),a=r.formatMessage({id:"gs.list.apply"}),s=n?"gd-attribute-filter-close-button__next close-button s-close":"gd-attribute-filter-cancel-button__next cancel-button s-cancel";return(0,W.jsxs)("div",{className:"gd-attribute-filter-dropdown-actions__next",children:[(0,W.jsx)("div",{className:"gd-attribute-filter-dropdown-actions-left-content__next"}),(0,W.jsxs)("div",{className:"gd-attribute-filter-dropdown-actions-right-content__next",children:[(0,W.jsx)(z.Button,{className:re(s,"gd-button-secondary gd-button-small"),onClick:i,value:n?o:l,title:n?o:l}),!n&&(0,W.jsx)(z.Button,{disabled:e,className:"gd-attribute-filter-apply-button__next gd-button-action gd-button-small s-apply",onClick:t,value:a,title:a})]})]})}const Fa=245,wa=(e,t)=>()=>{throw new D.UnexpectedSdkError(`Component: ${e} is missing in the ${t}.`)};function ka(e,t){return e.formattedTitle||e.title||`(${t.formatMessage({id:"empty_value"})})`}function Aa(e){return e.uri&&e.uri!==e.title?e.uri:""}function Da(e,t){return e.map((e=>ka(e,t))).join(", ")}function ja(e){return e.uri}function Oa(e,t,i){const n=0===t.length,r=n&&!e,l=!n&&e,o=!n&&!e;let a=i.formatMessage({id:"gs.list.all"});return l?a=`${i.formatMessage({id:"gs.list.all"})} ${i.formatMessage({id:"gs.list.except"})} ${Da(t,i)}`:o?a=Da(t,i):r&&(a=i.formatMessage({id:"gs.filterLabel.none"})),a}const Pa=(0,G.createContext)({ErrorComponent:wa("ErrorComponent","AttributeFilterComponentsContext"),LoadingComponent:wa("LoadingComponent","AttributeFilterComponentsContext"),DropdownButtonComponent:wa("DropdownButtonComponent","AttributeFilterComponentsContext"),DropdownBodyComponent:wa("DropdownBodyComponent","AttributeFilterComponentsContext"),DropdownActionsComponent:wa("DropdownActionsComponent","AttributeFilterComponentsContext"),ElementsSearchBarComponent:wa("ElementsSearchBarComponent","AttributeFilterComponentsContext"),ElementsSelectComponent:wa("ElementsSelectComponent","AttributeFilterComponentsContext"),ElementsSelectLoadingComponent:wa("ElementsSelectLoadingComponent","AttributeFilterComponentsContext"),ElementsSelectItemComponent:wa("ElementsSelectItemComponent","AttributeFilterComponentsContext"),ElementsSelectErrorComponent:wa("ElementsSelectErrorComponent","AttributeFilterComponentsContext"),ElementsSelectActionsComponent:wa("ElementsSelectActionsComponent","AttributeFilterComponentsContext"),EmptyResultComponent:wa("EmptyResultComponent","AttributeFilterComponentsContext"),StatusBarComponent:wa("StatusBarComponent","AttributeFilterComponentsContext")});Pa.displayName="AttributeFilterComponentsContext";const Na=()=>(0,G.useContext)(Pa);function Ta({children:e,...t}){return(0,W.jsx)(Pa.Provider,{value:t,children:e})}var Ma=i(25614),La=i(99111);const Ra="reset",Ba="parentFilters",_a="irrelevantSelection",Va="displayFormChanged",Ha=500,Za=e=>{const t=e.getWorkingSelection(),i=e.getCommittedSelection(),n=e.getInitStatus();return{attributeFilter:e.getFilter(),attributeFilterToDisplay:e.getFilterToDisplay(),initialization:{status:e.getInitStatus(),error:e.getInitError()},attribute:{data:e.getAttribute(),status:e.getAttributeStatus(),error:e.getAttributeError()},elements:{data:e.getAllElements(),totalCount:e.getTotalElementsCount(),totalCountWithCurrentSettings:e.getTotalElementsCountWithCurrentSettings(),initialPageLoad:{status:e.getInitialElementsPageStatus(),error:e.getInitialElementsPageError()},nextPageLoad:{status:e.getNextElementsPageStatus(),error:e.getNextElementsPageError()},options:{search:e.getSearch(),offset:e.getOffset(),limit:e.getLimit(),limitingAttributeFilters:e.getLimitingAttributeFilters(),limitingDateFilters:e.getLimitingDateFilters(),limitingMeasures:e.getLimitingMeasures(),limitingValidationItems:e.getLimitingValidationItems(),order:e.getOrder()}},selection:{committed:{elements:"success"===n?e.getElementsByKey(i.keys):[],keys:i.keys,isInverted:i.isInverted,irrelevantElements:"success"===n?e.getElementsByKey(i.irrelevantKeys):[]},working:{elements:"success"===n?e.getElementsByKey(t.keys):[],keys:t.keys,isInverted:t.isInverted,isChanged:e.isWorkingSelectionChanged(),isEmpty:e.isWorkingSelectionEmpty(),irrelevantElements:"success"===n?e.getElementsByKey(t.irrelevantKeys):[]}}}};const qa=e=>{const{backend:t,workspace:i,filter:n,displayAsLabel:r,hiddenElements:l,staticElements:o,withoutApply:a=!1,enablePreserveSelectionDuringInit:s}=e,[,d]=(0,G.useState)(0),u=()=>{d((e=>e+1))},c=(0,G.useRef)(null),m=(0,G.useCallback)((()=>{c.current=ba(t.withTelemetry("AttributeFilter",{workspace:i,filter:n,hiddenElements:l,staticElements:o}),i,n,{selectionMode:"multi",hiddenElements:l,staticElements:o,displayAsLabel:r,withoutApply:a,enablePreserveSelectionDuringInit:s})}),[t,i,n,l,o,r,a,s]);c.current||m();const p=c.current,f=(0,D.usePrevious)(e);return(0,G.useEffect)((()=>{const e=p.onUpdate((()=>{u()}));return t===f.backend&&i===f.workspace&&!((e,t)=>!(0,K.Z)((0,g.filterObjRef)(e),(0,g.filterObjRef)(t.getFilter()))&&!(0,K.Z)((0,g.filterObjRef)(e),(0,g.filterObjRef)(t.getOriginalFilter())))(n,p)&&(0,K.Z)(o,f.staticElements)&&(0,K.Z)(l,f.hiddenElements)||(m(),u()),()=>{e()}}),[t,i,n,o,l,f,p,m]),p},Wa=e=>{const{backend:t,workspace:i,filter:n,workingFilter:r,connectToPlaceholder:l,parentFilters:o,dependentDateFilters:a,parentFilterOverAttribute:s,validateElementsBy:d,resetOnParentFilterChange:u=!0,onApply:c,onSelect:m,onError:p,hiddenElements:f,staticElements:b,elementsOptions:y,displayAsLabel:v,selectionMode:C="multi",selectFirst:x=!1,enableImmediateAttributeFilterDisplayAsLabelMigration:E=!1,withoutApply:S,enablePreserveSelectionDuringInit:I}=e,F=(0,D.useBackendStrict)(t,"AttributeFilter"),w=(0,D.useWorkspaceStrict)(i,"AttributeFilter"),k=F.capabilities.supportsSettingConnectingAttributes,A=F.capabilities.supportsKeepingDependentFiltersSelection,j=F.capabilities.supportsCircularDependencyInFilters,O=F.capabilities.supportsShowingFilteredElements,P=F.capabilities.supportsSingleSelectDependentFilters,N=(0,G.useRef)(!1),T=(0,G.useCallback)((e=>{A&&j&&(N.current=e)}),[j,A]),{shouldIncludeLimitingFilters:M,setShouldIncludeLimitingFilters:L}=za(O),{filter:R,setConnectedPlaceholderValue:B}=((e,t)=>{const[i,n]=(0,D.usePlaceholder)(t),r=i??e,l=(0,G.useCallback)((e=>{t&&n(e)}),[t,n]);return{filter:r,setConnectedPlaceholderValue:l}})(n??r,l),_=((e,t,i)=>{const n=(0,D.useResolveValueWithPlaceholders)(e);return(0,G.useMemo)((()=>i?((e,t)=>{if(!e||!t)return[];const i="function"==typeof t?t:()=>t;return e.map(((e,t)=>({attributeFilter:e,overAttribute:i(e,t)}))).filter((e=>!(0,g.filterIsEmpty)(e.attributeFilter)))})(n,t):(e=>e?e.map((e=>({attributeFilter:e,overAttribute:null}))):[])(n)),[i,n,t])})(o,s,k),V=(e=>(0,G.useMemo)((()=>e?e.map((e=>{const{dataSet:t,granularity:i,from:n,to:r,localIdentifier:l,boundedFilter:o}=e.dateFilter;if((0,g.isRelativeDashboardDateFilter)(e)){if((0,g.isAllTimeDashboardDateFilter)(e))return;const a=Number.parseInt(n.toString(),10)??0,s=Number.parseInt(r.toString(),10)??0;return(0,g.newRelativeDateFilter)(t,i,a,s,l,o)}return(0,g.newAbsoluteDateFilter)(t,n.toString(),r.toString(),l)})).filter(Boolean):[]),[e]))(a),H=qa({backend:F,filter:R,workspace:w,hiddenElements:f,staticElements:b,displayAsLabel:v,withoutApply:S,enablePreserveSelectionDuringInit:I}),Z=function(e,t,i){const n=Za(e),r=n.initialization.status,l=n.initialization.error,o="loading"===r||"pending"===r,a=n.attribute.data,s=n.elements.initialPageLoad.status,d=n.elements.initialPageLoad.error,u="loading"===s,c=n.elements.nextPageLoad.status,m=n.elements.nextPageLoad.error,p="loading"===c,f=n.elements.data,b=n.elements.totalCount,y=n.elements.totalCountWithCurrentSettings,v=n.selection.working.isChanged,C=n.selection.working.isEmpty,x=n.selection.working.isInverted,E=n.selection.working.elements,S=n.selection.committed.isInverted,I=n.selection.committed.elements,F=n.elements.options.search,w=n.elements.options.limit,k=n.elements.options.limitingAttributeFilters,A=n.elements.options.limitingDateFilters,D=n.elements.options.limitingValidationItems,j=f.length<y?Math.min(w,y-f.length):0,O=E.length>Ha||!x&&C,P=O||!v,N=ea(k),T=i&&"success"===s&&!N,M=i&&"success"===s&&!(0,h.Z)(A),L=i&&"success"===s&&!(0,h.Z)(D),R=function(e){const[t,i]=(0,G.useState)(!1);return(0,G.useEffect)((()=>{const t=[e.onLoadInitialElementsPageStart(n),e.onLoadInitialElementsPageSuccess(r),e.onLoadInitialElementsPageError(r),e.onLoadInitialElementsPageCancel(r),e.onInitStart(n),e.onInitSuccess(r),e.onInitError(r),e.onInitCancel(r)];function n(e){e.correlation===Ba&&i(!0)}function r(e){e.correlation===Ba&&i(!1)}return()=>{t.forEach((e=>{e()}))}}),[e]),t}(e),B=e.getLimitingAttributeFiltersAttributes(),_=a?.displayForms??[],V=(0,g.filterObjRef)(n.attributeFilter),H=(0,g.filterObjRef)(n.attributeFilterToDisplay);return{attribute:a,offset:n.elements.options.offset,limit:w,isFiltering:R,isInitializing:o,initError:l,isLoadingInitialElementsPage:u,initialElementsPageError:d,isLoadingNextElementsPage:p,nextElementsPageError:m,nextElementsPageSize:j,elements:f,totalElementsCount:b,totalElementsCountWithCurrentSettings:y,isSelectionInvalid:O,isApplyDisabled:P,isWorkingSelectionChanged:v,isWorkingSelectionInverted:x,workingSelectionElements:E,isCommittedSelectionInverted:S,committedSelectionElements:I,searchString:F,isFilteredByParentFilters:T,parentFilterAttributes:B,isFilteredByDependentDateFilters:M,displayForms:_,currentDisplayFormRef:V,currentDisplayAsDisplayFormRef:H,enableShowingFilteredElements:t,irrelevantSelection:t?n.selection.working.irrelevantElements:[],limitingValidationItems:D,isFilteredByLimitingValidationItems:L}}(H,O,M);!function(e,t){const{onError:i}=t;(0,G.useEffect)((()=>{function t(e){i?.(e.error)}const n=[e.onInitError(t),e.onLoadAttributeError(t),e.onLoadInitialElementsPageError(t),e.onLoadNextElementsPageError(t),e.onLoadCustomElementsError(t)];return()=>{n.forEach((e=>{e()}))}}),[e,i])}(H,{onError:p}),function(e,t,i,n){const{filter:r,limitingAttributeFilters:l,limitingDateFilters:o,limitingValidationItems:a=Ga,shouldIncludeLimitingFilters:s,limit:d,resetOnParentFilterChange:u,setConnectedPlaceholderValue:c,onApply:m,onSelect:p,selectionMode:f,shouldReloadElements:b,setShouldReloadElements:y,displayAsLabel:v,withoutApply:C,isSelectionInvalid:x}=t;(0,G.useEffect)((()=>{s&&l.length>0&&e.setLimitingAttributeFilters(l),s&&o.length>0&&e.setLimitingDateFilters(o),s&&a?.length>0&&e.setLimitingValidationItems(a),d&&e.setLimit(d),e.init()}),[e]),(0,G.useEffect)((()=>{const t=s&&!(0,K.Z)(l,e.getLimitingAttributeFilters()),d=s&&!(0,K.Z)(o,e.getLimitingDateFilters()),E=((e,t)=>!Ka(e,t.getFilter())&&!Ka(e,t.getFilterToDisplay()))(r,e),S=s&&!(0,K.Z)(a,e.getLimitingValidationItems()),I={filter:r,limitingAttributeFilters:l,limitingAttributesChanged:t,limitingDateFilters:o,limitingDateFiltersChanged:d,filterChanged:E,setConnectedPlaceholderValue:c,onApply:m,onSelect:p,selectionMode:f,setShouldReloadElements:y,limitingValidationItems:a,limitingValidationItemsChanged:S,displayAsLabel:v,withoutApply:C,isSelectionInvalid:x},F=u?function(e,{filter:t,limitingAttributeFilters:i,limitingAttributesChanged:n,filterChanged:r,setConnectedPlaceholderValue:l,onApply:o,onSelect:a,selectionMode:s,displayAsLabel:d,isSelectionInvalid:u},c){const m=0===i.length||!c;if((0,Pr.kG)(m,"It is not possible to automatically reset dependent filters with current backend. Please set attribute filter to not reset on parent filter change (resetOnParentFilterChange prop)."),n){e.changeSelection({keys:[],isInverted:"single"!==s}),e.setLimitingAttributeFilters(i),e.commitSelection();const t=e.getFilter(),n=e.getCommittedSelection()?.isInverted;l(t);const r=e.getDisplayAsLabel();return a?.(t,n,s,[],r,!1,{isSelectionInvalid:u}),o?.(t,n,s,[],r,!1,{isSelectionInvalid:u}),"init-parent"}if(r){const i=(0,g.filterObjRef)(t),n=(0,g.filterAttributeElements)(t),r=(0,g.isAttributeElementsByValue)(n)?n.values:n.uris,l=(0,g.isNegativeAttributeFilter)(t);return e.setDisplayForm(i),e.setDisplayAsLabel(d),e.changeSelection({keys:r,isInverted:l}),e.commitSelection(),"init-self"}}(e,I,n):function(e,{filter:t,limitingAttributeFilters:i,limitingAttributesChanged:n,limitingDateFilters:r,limitingDateFiltersChanged:l,filterChanged:o,setConnectedPlaceholderValue:a,setShouldReloadElements:s,limitingValidationItemsChanged:d,limitingValidationItems:u,displayAsLabel:c,withoutApply:m},p){if(n||o||d||l){const f=(0,g.filterAttributeElements)(t),b=(0,g.isAttributeElementsByValue)(f)?f.values:f.uris,y=(0,g.isNegativeAttributeFilter)(t),v=e.getCommittedSelection().irrelevantKeys,C=(0,Vl.Z)(v,b),x=e.getLimitingDateFilters().length!==r.length||(0,Ma.Z)(e.getLimitingDateFilters(),r,(e=>(0,g.objRefToString)((0,g.filterObjRef)(e)))).length>0,E=e.getLimitingAttributeFilters().length!==i.length,S=p&&(E||x||!(0,h.Z)(C)),I=S?{irrelevantKeys:[]}:{};if(o||!p||S){const i=(0,g.filterObjRef)(t);e.setDisplayForm(i),e.setDisplayAsLabel(c),m&&e.setSearch(""),e.changeSelection({keys:b,isInverted:y,...I}),e.commitSelection()}if(e.setLimitingAttributeFilters(i),e.setLimitingValidationItems(u),e.setLimitingDateFilters(r),a(e.getFilter()),S)return"init-self";if(n||l||d)return s(!0),"init-parent";if(m&&(!(0,h.Z)(e.getAllElements())||!o))return;return"init-self"}}(e,I,i);!function(e,t,i,n,r){if("init-parent"===t){if(i)return void(n.current&&("success"===e.getInitStatus()?(e.loadInitialElementsPage(Ba),e.loadIrrelevantElements(_a)):e.init(Ba),r(!1)));"success"===e.getInitStatus()?(e.initTotalCount(Ba),e.loadInitialElementsPage(Ba)):e.init(Ba)}"init-self"===t&&e.init()}(e,F,i,b,y)}),[r,l,o,u,e,m,p,c,f,i,n,y,a,v,b,C,s,x]);const E=(0,G.useRef)(!1);(0,G.useEffect)((()=>(E.current=!0,()=>{E.current=!1})),[]),(0,G.useEffect)((()=>{const t=(0,g.filterObjRef)(e.getOriginalFilter()),i=e.getDisplayAsLabel(),n=i&&!(0,g.areObjRefsEqual)(t,i);if("loading"!==e.getInitStatus()&&(v&&!i||!v&&n||v&&i&&!(0,g.areObjRefsEqual)(v,i))){const t=e.onLoadCustomElementsSuccess((i=>{i.correlation.includes(Va)&&(t(),m?.(e.getFilter(),e.getCommittedSelection()?.isInverted,f,e.getElementsByKey(e.getWorkingSelection().keys),v,!1,{isSelectionInvalid:x}))}));return e.setDisplayAsLabel(v),e.init(Va),()=>{E.current||t()}}}),[e,v,m,f,x])}(H,{filter:R,limitingAttributeFilters:_,limitingDateFilters:V,limitingValidationItems:d,shouldIncludeLimitingFilters:M,limit:y?.limit,onApply:c,onSelect:m,setConnectedPlaceholderValue:B,resetOnParentFilterChange:u,selectionMode:C,shouldReloadElements:N,setShouldReloadElements:T,displayAsLabel:v,withoutApply:S,isSelectionInvalid:S&&Z.isSelectionInvalid},A,j);const q=function(e,t,i,n,r){const{onApply:l,onSelect:o,setConnectedPlaceholderValue:a,selectionMode:s,shouldReloadElements:d,setShouldReloadElements:u,shouldIncludeLimitingFilters:c,setShouldIncludeLimitingFilters:m,limitingAttributeFilters:p,limitingDateFilters:f,withoutApply:b,isSelectionInvalid:y,filter:v}=t,C=Za(e),x=(0,G.useCallback)(((t,i,n)=>{const r=e.getFilter(),l=e.getWorkingSelection()?.isInverted,o=e.getWorkingSelection().keys,a=!l&&(0,h.Z)(o)||o.length>Ha,d=e.getDisplayAsLabel(),{attribute:u}=C;if(function(e,t){const i=t.find((e=>e.isPrimary));if(!i)throw new Error("No primary display form found.");const n=(0,g.filterObjRef)(e);return!!n&&(0,g.areObjRefsEqual)(n,i.ref)}(r,u.data?.displayForms))t?.(r,l,s,e.getElementsByKey(o),d,i,{isSelectionInvalid:a,applyToWorkingOnly:n});else{const i=u.data?.displayForms.find((e=>e.isPrimary));if(!i)throw new Error("No primary display form found.");const c=function(e,t){return(0,g.isPositiveAttributeFilter)(e)?{positiveAttributeFilter:{...e.positiveAttributeFilter,displayForm:t}}:{negativeAttributeFilter:{...e.negativeAttributeFilter,displayForm:t}}}(r,i.ref);t?.(c,l,s,e.getElementsByKey(o),d,!0,{isSelectionInvalid:a,applyToWorkingOnly:n})}}),[e,C,s]),E=(0,G.useCallback)(((t,i)=>{const n=t.map((e=>e.uri)),r="single"===s?{irrelevantKeys:[]}:{};e.changeSelection({keys:n,isInverted:i,...r}),b&&e.commitSelection(),x(o,!1,!1)}),[e,s,x,o,b]),S=(0,G.useCallback)((0,La.Z)((t=>{e.getSearch()!==t&&(e.setSearch(t),e.loadInitialElementsPage("search"))}),200),[e]),I=(0,G.useCallback)((()=>{e.loadNextElementsPage()}),[e]),F=(0,G.useCallback)((()=>{if(b){if(y&&b){const t=(0,g.filterAttributeElements)(v),i=(0,g.isAttributeElementsByValue)(t)?t.values:t.uris,n=(0,g.isNegativeAttributeFilter)(v);e.changeSelection({keys:i,isInverted:n})}}else e.revertSelection();e.getSearch().length>0&&(e.setSearch(""),e.loadInitialElementsPage(Ra)),i&&!c&&(m(!0),u(!0),e.setLimitingAttributeFilters(p),e.setLimitingDateFilters(f))}),[e,p,f,m,u,c,i,b,y,v]),w=(0,G.useCallback)(((t,i)=>{e.commitSelection(),a(e.getFilter()),x(l,t,i)}),[e,a,x,l]),k=(0,G.useCallback)(((e=!1,t=!1)=>{b&&!e||w(!1,t)}),[b,w]),A=(0,G.useCallback)((()=>{d.current&&(e.loadInitialElementsPage(Ra),e.isWorkingSelectionEmpty()||e.loadIrrelevantElements(_a),u(!1))}),[e,d,u]),D=(0,G.useCallback)((()=>{i&&(m(!1),e.changeSelection({...e.getWorkingSelection(),irrelevantKeys:[]}),e.setLimitingAttributeFilters([]),e.setLimitingValidationItems([]),e.setLimitingDateFilters([]),e.loadInitialElementsPage("showFilteredElements"))}),[e,m,i]),j=(0,G.useCallback)((()=>{if(n&&i){const t=e.getWorkingSelection(),i=(0,Vl.Z)(t.keys,t.irrelevantKeys);e.changeSelection({...t,keys:i,irrelevantKeys:[]})}}),[e,n,i]),O=(0,G.useCallback)((()=>w(!0,!1)),[w]);return $a(e,O,r),{onApply:k,onLoadNextElementsPage:I,onSearch:S,onSelect:E,onReset:F,onOpen:A,onShowFilteredElements:D,onClearIrrelevantSelection:j}}(H,{onApply:c,onSelect:m,setConnectedPlaceholderValue:B,selectionMode:C,shouldReloadElements:N,setShouldReloadElements:T,shouldIncludeLimitingFilters:M,setShouldIncludeLimitingFilters:L,limitingAttributeFilters:_,limitingDateFilters:V,withoutApply:S,isSelectionInvalid:Z.isSelectionInvalid,filter:R},O,A,E);Ua(H,{selectFirst:x,onApply:q.onApply,onSelect:q.onSelect,selectionMode:C,withoutApply:S});const W=function(e,t,i,n){const r="single"===e,l=(0,h.Z)(i),o=(0,g.isPositiveAttributeFilter)(t)&&(0,g.attributeElementsCount)((0,g.filterAttributeElements)(t))<2;if(r){if(!o)return console.error("Provided 'filter' or 'connectToPlaceholder' property is not compatible with given single selection mode. It needs to be positive filter with max one item selected in attribute elements"),!1;if(!l&&!n)return console.error("Parent filtering can not be used together with single selection mode. Use only one of these properties at the same time."),!1}return!0}(C,R,_,P)?{}:{initError:new D.UnexpectedSdkError};return{...Z,...q,...W}},Ga=[],Ka=(e,t)=>{if(!e||!t)return!1;const i=(0,g.isPositiveAttributeFilter)(e)===(0,g.isPositiveAttributeFilter)(t),n=(0,g.areObjRefsEqual)((0,g.filterObjRef)(e),(0,g.filterObjRef)(t)),r=(l=(0,g.filterAttributeElements)(e),o=(0,g.filterAttributeElements)(t),(0,g.isAttributeElementsByRef)(l)&&(0,g.isAttributeElementsByRef)(o)&&(0,K.Z)([...l.uris].sort(),[...o.uris].sort())||(0,g.isAttributeElementsByValue)(l)&&(0,g.isAttributeElementsByValue)(o)&&(0,K.Z)([...l.values].sort(),[...o.values].sort()));var l,o;return i&&n&&r},Ua=(e,t)=>{const{selectFirst:i,selectionMode:n,onApply:r,onSelect:l,withoutApply:o}=t,a=e.getCommittedSelection().keys,s=e.getInitStatus(),d=e.getAllElements(),u=e.getFilter();(0,G.useEffect)((()=>{if(i&&"single"===n&&((0,h.Z)(a)||a.length>1)&&"success"===s&&!(0,h.Z)(d)){const t=[d[0].uri];e.changeSelection({keys:t,isInverted:!1,irrelevantKeys:[]}),e.commitSelection(),r(!0,!1)}}),[i,n,a,s,d,u,e,r,l,o])},za=e=>{const[t,i]=(0,G.useState)(!0);return{shouldIncludeLimitingFilters:t,setShouldIncludeLimitingFilters:(0,G.useCallback)((t=>{e&&i(t)}),[e])}},$a=(e,t,i)=>{const n=(0,G.useRef)(e.getDisplayAsLabel()),r=(0,G.useRef)(!1),l=e.getInitStatus();!i||r.current||"success"!==l||(0,g.areObjRefsEqual)(n.current,e.getDisplayAsLabel())||(0,g.areObjRefsEqual)((0,g.filterObjRef)(e.getOriginalFilter()),(0,g.filterObjRef)(e.getFilter()))||(r.current=!0,t(!0),console.warn("AttributeFilter: Filter label migration reported to filter's parent app. Original filter label:",(0,g.filterObjRef)(e.getOriginalFilter()),"new filter label:",(0,g.filterObjRef)(e.getFilter()),"new filter displayAsLabel:",e.getDisplayAsLabel()))},Ya=(0,G.createContext)(null);Ya.displayName="AttributeFilterContext";const Qa=()=>(0,G.useContext)(Ya);function Xa(e){const{children:t,fullscreenOnMobile:i,title:n,selectionMode:r,selectFirst:l,disabled:o,customIcon:a,withoutApply:s,workingFilter:d,overlayPositionType:u}=e,c=Wa(e),m=n??c?.attribute?.title??"";return(0,W.jsx)(Ya.Provider,{value:{...c,fullscreenOnMobile:i,title:m,selectionMode:r,selectFirst:l,disabled:o,customIcon:a,withoutApply:s,workingFilter:d,overlayPositionType:u},children:t})}function Ja({onApplyButtonClick:e,onCancelButtonClick:t,width:i=Fa}){const{DropdownActionsComponent:n,ElementsSelectComponent:r}=Na(),{withoutApply:l}=Qa(),o=(0,z.useMediaQuery)("mobileDevice"),{initialElementsPageError:a,nextElementsPageError:s,isApplyDisabled:d,isWorkingSelectionChanged:u,isWorkingSelectionInverted:c,isLoadingInitialElementsPage:m,isLoadingNextElementsPage:g,onLoadNextElementsPage:p,elements:f,onSearch:h,onSelect:b,nextElementsPageSize:y,searchString:v,totalElementsCount:C,totalElementsCountWithCurrentSettings:x,workingSelectionElements:E,parentFilterAttributes:S,isFilteredByParentFilters:I,isFilteredByDependentDateFilters:F,isFilteredByLimitingValidationItems:w,fullscreenOnMobile:k,selectionMode:A,title:D,enableShowingFilteredElements:j,onShowFilteredElements:O,irrelevantSelection:P,onClearIrrelevantSelection:N}=Qa(),T=(0,G.useMemo)((()=>S.map((e=>e.title))),[S]),M={width:o&&k?"100%":i},L=(0,G.useCallback)(((t,i)=>{b(t,i),"single"===A&&e()}),[b,e,A]),R=(0,G.useCallback)((e=>{(0,z.isEscapeKey)(e)&&(e.stopPropagation(),t())}),[t]);return(0,W.jsxs)("div",{className:"gd-attribute-filter-dropdown-body__next",style:M,onKeyDown:R,children:[(0,W.jsx)(r,{isInverted:c,isLoading:m,isLoadingNextPage:g,items:f,onLoadNextPage:p,onSearch:h,onSelect:L,onApplyButtonClick:e,isApplyDisabled:d,nextPageSize:y,searchString:v,selectedItems:E,totalItemsCount:C,totalItemsCountWithCurrentSettings:x,parentFilterTitles:T,isFilteredByParentFilters:I,error:a??s,attributeTitle:D,enableShowingFilteredElements:j,isFilteredByDependentDateFilters:F,isFilteredByLimitingValidationItems:w,onShowFilteredElements:O,irrelevantSelection:P,onClearIrrelevantSelection:N,withoutApply:l}),(0,W.jsx)(n,{onApplyButtonClick:e,onCancelButtonClick:t,isApplyDisabled:d,isSelectionChanged:u,withoutApply:l})]})}function es(){return(0,W.jsx)("div",{})}function ts(e){return(0,W.jsx)(z.InvertableSelectAllCheckbox,{...e})}function is(e){return(0,W.jsx)(z.InvertableSelectSearchBar,{...e})}const ns=28,rs=40,ls=10,os=20,as=32;function ss({items:e,totalItemsCount:t,totalItemsCountWithCurrentSettings:i,isInverted:n,selectedItems:r,onSelect:l,searchString:o,onSearch:a,isLoading:s,isLoadingNextPage:d,nextPageSize:u,onLoadNextPage:c,error:m,attributeTitle:g,isFilteredByParentFilters:p,parentFilterTitles:f,enableShowingFilteredElements:h,onShowFilteredElements:b,irrelevantSelection:y,onClearIrrelevantSelection:v,onApplyButtonClick:C,isApplyDisabled:x,isFilteredByDependentDateFilters:E,isFilteredByLimitingValidationItems:S,withoutApply:I}){const F=(0,le.Z)(),w=(0,z.useMediaQuery)("mobileDevice"),{fullscreenOnMobile:k,selectionMode:A,attribute:j}=Qa(),{ElementsSelectLoadingComponent:O,ElementsSelectItemComponent:P,ElementsSelectErrorComponent:N,EmptyResultComponent:T,ElementsSearchBarComponent:M,ElementsSelectActionsComponent:L,StatusBarComponent:R}=Na(),[B,_]=(0,G.useState)(void 0),V=k&&w?rs:ns,H=w&&k,Z=(0,D.usePrevious)(i),q=(0,G.useMemo)((()=>Math.max((Math.min(Z,ls)||1)*V,os)+as),[Z,V]),K=(0,G.useMemo)((()=>{if(!j)return null;const e=j.displayForms.find((e=>!!e.isPrimary));return e?.title}),[j]),U=(0,G.useCallback)((()=>{_("show"),b()}),[b,_]);return(0,W.jsx)(z.UiAutofocus,{refocusKey:B,children:(0,W.jsx)(z.InvertableSelectVirtualised,{className:"gd-attribute-filter-elements-select__next",adaptiveWidth:!0,adaptiveHeight:H,isSingleSelect:"single"===A,items:e,totalItemsCount:i,itemHeight:V,getItemKey:ja,getItemTitle:e=>ka(e,F),isItemQuestionMarkEnabled:e=>!!Aa(e),isInverted:n,selectedItems:r,selectedItemsLimit:Ha,onSelect:l,onApplyButtonClick:C,searchString:o,onSearch:a,canSubmitOnKeyDown:!x,isLoading:s,error:m,isLoadingNextPage:d,nextPageItemPlaceholdersCount:u,onLoadNextPage:c,numberOfHiddenSelectedItems:y.length,renderItem:e=>(0,W.jsx)(P,{...e,primaryLabelTitle:K,fullscreenOnMobile:k}),renderError:()=>(0,W.jsx)(N,{error:m}),renderLoading:()=>(0,W.jsx)(O,{height:q}),renderNoData:({height:e})=>(0,W.jsx)(T,{height:e,isFilteredByParentFilters:p,isFilteredByDependentDateFilters:E,searchString:o,totalItemsCount:t,parentFilterTitles:f,enableShowingFilteredElements:h}),renderSearchBar:({onSearch:e,searchString:t})=>(0,W.jsx)(M,{onSearch:e,searchString:t,isSmall:!(w&&k)}),renderStatusBar:({getItemTitle:e,isInverted:t,selectedItems:n,selectedItemsLimit:r})=>(0,W.jsx)(R,{getItemTitle:e,isFilteredByParentFilters:p,isFilteredByDependentDateFilters:E,isFilteredByLimitingValidationItems:S,isInverted:t,parentFilterTitles:f,selectedItems:n,totalElementsCountWithCurrentSettings:i,selectedItemsLimit:r,attributeTitle:g,enableShowingFilteredElements:h,onShowFilteredElements:U,irrelevantSelection:y,onClearIrrelevantSelection:v,withoutApply:I}),renderActions:({checked:e,onChange:t,onToggle:i,isFiltered:n,totalItemsCount:r,isPartialSelection:l,isVisible:o})=>(0,W.jsx)(L,{isVisible:o,checked:e,onChange:t,onToggle:i,isFiltered:n,totalItemsCount:r,isPartialSelection:l,isApplyDisabled:x,onApplyButtonClick:C})})})}function ds(){return(0,W.jsx)(z.Message,{type:"error",children:(0,W.jsx)(Ce,{id:"gs.list.error"})})}var us=(0,ae.Z)((function(e,t,i){return t=t.toLowerCase(),e+(i?(0,A.Z)(t):t)}));function cs({primaryLabelTitle:e,itemPrimaryTitle:t,id:i,isFocused:n=!1,renderAsCell:r=!0,ariaLabel:l}){const{formatMessage:o}=(0,le.Z)();return e&&t?(0,W.jsx)("div",{role:r?"gridcell":"div",children:(0,W.jsx)(z.UiTooltip,{hoverOpenDelay:0,hoverCloseDelay:0,arrowPlacement:"left",optimalPlacement:!0,offset:15,isOpen:!!n||void 0,triggerBy:["focus","hover"],anchor:(0,W.jsx)("div",{className:re("gd-list-item-only gd-item-title-tooltip-wrapper",{"gd-list-item-only--isFocusedSelectItem":n}),id:i,tabIndex:n?0:-1,role:"button","aria-label":l??o({id:"attributesDropdown.alternativeValueTooltip"},{label:e,value:t}),children:(0,W.jsx)(z.UiIcon,{color:"currentColor",layout:"block",size:13,type:"question",ariaHidden:!0})}),content:(0,W.jsxs)("div",{className:"gd-item-title-tooltip",children:[(0,W.jsx)("h4",{children:e}),(0,W.jsx)("p",{children:t})]})})}):null}const ms=[{align:"bl tc",offset:{x:7,y:0}}];function gs({item:e,isSelected:t,focusedAction:i,onSelect:n,onSelectOnly:r,onDeselect:l,primaryLabelTitle:o,index:a}){const s=(0,le.Z)(),d=(0,G.useCallback)((()=>{t?l():n()}),[n,l,t]),u=(0,G.useCallback)((e=>{e.stopPropagation(),r()}),[r]),c=re("gd-attribute-filter-elements-select-item__next","gd-list-item","has-only-visible","s-attribute-filter-list-item",`s-attribute-filter-list-item-${us(e.title)}`,`s-attribute-filter-list-item-${us(e.title)}-${us(e.uri)}`,{"is-selected":t},{"s-attribute-filter-list-item-selected":t},{"gd-attribute-filter-list-empty-item":!e.title},{"gd-attribute-filter-list-item--isFocused":!!i,"gd-attribute-filter-list-item--isFocusedSelectItem":"selectItem"===i}),m=re("input-checkbox-label",{"gd-empty-value-label":!e.title}),g=ka(e,s),p=Aa(e),f=z.ScopedIdStore.useContextStoreOptional((e=>e.makeId));return(0,W.jsxs)("div",{className:c,onClick:d,role:"row",tabIndex:-1,"aria-rowindex":a,"aria-label":g,children:[(0,W.jsx)("div",{role:"gridcell",className:"gd-attribute-filter-list-item-label",children:(0,W.jsxs)("label",{className:m,children:[(0,W.jsx)("input",{tabIndex:"selectItem"===i?0:-1,id:f?.({item:e,specifier:z.SELECT_ITEM_ACTION}),type:"checkbox",className:"input-checkbox",readOnly:!0,checked:t}),(0,W.jsx)("span",{className:"input-label-text",children:g})]})}),!e.title&&(0,W.jsx)("div",{className:"gd-empty-list-item-tooltip-wrapper",children:(0,W.jsxs)(z.BubbleHoverTrigger,{className:"gd-empty-list-item-tooltip",showDelay:0,hideDelay:0,children:[(0,W.jsx)("span",{className:"gd-icon-circle-question gd-empty-value-tooltip-icon"}),(0,W.jsx)(z.Bubble,{className:"bubble-primary gd-empty-item-bubble",alignTo:".gd-empty-value-tooltip-icon",alignPoints:ms,children:(0,W.jsx)(Ce,{id:"attributesDropdown.empty.item.tooltip"})})]})}),(0,W.jsx)("div",{className:re("gd-list-item-only",{"gd-list-item-only--isFocusedSelectItem":"only"===i}),role:"gridcell",children:(0,W.jsx)(z.UiLink,{onClick:u,id:f?.({item:e,specifier:"only"}),variant:"primary",flipUnderline:!0,role:"button","aria-label":s.formatMessage({id:"attributesDropdown.onlyLabel"},{itemTitle:g}),tabIndex:"only"===i?0:-1,children:(0,W.jsx)(Ce,{id:"gs.list.only"})})}),(0,W.jsx)(cs,{primaryLabelTitle:o,itemPrimaryTitle:p,isFocused:"questionMark"===i,id:f?.({item:e,specifier:"questionMark"})})]})}function ps({height:e}){return(0,W.jsx)(z.LoadingMask,{height:e})}function fs(){const e=(0,le.Z)();return(0,W.jsx)(z.NoData,{noDataLabel:e.formatMessage({id:"attributesDropdown.noData"})})}function hs(){const e=(0,le.Z)();return(0,W.jsx)(z.NoData,{noDataLabel:e.formatMessage({id:"attributesDropdown.noResultsMatch"})})}const bs=[{align:"cr cl"}],ys={"cr cl":[10,0]};function vs({parentFilterTitles:e,searchString:t,enableShowingFilteredElements:i}){return i&&t.length>0?(0,W.jsx)(hs,{}):i?(0,W.jsx)("div",{className:"gd-attribute-filter-empty-filtered-result__next s-attribute-filter-dropdown-all-items-filtered",children:(0,W.jsxs)(z.BubbleHoverTrigger,{showDelay:0,hideDelay:0,children:[(0,W.jsxs)("div",{className:"gd-filtered-message__next",children:[(0,W.jsx)(Ce,{id:"attributesDropdown.noRelevantValues"}),(0,W.jsx)("span",{className:"gd-icon-circle-question"})]}),(0,W.jsx)(z.Bubble,{className:"bubble-primary gd-attribute-filter-dropdown-bubble__next s-attribute-filter-dropdown-bubble",alignPoints:bs,arrowOffsets:ys,children:(0,W.jsx)(Ce,{id:"attributesDropdown.noRelevantValues.tooltip",values:{break:(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("br",{}),(0,W.jsx)("br",{})]})}})})]})}):(0,W.jsx)("div",{className:"gd-attribute-filter-empty-filtered-result__next s-attribute-filter-dropdown-all-items-filtered",children:(0,W.jsxs)(z.BubbleHoverTrigger,{showDelay:0,hideDelay:0,children:[(0,W.jsxs)("div",{className:"gd-filtered-message__next",children:[(0,W.jsx)(Ce,{id:"attributesDropdown.allItemsFiltered"}),(0,W.jsx)("span",{className:"gd-icon-circle-question"})]}),(0,W.jsx)(z.Bubble,{className:"bubble-primary gd-attribute-filter-dropdown-bubble__next s-attribute-filter-dropdown-bubble",alignPoints:bs,arrowOffsets:ys,children:(0,W.jsx)(Ce,{id:"attributesDropdown.itemsFiltered.tooltip",values:{filters:e.join(", "),strong:e=>(0,W.jsx)("strong",{children:e})}})})]})})}function Cs({height:e,totalItemsCount:t,searchString:i,isFilteredByParentFilters:n,isFilteredByDependentDateFilters:r,parentFilterTitles:l=[],enableShowingFilteredElements:o=!1}){let a=null;const s=(0,G.useMemo)((()=>({height:e})),[e]);return 0===t?a=(0,W.jsx)(fs,{}):n||r?a=(0,W.jsx)(vs,{parentFilterTitles:l,searchString:i,enableShowingFilteredElements:o}):i.length>0&&(a=(0,W.jsx)(hs,{})),(0,W.jsx)("div",{className:"gd-attribute-filter-empty-result__next",style:s,children:a})}function xs(){return(0,W.jsx)("div",{style:{marginTop:-5}})}function Es({item:e,onSelectOnly:t,isSelected:i,focusedAction:n,fullscreenOnMobile:r=!1,primaryLabelTitle:l}){const o=(0,le.Z)(),a=(0,G.useCallback)((e=>{e.stopPropagation(),t()}),[t]),s=(0,G.useMemo)((()=>ka(e,o)),[e,o]),d=Aa(e),u=(0,z.useMediaQuery)("mobileDevice"),c=re("gd-single-selection-attribute-filter-elements-select-item","gd-list-item","has-only-visible","s-attribute-filter-list-item",`s-attribute-filter-list-item-${us(e.title)}`,{"is-selected":i},{"s-attribute-filter-list-item-selected":i},{"gd-attribute-filter-list-item--isFocused":!!n,"gd-attribute-filter-single-selection-list-item--isFocusedSelectItem":"selectItem"===n});return(0,W.jsxs)("div",{className:c,onClick:a,children:[(0,W.jsxs)("div",{className:"gd-attribute-filter-list-item-label ",children:[(0,W.jsx)("span",{children:s}),i&&u&&r?(0,W.jsx)("span",{className:"gd-customizable-checkmark-mobile-navigation-wrapper",children:(0,W.jsx)(z.CustomizableCheckmark,{className:"gd-customizable-checkmark-mobile-navigation"})}):null]}),(0,W.jsx)(cs,{primaryLabelTitle:l,itemPrimaryTitle:d,renderAsCell:!1,ariaLabel:o.formatMessage({id:"attributesDropdown.alternativeValueTooltipShort"},{label:l,value:d})})]})}const Ss=[{align:"cr cl"}],Is={"cr cl":[10,0]};function Fs({parentFilterTitles:e}){const t=(0,G.useMemo)((()=>e?e.join(", "):""),[e]);return(0,W.jsx)("div",{className:"gd-attribute-filter-filtered-status__next s-attribute-filter-dropdown-items-filtered",children:(0,W.jsxs)(z.BubbleHoverTrigger,{showDelay:0,hideDelay:0,children:[(0,W.jsxs)("div",{className:"gd-filtered-message__next",children:[" ",(0,W.jsx)(Ce,{id:"attributesDropdown.itemsFiltered"}),(0,W.jsx)("span",{className:"gd-icon-circle-question"})]}),(0,W.jsx)(z.Bubble,{className:"bubble-primary gd-attribute-filter-dropdown-bubble__next s-attribute-filter-dropdown-bubble",alignPoints:Ss,arrowOffsets:Is,children:(0,W.jsx)(Ce,{id:"attributesDropdown.itemsFiltered.tooltip",values:{filters:t,strong:e=>(0,W.jsx)("strong",{children:e})}})})]})})}const ws=[{align:"bl tl"}],ks={"bl tl":[-10,12]};function As({parentFilterTitles:e,irrelevantSelection:t,onClear:i,showClearButton:n=!0}){const r=(0,G.useMemo)((()=>e?e.join(", "):""),[e]);return 0===t.length?null:(0,W.jsxs)(z.Message,{className:"gd-attribute-filter-status-irrelevant-message s-attribute-filter-status-irrelevant-message",type:"warning",children:[(0,W.jsxs)(z.BubbleHoverTrigger,{showDelay:0,hideDelay:0,children:[(0,W.jsx)(Ce,{id:"attributesDropdown.irrelevantValues",values:{nbsp:(0,W.jsx)(W.Fragment,{children:" "})}}),(0,W.jsx)(z.Bubble,{className:"bubble-primary gd-attribute-filter-dropdown-bubble__next s-attribute-filter-dropdown-bubble",alignPoints:ws,arrowOffsets:ks,children:(0,W.jsx)(Ce,{id:"attributesDropdown.irrelevantValues.tooltip",values:{parents:r,strong:e=>(0,W.jsx)("strong",{children:e})}})})]}),n?(0,W.jsx)("button",{className:"gd-action-clear s-action-clear",onClick:e=>{e.preventDefault(),e.stopPropagation(),i()},children:(0,W.jsx)(Ce,{id:"attributesDropdown.irrelevantValues.clear"})}):null]})}function Ds({isInverted:e,selectedItems:t,getItemTitle:i,selectedItemsLimit:n,showSelectionStatus:r}){return(0,W.jsx)(z.InvertableSelectStatusBar,{className:"gd-attribute-filter-selection-status__next",isInverted:e,getItemTitle:i,selectedItems:t,selectedItemsLimit:n,showSelectionStatus:r})}const js=[{align:"bl tl"}],Os={"bl tl":[0,8]};function Ps({attributeTitle:e,onClick:t,parentFilterTitles:i,isFilteredByLimitingValidationItems:n,className:r}){const l=(0,le.Z)(),o=i.length>0?n?j.relevantValuesParentFiltersLimitsTooltip:j.relevantValuesParentFiltersTooltip:j.relevantValuesLimitsTooltip,a=(0,G.useMemo)((()=>i?i.join(", "):""),[i]);return(0,W.jsxs)("div",{className:re("gd-attribute-filter-status-show-all s-attribute-filter-status-show-all",r),children:[(0,W.jsxs)(z.BubbleHoverTrigger,{showDelay:0,hideDelay:0,children:[(0,W.jsx)("div",{className:"gd-relevant-values-text",children:(0,W.jsx)(Ce,{id:"attributesDropdown.relevantValues",values:{nbsp:(0,W.jsx)(W.Fragment,{children:" "})}})}),(0,W.jsx)(z.Bubble,{className:"bubble-primary gd-attribute-filter-dropdown-bubble__next s-attribute-filter-dropdown-bubble",alignPoints:js,arrowOffsets:Os,children:l.formatMessage(o,{child:e,parents:a,strong:e=>(0,W.jsx)("strong",{children:e})})})]}),(0,W.jsx)("button",{className:"gd-action-show-all s-action-show-all",onClick:e=>{e.preventDefault(),t()},children:(0,W.jsx)(Ce,{id:"attributesDropdown.showAll"})})]})}function Ns({attributeTitle:e,isFilteredByParentFilters:t,parentFilterTitles:i,totalElementsCountWithCurrentSettings:n,getItemTitle:r,isInverted:l,selectedItems:o,selectedItemsLimit:a,enableShowingFilteredElements:s=!1,onShowFilteredElements:d=(()=>{}),irrelevantSelection:u=[],onClearIrrelevantSelection:c=(()=>{}),isFilteredByLimitingValidationItems:m,isFilteredByDependentDateFilters:g,withoutApply:p=!1}){return s?(0,W.jsxs)("div",{className:"gd-attribute-filter-status-bar__next",children:[t||m||g?(0,W.jsx)(Ps,{attributeTitle:e,onClick:d,parentFilterTitles:i,isFilteredByLimitingValidationItems:m}):null,(0,W.jsx)(Ds,{isInverted:l,getItemTitle:r,selectedItems:o,selectedItemsLimit:a,showSelectionStatus:!p}),(0,W.jsx)(As,{parentFilterTitles:i,irrelevantSelection:u,onClear:c})]}):(0,W.jsxs)("div",{className:"gd-attribute-filter-status-bar__next",children:[(0,W.jsx)(Ds,{isInverted:l,getItemTitle:r,selectedItems:o,selectedItemsLimit:a,showSelectionStatus:!p}),t&&n>0?(0,W.jsx)(Fs,{parentFilterTitles:i}):null]})}function Ts({enableShowingFilteredElements:e,isFilteredByParentFilters:t,parentFilterTitles:i,totalElementsCountWithCurrentSettings:n,attributeTitle:r,onShowFilteredElements:l,irrelevantSelection:o,isFilteredByLimitingValidationItems:a,isFilteredByDependentDateFilters:s}){return e?(0,W.jsxs)("div",{className:"gd-attribute-filter-status-bar__next",children:[t||a||s?(0,W.jsx)(Ps,{attributeTitle:r,onClick:l,parentFilterTitles:i,className:"no-divider",isFilteredByLimitingValidationItems:a}):null,(0,W.jsx)(As,{parentFilterTitles:i,irrelevantSelection:o,showClearButton:!1})]}):(0,W.jsx)("div",{className:"gd-attribute-filter-status-bar__next",children:t&&n>0?(0,W.jsx)(Fs,{parentFilterTitles:i}):null})}const Ms={ErrorComponent:ya,LoadingComponent:Sa,DropdownButtonComponent:Ea,DropdownBodyComponent:Ja,DropdownActionsComponent:Ia,ElementsSearchBarComponent:is,ElementsSelectComponent:ss,ElementsSelectItemComponent:gs,ElementsSelectErrorComponent:ds,ElementsSelectLoadingComponent:ps,ElementsSelectActionsComponent:ts,EmptyResultComponent:Cs,StatusBarComponent:Ns},Ls=({selectionMode:e})=>({...Ms,..."single"===e?{ElementsSelectItemComponent:Es,ElementsSelectActionsComponent:xs,StatusBarComponent:Ts,DropdownActionsComponent:es}:{}});function Rs(e){const{resetOnParentFilterChange:t=!0,children:i,locale:n,backend:r,workspace:l,title:o,filter:a,workingFilter:s,displayAsLabel:d,connectToPlaceholder:u,parentFilters:c,dependentDateFilters:m,parentFilterOverAttribute:g,validateElementsBy:p,hiddenElements:f,staticElements:h,fullscreenOnMobile:b=!1,selectionMode:y="multi",selectFirst:v=!1,disabled:C,customIcon:x,withoutApply:E=!1,overlayPositionType:S,onApply:I,onSelect:F,onError:w,ErrorComponent:k,LoadingComponent:A,DropdownButtonComponent:j,DropdownBodyComponent:O,DropdownActionsComponent:P,ElementsSearchBarComponent:N,ElementsSelectComponent:T,ElementsSelectItemComponent:M,ElementsSelectErrorComponent:L,ElementsSelectLoadingComponent:R,ElementsSelectActionsComponent:B,EmptyResultComponent:_,StatusBarComponent:V,enableImmediateAttributeFilterDisplayAsLabelMigration:H=!1,enablePreserveSelectionDuringInit:Z}=e,q=Ls(e);return(0,W.jsx)(D.IntlWrapper,{locale:n,children:(0,W.jsx)(Ta,{ErrorComponent:k??q.ErrorComponent,LoadingComponent:A??q.LoadingComponent,DropdownButtonComponent:j??q.DropdownButtonComponent,DropdownBodyComponent:O??q.DropdownBodyComponent,DropdownActionsComponent:P??q.DropdownActionsComponent,ElementsSearchBarComponent:N??q.ElementsSearchBarComponent,ElementsSelectComponent:T??q.ElementsSelectComponent,ElementsSelectItemComponent:M??q.ElementsSelectItemComponent,ElementsSelectErrorComponent:L??q.ElementsSelectErrorComponent,ElementsSelectLoadingComponent:R??q.ElementsSelectLoadingComponent,ElementsSelectActionsComponent:B??q.ElementsSelectActionsComponent,EmptyResultComponent:_??q.EmptyResultComponent,StatusBarComponent:V??q.StatusBarComponent,children:(0,W.jsx)(Xa,{backend:r,workspace:l,title:o,filter:a,workingFilter:s,displayAsLabel:d,connectToPlaceholder:u,resetOnParentFilterChange:t,parentFilters:c,dependentDateFilters:m,parentFilterOverAttribute:g,validateElementsBy:p,onApply:I,onSelect:F,onError:w,hiddenElements:f,staticElements:h,fullscreenOnMobile:b,selectionMode:y,selectFirst:v,disabled:C,customIcon:x,enableImmediateAttributeFilterDisplayAsLabelMigration:H,withoutApply:E,overlayPositionType:S,enablePreserveSelectionDuringInit:Z,children:i})})})}const Bs=[{align:"bc tc"}];function _s({children:e,errorMessage:t}){return t?(0,W.jsx)("div",{className:"gd-attribute-filter-button-wrapper",children:(0,W.jsxs)(z.BubbleHoverTrigger,{children:[e,(0,W.jsx)(z.Bubble,{className:"bubble-negative gd-attribute-filter-button-error s-attribute-filter-error-bubble",alignPoints:Bs,children:(0,W.jsx)("span",{children:(0,W.jsx)(Ce,{id:"gs.filter.error.tooltip"})})})]})}):(0,W.jsx)(W.Fragment,{children:e})}const Vs=[{align:"bl tl"},{align:"tr tl"},{align:"br tr",offset:{x:-11}},{align:"tl bl",offset:{x:0,y:0}},{align:"tr tl",offset:{x:0,y:-50}},{align:"tr tl",offset:{x:0,y:-100}},{align:"tr tl",offset:{x:0,y:-200}},{align:"tr tl",offset:{x:0,y:-300}},{align:"tr tl",offset:{x:0,y:-400}}];function Hs(){const{DropdownButtonComponent:e,DropdownBodyComponent:t,LoadingComponent:i,ErrorComponent:n}=Na(),{title:r,isInitializing:l,initError:o,isFiltering:a,committedSelectionElements:s,workingSelectionElements:d,onReset:u,onApply:c,onOpen:m,fullscreenOnMobile:g,isCommittedSelectionInverted:p,isWorkingSelectionInverted:f,selectionMode:h,disabled:b,customIcon:y,withoutApply:v,isSelectionInvalid:C,overlayPositionType:x}=Qa(),E=(0,z.useMediaQuery)("mobileDevice"),S=function(e,t){const i=(0,G.useRef)(void 0);return t&&(i.current=e),i.current??e}(v?f:p,!C||!v),I=v?d:s,F=function(e,t){return Oa(e,t,(0,le.Z)())}(S,I),w="single"!==h&&0!==I.length,k=(0,G.useCallback)((e=>{(0,z.isArrowKey)(e)&&e.stopPropagation()}),[]);return(0,W.jsx)(z.Dropdown,{className:"gd-attribute-filter__next",closeOnParentScroll:!0,closeOnMouseDrag:!0,closeOnOutsideClick:!0,enableEventPropagation:!0,alignPoints:Vs,fullscreenOnMobile:g,autofocusOnOpen:!0,overlayPositionType:x,renderButton:({toggleDropdown:t,isOpen:s,buttonRef:d,dropdownId:u})=>{const c=b?()=>{}:t;return(0,W.jsxs)("div",{className:re({"gd-is-mobile":g&&E&&s}),children:[!!l&&(0,W.jsx)(i,{onClick:c,isOpen:s}),!l&&!!o&&!r&&(0,W.jsx)(n,{message:o.message,error:o}),!l&&!!r&&(0,W.jsx)(_s,{errorMessage:o?.message,children:(0,W.jsx)(e,{title:r,subtitle:F,isFiltering:a,isLoaded:!l,isLoading:l,isOpen:s,selectedItemsCount:I.length,showSelectionCount:w,disabled:b,customIcon:y,onClick:c,isError:!!o,buttonRef:d,dropdownId:u})})]})},onOpenStateChanged:e=>{e?m():u()},renderBody:({closeDropdown:e,ariaAttributes:i})=>(0,W.jsx)("div",{role:"dialog","aria-label":r,id:i.id,className:re({"gd-is-mobile":g&&E}),style:{height:g&&E?"100%":"auto"},onKeyDown:k,children:(0,W.jsx)(t,{onApplyButtonClick:()=>{c(!0,v),e()},onCancelButtonClick:e})})})}function Zs(e){return function({connectToPlaceholder:e,filter:t,onApply:i,hiddenElements:n,staticElements:r}){(0,Pr.kG)(!(t&&e),"It's not possible to combine 'filter' property with 'connectToPlaceholder' property. Either provide a filter, or a placeholer."),(0,Pr.kG)(!(t&&!i),"It's not possible to use 'filter' property without 'onApply' property. Either provide 'onApply' callback or use placeholders."),(0,Pr.kG)(t||e,"No filter or placeholer provided. Provide one of the properties: 'filter', 'connectToPlaceholder'."),(0,Pr.kG)(!(!(0,h.Z)(n)&&(0,h.Z)(r)),"Hidden elements are not supported by the current backend implementation.")}({backend:(0,D.useBackendStrict)(e.backend,"AttributeFilter"),...e}),(0,W.jsx)(Rs,{...e,children:(0,W.jsx)(Hs,{})})}function qs({title:e,isLoading:t,isFiltering:i,...n}){const r=(0,le.Z)();let l=e;return t?l=r.formatMessage({id:"loading"}):i&&(l=r.formatMessage({id:"filtering"})),(0,W.jsx)(z.DropdownButton,{className:"gd-attribute-filter-dropdown-simple-button__next",disabled:t,value:l,...n})}function Ws({isOpen:e,subtitle:t,title:i,selectedItemsCount:n,onClick:r,isLoading:l,isFiltering:o,showSelectionCount:a=!0}){const s=(0,le.Z)();let d=`${i}: ${t}`;(l||o)&&(d=s.formatMessage({id:"loading"}));const u=re("gd-button-primary","button-dropdown","dropdown-button","gd-button-small","gd-button",{"is-dropdown-open":e},{"is-active":e}),c=re("gd-button-icon",{"gd-icon-navigateup":e},{"gd-icon-navigatedown":!e}),m=a?`(${n})`:void 0;return(0,W.jsx)("div",{className:"gd-attribute-filter-dropdown-simple-button__next",children:(0,W.jsxs)("button",{className:u,onClick:r,title:d,children:[(0,W.jsx)("span",{className:"gd-button-text",children:(0,W.jsxs)("div",{className:"gd-attribute-filter-dropdown-simple-button-text",children:[(0,W.jsx)("div",{className:"gd-attribute-filter-dropdown-simple-button-selection",children:d}),m?(0,W.jsx)("div",{className:"gd-attribute-filter-dropdown-simple-button-selection-count",children:m}):null]})}),(0,W.jsx)("span",{className:c,role:"button-icon"})]})})}function Gs(e){const{titleWithSelection:t,...i}=e,n=t?Ws:qs;return(0,W.jsx)(Zs,{...i,DropdownButtonComponent:e.DropdownButtonComponent??n})}function Ks(e){const{attributeFilterMode:t,...i}=e;return"hidden"===t?null:(0,W.jsx)(Zs,{...i,disabled:"readonly"===t,DropdownButtonComponent:e.DropdownButtonComponent??Ea})}function Us({isOpened:e,text:t,toggleDropdown:i}){const n=(0,le.Z)(),r=re("gd-button-primary","gd-button-small","button-dropdown","dropdown-button","gd-attribute-filter-display-form-button","s-attribute-display-form-button",{"is-active":e}),l=e?"gd-icon-navigateup":"gd-icon-navigatedown",o=n.formatMessage({id:"attributesDropdown.display_as"},{title:t});return(0,W.jsx)(z.Button,{className:r,title:o,value:o,onClick:i,iconRight:l})}const zs=e=>{switch(e){case"GDC.link":return"gd-icon-hyperlink-warning";case"GDC.image":return"gd-icon-image";case"GDC.geo.pin":case"GDC.geo.pin_latitude":case"GDC.geo.pin_longitude":return"gd-icon-earth";default:return"gd-icon-label-warning"}},$s=[{align:"cl cr",offset:{x:-10,y:0}},{align:"cr cl",offset:{x:10,y:0}}];function Ys(e){const{displayForm:t,selected:i}=e,{title:n,type:r}=t,l=re("gd-list-item","gd-attribute-display-form","s-attribute-display-form-name",`s-attribute-display-form-name-${gn.gl(n)}`,zs(r),{"is-selected":i});return(0,W.jsx)("div",{className:l,onClick:t=>{const{displayForm:i,onClick:n}=e;n(i.ref),t.preventDefault()},children:(0,W.jsx)(z.ShortenedText,{className:"gd-attribute-display-form-name",tooltipAlignPoints:$s,children:n})})}const Qs=23,Xs=[{align:"bl tl",offset:{x:0,y:1}},{align:"tl bl",offset:{x:0,y:-1}}];function Js({displayForms:e,selectedDisplayForm:t,onSelect:i,alignPoints:n}){const r=(0,G.useMemo)((()=>e.find((e=>(0,g.areObjRefsEqual)(e.ref,t)))?.title),[e,t]);return(0,W.jsx)(z.Dropdown,{className:"gd-attribute-display-form-dropdown",alignPoints:n??Xs,closeOnMouseDrag:!0,closeOnParentScroll:!0,enableEventPropagation:!0,renderButton:({isOpen:e,toggleDropdown:t})=>(0,W.jsx)(Us,{text:r,isOpened:e,toggleDropdown:t}),renderBody:({closeDropdown:n})=>(0,W.jsx)(z.DropdownList,{className:"gd-attribute-display-form-dropdown-body s-attribute-display-form-dropdown-body",items:e,itemHeight:Qs,renderItem:({item:e})=>{const r=(0,g.areObjRefsEqual)(e.ref,t);return(0,W.jsx)(Ys,{displayForm:e,onClick:e=>{n(),r||i(e)},selected:r},e.id)}})})}function ed({onSelect:e,alignPoints:t}){const{displayForms:i,currentDisplayAsDisplayFormRef:n}=Qa();return(0,W.jsx)(Js,{displayForms:i,selectedDisplayForm:n,alignPoints:t,onSelect:e})}const td=[{align:"bc tc",offset:{x:-1,y:5}}];function id({onConfiguration:e}){return(0,W.jsx)("div",{className:"gd-attribute-filter-configuration-button",children:(0,W.jsxs)(z.BubbleHoverTrigger,{children:[(0,W.jsx)(z.Button,{className:"gd-button-link gd-button-icon-only gd-icon-settings gd-button-small gd-configuration-button s-configuration-button",disabled:!1,onClick:e}),(0,W.jsx)(z.Bubble,{className:"bubble-primary",alignPoints:td,children:(0,W.jsx)(Ce,{id:"attributesDropdown.configuration"})})]})})}const nd=[{align:"bc tc",offset:{x:-1,y:5}}];function rd({onDelete:e}){return(0,W.jsx)("div",{className:"gd-attribute-filter-delete-button",children:(0,W.jsxs)(z.BubbleHoverTrigger,{children:[(0,W.jsx)(z.Button,{className:"gd-button-link gd-button-icon-only gd-button-small gd-icon-trash gd-delete-button s-delete-button",disabled:!1,onClick:e}),(0,W.jsx)(z.Bubble,{className:"bubble-primary",alignPoints:nd,children:(0,W.jsx)(Ce,{id:"attributesDropdown.removeTooltip"})})]})})}function ld({title:e,defaultAttributeFilterTitle:t,attributeDataSet:i}){return(0,W.jsxs)("div",{className:"gd-attribute-filter-tooltip-content s-attribute-filter-tooltip-content",children:[(0,W.jsx)("h3",{className:"s-attribute-filter-tooltip-header",children:e??t}),(0,W.jsx)("h4",{children:(0,W.jsx)(Ce,{id:"attributesDropdown.details.type"})}),(0,W.jsx)("p",{className:"s-attribute-filter-tooltip-item-name",children:t}),(0,W.jsx)("h4",{children:(0,W.jsx)(Ce,{id:"attributesDropdown.details.dataset"})}),(0,W.jsx)("p",{className:"s-attribute-filter-tooltip-item-dataset",children:i.title})]})}function od(e){return(0,W.jsx)("div",{className:"gd-empty-select-search-bar"})}const ad=(e,t)=>{const{onClick:i}=e,{isOpen:n}=(0,D.usePrevious)(e);(0,G.useEffect)((()=>{t&&!n&&i()}),[i,t,n])},sd=(e,t)=>{const{isOpen:i}=e,{isOpen:n}=(0,D.usePrevious)(e);(0,G.useEffect)((()=>{t&&n&&!i&&t()}),[t,i,n])},dd=e=>{const{onSearch:t,searchString:i}=e,[n,r]=(0,G.useState)(i);(0,G.useEffect)((()=>{r(i)}),[i]);const l=(0,G.useCallback)((e=>{r(e),t(e)}),[t]);return{onSearch:l,search:n}};function ud({tooltipContent:e}){return(0,W.jsx)("span",{className:"gd-attribute-filter-dropdown-button-icon-tooltip",children:(0,W.jsxs)(z.BubbleHoverTrigger,{children:[(0,W.jsx)(z.IconBoldHyperlink,{width:12,height:16}),(0,W.jsx)(z.Bubble,{arrowOffsets:{"bc tl":[-12,9],"bc tr":[12,9]},alignPoints:[{align:"bc tl"},{align:"bc tr"}],children:(0,W.jsx)("div",{className:"gd-attribute-filter-dropdown-button-icon-tooltip__content",children:e})})]})})}},67709:function(e,t){t.Z=function(e,t,i,n){var r=-1,l=null==e?0:e.length;for(n&&l&&(i=e[++r]);++r<l;)i=t(i,e[r],r,e);return i}},5723:function(e,t,i){i.d(t,{Z:function(){return T}});var n=i(67709),r=(0,i(3956).Z)({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),l=i(72402),o=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,a=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g"),s=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,d=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,u="\\ud800-\\udfff",c="\\u2700-\\u27bf",m="a-z\\xdf-\\xf6\\xf8-\\xff",g="A-Z\\xc0-\\xd6\\xd8-\\xde",p="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",f="["+p+"]",h="\\d+",b="["+c+"]",y="["+m+"]",v="[^"+u+p+h+c+m+g+"]",C="(?:\\ud83c[\\udde6-\\uddff]){2}",x="[\\ud800-\\udbff][\\udc00-\\udfff]",E="["+g+"]",S="(?:"+y+"|"+v+")",I="(?:"+E+"|"+v+")",F="(?:['’](?:d|ll|m|re|s|t|ve))?",w="(?:['’](?:D|LL|M|RE|S|T|VE))?",k="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",A="[\\ufe0e\\ufe0f]?",D=A+k+"(?:\\u200d(?:"+["[^"+u+"]",C,x].join("|")+")"+A+k+")*",j="(?:"+[b,C,x].join("|")+")"+D,O=RegExp([E+"?"+y+"+"+F+"(?="+[f,E,"$"].join("|")+")",I+"+"+w+"(?="+[f,E+S,"$"].join("|")+")",E+"?"+S+"+"+F,E+"+"+w,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",h,j].join("|"),"g"),P=function(e,t,i){return e=(0,l.Z)(e),void 0===(t=i?void 0:t)?function(e){return d.test(e)}(e)?function(e){return e.match(O)||[]}(e):function(e){return e.match(s)||[]}(e):e.match(t)||[]},N=RegExp("['’]","g"),T=function(e){return function(t){return(0,n.Z)(P(function(e){return(e=(0,l.Z)(e))&&e.replace(o,r).replace(a,"")}(t).replace(N,"")),e,"")}}}}]);