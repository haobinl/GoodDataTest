(self.webpackChunkgauge_chart_plugin=self.webpackChunkgauge_chart_plugin||[]).push([[463],{11010:function(e,t,r){r.d(t,{Em:function(){return m},vU:function(){return d}});var n,i,a=r(97582),o=r(25167),s=r(10164);!function(e){e.formatDate="FormattedDate",e.formatTime="FormattedTime",e.formatNumber="FormattedNumber",e.formatList="FormattedList",e.formatDisplayName="FormattedDisplayName"}(n||(n={})),function(e){e.formatDate="FormattedDateParts",e.formatTime="FormattedTimeParts",e.formatNumber="FormattedNumberParts",e.formatList="FormattedListParts"}(i||(i={}));var u=function(e){var t=(0,s.Z)(),r=e.value,n=e.children,i=(0,a.__rest)(e,["value","children"]);return n(t.formatNumberToParts(r,i))};function l(e){var t=function(t){var r=(0,s.Z)(),n=t.value,i=t.children,o=(0,a.__rest)(t,["value","children"]),u="string"==typeof n?new Date(n||0):n;return i("formatDate"===e?r.formatDateToParts(u,o):r.formatTimeToParts(u,o))};return t.displayName=i[e],t}function c(e){var t=function(t){var r=(0,s.Z)(),n=t.value,i=t.children,u=(0,a.__rest)(t,["value","children"]),l=r[e](n,u);if("function"==typeof i)return i(l);var c=r.textComponent||o.Fragment;return o.createElement(c,null,l)};return t.displayName=n[e],t}function d(e){return e}function m(e){return e}u.displayName="FormattedNumberParts",u.displayName="FormattedNumberParts",c("formatDate"),c("formatTime"),c("formatNumber"),c("formatList"),c("formatDisplayName"),l("formatDate"),l("formatTime")},75708:function(e,t,r){var n;"undefined"!=typeof self&&self,e.exports=(n=r(92113),function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,r){function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"HighchartsReact",(function(){return c}));var s=r(1),u=r.n(s),l="undefined"!=typeof window?s.useLayoutEffect:s.useEffect,c=Object(s.memo)(Object(s.forwardRef)((function(e,t){var r=Object(s.useRef)(),a=Object(s.useRef)(),c=Object(s.useRef)(e.constructorType),d=Object(s.useRef)(e.highcharts);return l((function(){function t(){var t=e.highcharts||"object"===("undefined"==typeof window?"undefined":o(window))&&window.Highcharts,n=e.constructorType||"chart";t?t[n]?e.options?a.current=t[n](r.current,e.options,e.callback):console.warn('The "options" property was not passed.'):console.warn('The "constructorType" property is incorrect or some required module is not imported.'):console.warn('The "highcharts" property was not passed.')}if(a.current){if(!1!==e.allowChartUpdate)if(e.constructorType!==c.current||e.highcharts!==d.current)c.current=e.constructorType,d.current=e.highcharts,t();else if(!e.immutable&&a.current){var n;(n=a.current).update.apply(n,[e.options].concat(i(e.updateArgs||[!0,!0])))}else t()}else t()}),[e.options,e.allowChartUpdate,e.updateArgs,e.containerProps,e.highcharts,e.constructorType]),l((function(){return function(){a.current&&(a.current.destroy(),a.current=null)}}),[]),Object(s.useImperativeHandle)(t,(function(){return{get chart(){return a.current},container:r}}),[]),u.a.createElement("div",n({},e.containerProps,{ref:r}))})));t.default=c},function(e,t){e.exports=n}]))},80463:function(e,t,r){r.r(t),r.d(t,{AreaChart:function(){return S},BOTTOM:function(){return Tn.D},BarChart:function(){return V},BaseChart:function(){return m},BubbleChart:function(){return F},BulletChart:function(){return O},CALCULATION_VALUES_DEFAULT:function(){return it},CalculateAs:function(){return n},ColorUtils:function(){return rt.i5},ColumnChart:function(){return H},ComboChart:function(){return G},ComparisonColorType:function(){return et},ComparisonPositionValues:function(){return i},CoreHeadline:function(){return ne},CoreRepeater:function(){return bn},CoreXirr:function(){return Cr},DEFAULT_COMPARISON_PALETTE:function(){return ot},DependencyWheelChart:function(){return ar},DonutChart:function(){return X},FunnelChart:function(){return Q},Headline:function(){return Lt},Heatmap:function(){return Ut},LineChart:function(){return _t},MIDDLE:function(){return Tn.uo},PieChart:function(){return $t},PyramidChart:function(){return te},Repeater:function(){return wn},SankeyChart:function(){return rr},ScatterPlot:function(){return Yt},TOP:function(){return Tn.GS},Treemap:function(){return Jt},ViewByAttributesLimit:function(){return a.N},WaterfallChart:function(){return ur},Xirr:function(){return xr},constructRepeaterBuckets:function(){return Br},constructRepeaterDimensions:function(){return Tr},createHeadlineProvider:function(){return St},getCalculationValuesDefault:function(){return ut},getColorMappingPredicate:function(){return rt.NK},getComparisonFormat:function(){return st},getComparisonRgbColor:function(){return dt},getPatternFill:function(){return Rn.vm},getPatternFillByIndex:function(){return Rn.Xh},getPatternFillByName:function(){return Rn.Uu},isAreaChart:function(){return An.xy},isBarChart:function(){return An._1},isBubbleChart:function(){return An.cD},isBulletChart:function(){return An.be},isColumnChart:function(){return An.h6},isComboChart:function(){return An.LQ},isDependencyWheel:function(){return An.hg},isDonutChart:function(){return An.as},isFunnel:function(){return An.lT},isHeatmap:function(){return An.mE},isLineChart:function(){return An.MT},isPieChart:function(){return An.HM},isPieOrDonutChart:function(){return An.rE},isPyramid:function(){return An._v},isSankey:function(){return An.rw},isSankeyOrDependencyWheel:function(){return An.Tm},isScatterPlot:function(){return An.du},isTreemap:function(){return An.Q_},isWaterfall:function(){return An.gp},updateConfigWithSettings:function(){return Bn},updateForecastWithSettings:function(){return Mn.g},withJsxExport:function(){return In}});const n={RATIO:"ratio",CHANGE:"change",DIFFERENCE:"difference",CHANGE_DIFFERENCE:"change_difference"},i={LEFT:"left",RIGHT:"right",TOP:"top",AUTO:"auto"};var a=r(5423),o=r(5549),s=r(24544),u=r(25289),l=r(82109);const c={locale:"en-US",drillableItems:[],afterRender:()=>{},pushData:()=>{},onError:u.defaultErrorHandler,onExportReady:()=>{},onLoadingChanged:()=>{},onDrill:()=>!0,ErrorComponent:u.ErrorComponent,LoadingComponent:u.LoadingComponent};function d(e){return{...c,...e}}const m=(0,u.withEntireDataView)((function(e){const{dataView:t,error:r,seType:n,isLoading:i,ErrorComponent:a,LoadingComponent:c,intl:m,...f}=d(e),p=(0,s.useMemo)((()=>(0,u.newErrorMapping)(m)),[m]),h=a,y=c;if(r){const e=p[Object.prototype.hasOwnProperty.call(p,n)?n:Object.prototype.hasOwnProperty.call(p,r)?r:u.ErrorCodes.UNKNOWN_ERROR];return h?(0,o.jsx)(h,{code:r,...e}):null}return i||!t?y?(0,o.jsx)(y,{}):null:(0,o.jsx)(l.t,{dataView:t,...f})}));var f=r(28067);const p=(0,s.memo)((function(e){return(0,o.jsx)(m,{type:"area",...e})}));var h=r(25972),y=r(8297);const g=["backend","workspace"];const b=e=>t=>(0,u.wrapDisplayName)("withChart")((0,h.Zz)((0,u.withContexts)(function(e){const t=(r=e,e=>{const t=r.propTransformation?r.propTransformation(e):e;r.onBeforePropsConversion&&r.onBeforePropsConversion(t);const n=r.bucketsFactory(t),i=r.executionFactory(t,n),a={...(0,y.Z)(t,r.bucketPropsKeys),...r.propOverridesFactory?r.propOverridesFactory(t,n):{},execution:i,exportTitle:t.exportTitle||r.chartName,enableExecutionCancelling:e.config?.enableExecutionCancelling??!1};return(0,y.Z)(a,g)});var r;return e=>(0,u.wrapDisplayName)("withChartDefinition",e)((function(r){return(0,o.jsx)(e,{...t(r)})}))}(e)(t))));var v=r(29732);function w(e){return(0,f.newTwoDimensional)([f.MeasureGroupIdentifier],(0,f.bucketsAttributes)(e.buckets))}function C(e,t=u.BucketNames.VIEW,r=u.BucketNames.STACK){const{buckets:n}=e;return function(e,t){const r=(0,f.bucketsFind)(e,t);return r&&!(0,f.bucketIsEmpty)(r)}(n,r)?function(e,t,r){const n=(0,f.bucketsFind)(e,t),i=n?(0,f.bucketAttributes)(n):[],a=(0,f.bucketsFind)(e,r),o=a&&(0,f.bucketAttribute)(a);return(0,f.newTwoDimensional)((0,v.Z)([o]),[...i,f.MeasureGroupIdentifier])}(n,t,r):w(e)}function k(e){return(0,f.newTwoDimensional)((0,f.bucketsAttributes)(e.buckets),[f.MeasureGroupIdentifier])}function x(e){const t=(0,f.bucketsAttributes)(e.buckets);return t.length?(0,f.newTwoDimensional)([f.MeasureGroupIdentifier],t):(0,f.newTwoDimensional)([],[f.MeasureGroupIdentifier])}function E(e){const t=(0,f.bucketsFind)(e.buckets,u.BucketNames.VIEW),r=t?(0,f.bucketAttributes)(t):[],n=(0,f.bucketsFind)(e.buckets,u.BucketNames.STACK),i=n?(0,f.bucketAttributes)(n):[];return(0,f.newTwoDimensional)(r,(0,v.Z)([...i,f.MeasureGroupIdentifier]))}function I(e){const t=(0,f.bucketsAttributes)(e.buckets);return 1===t.length?(0,f.newTwoDimensional)([f.MeasureGroupIdentifier],t):(0,f.newTwoDimensional)(t,[f.MeasureGroupIdentifier])}function B(e){const t=(0,f.bucketsFind)(e.buckets,u.BucketNames.ATTRIBUTE_FROM),r=t?(0,f.bucketAttributes)(t):[],n=(0,f.bucketsFind)(e.buckets,u.BucketNames.ATTRIBUTE_TO),i=n?(0,f.bucketAttributes)(n):[];return(0,f.newTwoDimensional)([f.MeasureGroupIdentifier],(0,v.Z)([...r,...i]))}function T(e){return B(e)}var A=r(78023);function M(e,t){return e?Array.isArray(e)?e.slice(0,t):[e]:[]}const R=b({chartName:"AreaChart",bucketPropsKeys:["measures","viewBy","stackBy","filters","sortBy"],bucketsFactory:e=>{const{measures:t,viewBy:r,stackBy:n}=function(e){const{measures:t,stackBy:r}=e,n=M(e.viewBy,a.N);if(n.length<=1)return{measures:t||[],viewBy:n,stackBy:r?[r]:[]};const[i]=t,[o,s]=n;return{measures:[i],viewBy:[o],stackBy:[s]}}(e),i=(0,f.applyRatioRule)(t);return[(0,f.newBucket)(u.BucketNames.MEASURES,...i),(0,f.newBucket)(u.BucketNames.VIEW,...r),(0,f.newBucket)(u.BucketNames.STACK,...n)]},executionFactory:(e,t)=>{const{backend:r,workspace:n,execConfig:i}=e,a=e.sortBy??[];return r.withTelemetry("AreaChart",e).workspace(n).execution().forBuckets(t,e.filters).withSorting(...a).withDimensions(C).withExecConfig(i)},propOverridesFactory:(e,t)=>{const r=function(e){return M(e.viewBy,a.N).length<=1?function(e={}){const{stackMeasures:t,stackMeasuresToPercent:r}=e;return null==t&&null==r?e:{...e,stacking:Boolean(r)||Boolean(t)}}(e.config):{...e.config,stacking:!1,stackMeasures:!1,stackMeasuresToPercent:!1}}(e);return{config:(0,A.x)(t,r)}},onBeforePropsConversion:function(e){if(M(e.viewBy,a.N).length<=1)return;const{measures:t=[],stackBy:r}=e;(t.length>1||r)&&console.warn("When there are two attributes in viewBy, only first measure is taken and attribute in stackBy is ignored")}})(p);function S(e){const[t,r,n,i,a]=(0,u.useResolveValuesWithPlaceholders)([e.measures,e.viewBy,e.stackBy,e.filters,e.sortBy],e.placeholdersResolutionContext);return(0,o.jsx)(R,{...e,measures:t,viewBy:r,stackBy:n,filters:i,sortBy:a})}const N=(0,s.memo)((function(e){return(0,o.jsx)(m,{type:"bar",...e})})),D=b({chartName:"BarChart",bucketPropsKeys:["measures","viewBy","stackBy","filters","sortBy"],bucketsFactory:e=>{const t=(0,f.applyRatioRule)(e.measures),r=M(e.viewBy,a.N);return[(0,f.newBucket)(u.BucketNames.MEASURES,...t),(0,f.newBucket)(u.BucketNames.VIEW,...r),(0,f.newBucket)(u.BucketNames.STACK,e.stackBy)]},executionFactory:(e,t)=>{const{backend:r,workspace:n,execConfig:i}=e,a=e.sortBy??[];return r.withTelemetry("BarChart",e).workspace(n).execution().forBuckets(t,e.filters).withSorting(...a).withDimensions(C).withExecConfig(i)},propOverridesFactory:(e,t)=>({config:(0,A.x)(t,e.config)})})(N);function V(e){const[t,r,n,i,a]=(0,u.useResolveValuesWithPlaceholders)([e.measures,e.viewBy,e.stackBy,e.filters,e.sortBy],e.placeholdersResolutionContext);return(0,o.jsx)(D,{...e,measures:t,viewBy:r,stackBy:n,filters:i,sortBy:a})}const L=b({chartName:"BubbleChart",bucketPropsKeys:["xAxisMeasure","yAxisMeasure","size","viewBy","filters","sortBy"],bucketsFactory:e=>[(0,f.newBucket)(u.BucketNames.MEASURES,e.xAxisMeasure),(0,f.newBucket)(u.BucketNames.SECONDARY_MEASURES,e.yAxisMeasure),(0,f.newBucket)(u.BucketNames.TERTIARY_MEASURES,e.size),(0,f.newBucket)(u.BucketNames.VIEW,e.viewBy)],executionFactory:(e,t)=>{const{backend:r,workspace:n,execConfig:i}=e,a=e.sortBy??[];return r.withTelemetry("BubbleChart",e).workspace(n).execution().forBuckets(t,e.filters).withSorting(...a).withDimensions(k).withExecConfig(i)}})((function(e){return(0,o.jsx)(m,{type:"bubble",...e})}));function F(e){const[t,r,n,i,a,s]=(0,u.useResolveValuesWithPlaceholders)([e.xAxisMeasure,e.yAxisMeasure,e.size,e.viewBy,e.filters,e.sortBy],e.placeholdersResolutionContext);return(0,o.jsx)(L,{...e,xAxisMeasure:t,yAxisMeasure:r,size:n,viewBy:i,filters:a,sortBy:s})}const j=(0,s.memo)((function(e){return(0,o.jsx)(m,{type:"bullet",...e})})),P=b({chartName:"BulletChart",bucketPropsKeys:["primaryMeasure","targetMeasure","comparativeMeasure","viewBy","filters","sortBy"],propTransformation:e=>({...e,primaryMeasure:(0,f.disableComputeRatio)(e.primaryMeasure),targetMeasure:e.targetMeasure?(0,f.disableComputeRatio)(e.targetMeasure):void 0,comparativeMeasure:e.comparativeMeasure?(0,f.disableComputeRatio)(e.comparativeMeasure):void 0}),bucketsFactory:e=>{const t=M(e.viewBy,a.N);return[(0,f.newBucket)(u.BucketNames.MEASURES,e.primaryMeasure),(0,f.newBucket)(u.BucketNames.SECONDARY_MEASURES,e.targetMeasure),(0,f.newBucket)(u.BucketNames.TERTIARY_MEASURES,e.comparativeMeasure),(0,f.newBucket)(u.BucketNames.VIEW,...t)]},executionFactory:(e,t)=>{const{backend:r,workspace:n,execConfig:i}=e,a=e.sortBy??[];return r.withTelemetry("BulletChart",e).workspace(n).execution().forBuckets(t,e.filters).withSorting(...a).withDimensions(C).withExecConfig(i)},propOverridesFactory:(e,t)=>({config:(0,A.x)([e.primaryMeasure,e.targetMeasure,e.comparativeMeasure],e.config)})})(j);function O(e){const[t,r,n,i,a,s]=(0,u.useResolveValuesWithPlaceholders)([e.primaryMeasure,e.targetMeasure,e.comparativeMeasure,e.viewBy,e.filters,e.sortBy],e.placeholdersResolutionContext);return(0,o.jsx)(P,{...e,primaryMeasure:t,targetMeasure:r,comparativeMeasure:n,viewBy:i,filters:a,sortBy:s})}const U=(0,s.memo)((function(e){return(0,o.jsx)(m,{type:"column",...e})})),W=b({chartName:"ColumnChart",bucketPropsKeys:["measures","viewBy","stackBy","filters","sortBy"],bucketsFactory:e=>{const t=(0,f.applyRatioRule)(e.measures),r=M(e.viewBy,a.N);return[(0,f.newBucket)(u.BucketNames.MEASURES,...t),(0,f.newBucket)(u.BucketNames.VIEW,...r),(0,f.newBucket)(u.BucketNames.STACK,e.stackBy)]},executionFactory:(e,t)=>{const{backend:r,workspace:n,execConfig:i}=e,a=e.sortBy??[];return r.withTelemetry("ColumnChart",e).workspace(n).execution().forBuckets(t,e.filters).withSorting(...a).withDimensions(C).withExecConfig(i)},propOverridesFactory:(e,t)=>({config:(0,A.x)(t,e.config)})})(U);function H(e){const[t,r,n,i,a]=(0,u.useResolveValuesWithPlaceholders)([e.measures,e.viewBy,e.stackBy,e.filters,e.sortBy],e.placeholdersResolutionContext);return(0,o.jsx)(W,{...e,measures:t,viewBy:r,stackBy:n,filters:i,sortBy:a})}const z=(0,s.memo)((function(e){return(0,o.jsx)(m,{type:"combo",...e})}));function _(e){const{primaryMeasures:t,secondaryMeasures:r,config:n}=e,i=e.config?.dualAxis??1?t:[...t,...r];return(0,A.x)(i,n)}const K=b({chartName:"ComboChart",bucketPropsKeys:["primaryMeasures","secondaryMeasures","viewBy","filters","sortBy"],propTransformation:e=>{const{primaryMeasures:t=[],secondaryMeasures:r=[]}=e,n=!(e.config?.dualAxis??1)&&t.length+r.length>1?f.ComputeRatioRule.NEVER:f.ComputeRatioRule.SINGLE_MEASURE_ONLY;return{...e,primaryMeasures:(0,f.applyRatioRule)(t,n),secondaryMeasures:(0,f.applyRatioRule)(r,n)}},bucketsFactory:e=>{const{primaryMeasures:t,secondaryMeasures:r,viewBy:n}=e,i=Array.isArray(n)?[n[0]]:[n];return[(0,f.newBucket)(u.BucketNames.MEASURES,...t),(0,f.newBucket)(u.BucketNames.SECONDARY_MEASURES,...r),(0,f.newBucket)(u.BucketNames.VIEW,...i)]},executionFactory:(e,t)=>{const{backend:r,workspace:n,execConfig:i}=e,a=e.sortBy??[];return r.withTelemetry("ComboChart",e).workspace(n).execution().forBuckets(t,e.filters).withSorting(...a).withDimensions(w).withExecConfig(i)},propOverridesFactory:e=>({config:_(e)})})(z);function G(e){const[t,r,n,i,a]=(0,u.useResolveValuesWithPlaceholders)([e.primaryMeasures,e.secondaryMeasures,e.viewBy,e.filters,e.sortBy],e.placeholdersResolutionContext);return(0,o.jsx)(K,{...e,primaryMeasures:t,secondaryMeasures:r,viewBy:n,filters:i,sortBy:a})}const $=(0,s.memo)((function(e){return(0,o.jsx)(m,{type:"donut",...e})})),Z=b({chartName:"DonutChart",bucketPropsKeys:["measures","viewBy","filters","sortBy"],bucketsFactory:e=>{const t=Array.isArray(e.measures)?e.measures:[e.measures];return[(0,f.newBucket)(u.BucketNames.MEASURES,...t),(0,f.newBucket)(u.BucketNames.VIEW,e.viewBy)]},executionFactory:(e,t)=>{const{backend:r,workspace:n,execConfig:i}=e,a=e.sortBy??[];return r.withTelemetry("DonutChart",e).workspace(n).execution().forBuckets(t,e.filters).withSorting(...a).withDimensions(x).withExecConfig(i)}})($);function X(e){const[t,r,n,i]=(0,u.useResolveValuesWithPlaceholders)([e.measures,e.viewBy,e.filters,e.sortBy],e.placeholdersResolutionContext);return(0,o.jsx)(Z,{...e,measures:t,viewBy:r,filters:n,sortBy:i})}const Y=(0,s.memo)((function(e){return(0,o.jsx)(m,{type:"funnel",...e})})),q=b({chartName:"FunnelChart",bucketPropsKeys:["measures","viewBy","filters","sortBy"],bucketsFactory:e=>[(0,f.newBucket)(u.BucketNames.MEASURES,...e.measures),(0,f.newBucket)(u.BucketNames.VIEW,e.viewBy)],executionFactory:(e,t)=>{const{backend:r,workspace:n,execConfig:i}=e,a=e.sortBy??[];return r.withTelemetry("FunnelChart",e).workspace(n).execution().forBuckets(t,e.filters).withSorting(...a).withDimensions(x).withExecConfig(i)}})(Y);function Q(e){const[t,r,n,i]=(0,u.useResolveValuesWithPlaceholders)([e.measures,e.viewBy,e.filters,e.sortBy],e.placeholdersResolutionContext);return(0,o.jsx)(q,{...e,measures:t,viewBy:r,filters:n,sortBy:i})}const J=(0,s.memo)((function(e){return(0,o.jsx)(m,{type:"pyramid",...e})})),ee=b({chartName:"PyramidChart",bucketPropsKeys:["measures","viewBy","filters","sortBy"],bucketsFactory:e=>[(0,f.newBucket)(u.BucketNames.MEASURES,...e.measures),(0,f.newBucket)(u.BucketNames.VIEW,e.viewBy)],executionFactory:(e,t)=>{const{backend:r,workspace:n,execConfig:i}=e,a=e.sortBy??[];return r.withTelemetry("PyramidChart",e).workspace(n).execution().forBuckets(t,e.filters).withSorting(...a).withDimensions(x).withExecConfig(i)}})(J);function te(e){const[t,r,n,i]=(0,u.useResolveValuesWithPlaceholders)([e.measures,e.viewBy,e.filters,e.sortBy],e.placeholdersResolutionContext);return(0,o.jsx)(ee,{...e,measures:t,viewBy:r,filters:n,sortBy:i})}var re=r(47591);const ne=(0,u.withEntireDataView)((function(e){const{dataView:t,error:r,isLoading:n,ErrorComponent:i,LoadingComponent:a,afterRender:l,drillableItems:c,locale:m,onDrill:f,config:p={},headlineTransformation:h,intl:y}=d(e),g=(0,s.useMemo)((()=>(0,u.newErrorMapping)(y)),[y]);if(r){const e=g[Object.prototype.hasOwnProperty.call(g,r)?r:u.ErrorCodes.UNKNOWN_ERROR];return i?(0,o.jsx)(i,{code:r,...e}):null}return n||!t?a?(0,o.jsx)(a,{}):null:(0,o.jsx)(u.IntlWrapper,{locale:m,children:(0,o.jsx)(h,{dataView:t,onAfterRender:l,onDrill:f,drillableItems:c,config:p})})}));var ie=r(79697),ae=r(39943);class oe{createExecution(e,t){const{buckets:r,filters:n,executionConfig:i,dateFormat:a,sortItems:o}=t,s=e.forBuckets(this.prepareBuckets((u=r,(0,ae.Z)(u,4))),n).withExecConfig(i).withDimensions((0,f.newDimension)([f.MeasureGroupIdentifier]));var u;return a&&s.withDateFormat(a),(0,ie.Z)(o)||s.withSorting(...o),s}prepareBuckets(e){return e}}const se={enabled:!0};var ue;function le(e){return!(0,ie.Z)(e)&&void 0!==e.subItem}!function(e){e.NEGATIVE_VALUE="negative",e.EQUALS_VALUE="equals",e.POSITIVE_VALUE="positive"}(ue||(ue={}));var ce=r(10164);function de(e){const t=e.meta().measureDescriptors(),r=e.rawData().singleDimData();return t.map(((e,t)=>{const n=r[t];return(0,re.kG)(void 0!==n,"Undefined execution value data for headline transformation"),(0,re.kG)(e.measureHeaderItem,"Missing expected measureHeaderItem"),{measureHeaderItem:e.measureHeaderItem,value:n}}))}const me=(e,t)=>({handleFiredDrillEvent:(0,s.useCallback)(((r,n)=>{const i=function(e,t){const r=u.DataViewFacade.for(t).meta().measureDescriptor(e.localIdentifier);if(!r)throw new Error("The metric uri has not been found in execution response!");const n={header:r};return{dataView:t,drillContext:{type:u.VisualizationTypes.HEADLINE,element:e.element,value:e.value,intersection:[n]}}}(r,e);(0,u.fireDrillEvent)(t,i,n)}),[e,t])});var fe=r(25356),pe=r(88699);const he=(0,s.createContext)({clientWidth:0,clientHeight:0,config:null,fireDrillEvent:()=>{}}),ye=()=>(0,s.useContext)(he);var ge,be,ve=r(94184);function we({item:e,accessibilityConfig:t,showPrevItem:r,showNextItem:n}){const{nextAriaLabel:i,previousAriaLabel:a}=t??{},u="gd-button-link gd-button-icon-only pagination",l=1===e,c=2===e,d=(0,s.useCallback)((()=>{l||r()}),[l,r]),m=(0,s.useCallback)((()=>{c||n()}),[c,n]);return(0,o.jsxs)("div",{className:"headline-pagination",children:[(0,o.jsx)("button",{className:ve(`${u} first-item gd-icon-chevron-left`,{"is-disabled":l}),onClick:d,"aria-disabled":l,"aria-label":a}),(0,o.jsx)("button",{className:ve(`${u} second-item gd-icon-chevron-right`,{"is-disabled":c}),onClick:m,"aria-disabled":c,"aria-label":i})]})}function Ce({renderSecondaryItem:e,renderTertiaryItem:t,accessibilityConfig:r}){const{nextAriaLabel:n,previousAriaLabel:i}=r??{},[a,u]=(0,s.useState)(1);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(we,{item:a,showNextItem:()=>u(a+1),showPrevItem:()=>u(a-1),accessibilityConfig:{nextAriaLabel:n,previousAriaLabel:i}}),(0,o.jsxs)("div",{role:"status","aria-live":"polite","aria-atomic":"true",children:[1===a&&e(),2===a&&t()]})]})}function ke(e,t){let r,n;return t?(e?t<=ge.MEDIUM?(r=ge.SMALLEST,n=be.SMALLEST):t<=ge.LARGE?(r=ge.SMALL,n=be.MEDIUM):(r=ge.NORMAL,n=be.LARGE):t<=ge.SMALLEST?(r=ge.SMALLEST,n=be.SMALLEST):t<=ge.EXTRA_SMALL?(r=ge.EXTRA_SMALL,n=be.SMALL):(r=ge.NORMAL,n=be.LARGE),{height:r,fontSize:n}):{height:void 0,fontSize:void 0}}!function(e){e[e.SMALLEST=34]="SMALLEST",e[e.EXTRA_SMALL=44]="EXTRA_SMALL",e[e.SMALL=54]="SMALL",e[e.NORMAL=64]="NORMAL",e[e.MEDIUM=94]="MEDIUM",e[e.LARGE=114]="LARGE"}(ge||(ge={})),function(e){e[e.SMALLEST=30]="SMALLEST",e[e.SMALL=36]="SMALL",e[e.MEDIUM=46]="MEDIUM",e[e.LARGE=50]="LARGE"}(be||(be={}));const xe=(e,t,r)=>e&&t<160&&r<=160;var Ee=r(18608);const Ie="â€“",Be="NaN",Te=999;function Ae(e,t){const r={};return void 0!==e&&(r.color=e),void 0!==t&&(r.backgroundColor=t),r}function Me(e,t={}){const{separators:r}=t,{formattedValue:n,colors:i}=function(e,t,r){const n=Ee.X.convertValue(e);return(0,ie.Z)(t)?null==n?{formattedValue:"",colors:{}}:{formattedValue:n.toString(),colors:{}}:Ee.X.formatValue(n,t,r)}(e.value,e.format,r),a=n===Be||""===n,o=a?Ie:n,s=a?{}:i;return{cssStyle:Ae(s.color,s.backgroundColor),value:o,isValueEmpty:a}}function Re(e){return e?["is-drillable","s-is-drillable"]:[]}function Se(e,t){const r=(n=e,i=function(e){if(!e.current)return!1;const{height:t}=e.current.getBoundingClientRect(),{lineHeight:r}=window.getComputedStyle(e.current);return t>2*parseFloat(r)}(t),n?n<160?i?"gd-shortened-label":"gd-small":i?"gd-medium":"gd-large":"");var n,i;return ve("gd-flex-container","headline-compare-section",r)}const Ne=(e,t)=>{const r=(0,s.useRef)(null),n=(0,s.useRef)(null),i=(0,s.useRef)(null),a=(0,s.useRef)(e),o=(0,s.useRef)(!1);a.current=e;const u=(0,s.useCallback)((()=>{const e=r.current;if(!e||!a.current)return;const{scrollWidth:t,clientWidth:i}=e,s=t>i;n.current===s&&o.current||(n.current=s,o.current=!0,a.current(s))}),[]);return(0,s.useLayoutEffect)((()=>(i.current&&clearTimeout(i.current),o.current||(i.current=setTimeout((()=>{u()}),0)),()=>{i.current&&clearTimeout(i.current)})),[u]),(0,s.useEffect)((()=>{void 0!==t&&t>0&&(o.current=!1,n.current=null,u())}),[t,u]),{containerRef:r}},De=e=>{const{config:t,clientHeight:r,clientWidth:n}=ye(),{enableCompactSize:i}=t,a=(0,s.createRef)(),o=(0,s.useMemo)((()=>xe(i,n,r)),[i,r,n]),u=(0,s.useMemo)((()=>Se(n,a)),[n,a]),[l,c]=(0,s.useState)({isSecondaryOverflow:!1,isTertiaryOverflow:!1,measurementComplete:!1,measurementKey:0,hasSecondaryMeasurement:!1,hasTertiaryMeasurement:!1}),d=(0,s.useRef)(!1),m=(0,s.useRef)(null),f=(0,s.useRef)({width:0,height:0});(0,s.useLayoutEffect)((()=>{const e=f.current.width||0,t=f.current.height||0,i=0===e&&0===t,a=Math.abs(n-e)>5||Math.abs(r-t)>5;n>0&&r>0&&(i||a)&&(c((e=>({isSecondaryOverflow:!1,isTertiaryOverflow:!1,measurementComplete:!1,measurementKey:e.measurementKey+1,hasSecondaryMeasurement:!1,hasTertiaryMeasurement:!1}))),d.current=!1,f.current={width:n,height:r})}),[n,r]);const p=(0,s.useCallback)((t=>r=>{d.current||c((n=>{const i={...n,[t]:r};return"isSecondaryOverflow"===t?i.hasSecondaryMeasurement=!0:"isTertiaryOverflow"===t&&(i.hasTertiaryMeasurement=!0),i.measurementComplete=e?i.hasSecondaryMeasurement&&i.hasTertiaryMeasurement:i.hasSecondaryMeasurement,i}))}),[e]),h=p("isSecondaryOverflow"),y=p("isTertiaryOverflow");(0,s.useEffect)((()=>()=>{m.current&&clearTimeout(m.current)}),[]);const g=(0,s.useMemo)((()=>!(!o||!e)||!(!l.measurementComplete||!e)&&(l.isSecondaryOverflow||l.isTertiaryOverflow)),[o,e,l]),b=(0,s.useRef)(g);return b.current!==g&&(b.current=g),{shouldUsePagination:g,compareSectionClassNames:u,overflowState:l,handleSecondaryOverflow:h,handleTertiaryOverflow:y,secondaryItemTitleWrapperRef:a}};function Ve({dataItem:e,titleRef:t,onValueOverflow:r,measurementTrigger:n}){const i=e.baseHeadlineDataItemComponent;return(0,o.jsx)("div",{className:"gd-flex-item headline-compare-section-item headline-compare-item s-headline-compare-item",children:(0,o.jsx)(i,{dataItem:e.data,evaluationType:e.evaluationType,elementType:e.elementType,titleRef:t,onValueOverflow:r,measurementTrigger:n})})}function Le({secondaryItem:e,tertiaryItem:t}){const r=(0,ce.Z)(),{shouldUsePagination:n,overflowState:i,handleSecondaryOverflow:a,handleTertiaryOverflow:s,compareSectionClassNames:u,secondaryItemTitleWrapperRef:l}=De(void 0!==t);return n?(0,o.jsx)("div",{className:"gd-flex-container headline-compare-section headline-paginated-compare-section s-headline-paginated-compare-section",children:(0,o.jsx)(Ce,{renderSecondaryItem:()=>(0,o.jsx)(Ve,{dataItem:e,titleRef:l,onValueOverflow:void 0,measurementTrigger:i.measurementKey}),renderTertiaryItem:()=>(0,o.jsx)(Ve,{dataItem:t,onValueOverflow:void 0,measurementTrigger:i.measurementKey}),accessibilityConfig:{nextAriaLabel:r.formatMessage({id:"visualizations.headline.pagination.next.metricLabel"}),previousAriaLabel:r.formatMessage({id:"visualizations.headline.pagination.previous.metricLabel"})}})}):(0,o.jsxs)("div",{className:u,children:[t?(0,o.jsx)(Ve,{dataItem:t,onValueOverflow:s,measurementTrigger:i.measurementKey}):null,(0,o.jsx)(Ve,{dataItem:e,titleRef:l,onValueOverflow:a,measurementTrigger:i.measurementKey})]})}function Fe({primaryItem:e,customStyle:t}){const r=e.baseHeadlineDataItemComponent;return(0,o.jsx)("div",{className:"gd-flex-item headline-primary-item s-headline-primary-item",style:t,children:(0,o.jsx)(r,{dataItem:e.data,evaluationType:e.evaluationType,elementType:e.elementType,shouldHideTitle:!0,includeHeightCheck:!0})})}function je({primaryItem:e,isOnlyPrimaryItem:t}){const{clientHeight:r}=ye(),n=(0,s.useMemo)((()=>{const{height:e,fontSize:n}=ke(!t,r);return{height:`${e}px`,lineHeight:`${e}px`,fontSize:n}}),[t,r]);return r?(0,o.jsx)(Fe,{primaryItem:e,customStyle:n}):null}function Pe({primaryItem:e,isOnlyPrimaryItem:t}){const{config:r}=ye();return(0,o.jsx)("div",{className:"gd-flex-container primary-section s-primary-section",children:r.enableCompactSize?(0,o.jsx)(je,{primaryItem:e,isOnlyPrimaryItem:t}):(0,o.jsx)(Fe,{primaryItem:e})})}const Oe=3e3,Ue=(0,fe.b)(pe.Z);function We({data:e,config:t,onDrill:r,onAfterRender:n}){const{primaryItem:i,secondaryItem:a,tertiaryItem:u}=e,l=(0,s.useRef)(!1),c=(0,s.useCallback)(((e,t,n)=>{if(r){const i={localIdentifier:e.localIdentifier,value:e.value,element:t};r(i,n)}}),[r]);return(0,s.useEffect)((()=>{const e=setTimeout((()=>{l.current||(n?.(),l.current=!0)}),Oe);return()=>clearTimeout(e)}),[n]),(0,o.jsx)(Ue,{client:!0,onResize:e=>{e?.client?.width>0&&e?.client?.height>0&&!l.current&&(l.current=!0,n())},children:({measureRef:e,contentRect:r})=>(0,o.jsx)(he.Provider,{value:{clientWidth:r.client?.width,clientHeight:r.client?.height,config:t,fireDrillEvent:c},children:(0,o.jsxs)("div",{className:"headline",ref:e,children:[(0,o.jsx)(Pe,{primaryItem:i,isOnlyPrimaryItem:!a}),a?(0,o.jsx)(Le,{secondaryItem:a,tertiaryItem:u}):null]})})})}var He=r(65165);const ze=e=>{const{config:t}=ye();return{formattedItem:(0,s.useMemo)((()=>Me(e,t)),[e,t])}};var _e=r(97582),Ke=r(25167),Ge=r(71577);function $e(e){var t=(0,ce.Z)(),r=t.formatMessage,n=t.textComponent,i=void 0===n?Ke.Fragment:n,a=e.id,o=e.description,s=e.defaultMessage,u=e.values,l=e.children,c=e.tagName,d=void 0===c?i:c,m=r({id:a,description:o,defaultMessage:s},u,{ignoreTag:e.ignoreTag});return"function"==typeof l?l(Array.isArray(m)?m:[m]):d?Ke.createElement(d,null,m):Ke.createElement(Ke.Fragment,null,m)}$e.displayName="FormattedMessage";var Ze=Ke.memo($e,(function(e,t){var r=e.values,n=(0,_e.__rest)(e,["values"]),i=t.values,a=(0,_e.__rest)(t,["values"]);return(0,Ge.wU)(i,r)&&(0,Ge.wU)(n,a)}));Ze.displayName="MemoizedFormattedMessage";var Xe=Ze;const Ye=e=>(0,u.wrapDisplayName)("withTitle",e)((function(t){const{shouldHideTitle:r,titleRef:n,dataItem:i}=t;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e,{...t}),r?null:(0,o.jsx)("div",{className:"headline-title-wrapper s-headline-title-wrapper",title:i?.title,ref:n,children:i?.title})]})})),qe=(Qe=Ye((function({dataItem:e,onValueOverflow:t,measurementTrigger:r,includeHeightCheck:n}){const{config:i}=ye(),{formattedItem:a}=ze(e),s=ve(["headline-value","s-headline-value"],{"headline-value--empty s-headline-value--empty":a.isValueEmpty,"headline-link-style-underline s-headline-link-style-underline":!i?.disableDrillUnderline}),{containerRef:u}=Ne(t,r);return(0,o.jsx)("div",{ref:u,className:"headline-value-wrapper s-headline-value-wrapper",style:a.cssStyle,children:(0,o.jsx)(He.ResponsiveText,{minFontSize:10,includeHeightCheck:n,tagClassName:"responsive-text",children:(0,o.jsx)("div",{className:s,children:a.value})})})})),(0,u.wrapDisplayName)("withDrillable",Qe)((function(e){const{dataItem:t,elementType:r}=e,{fireDrillEvent:n}=ye(),i=(0,He.useIdPrefixed)("drill-hint"),a=(0,s.useCallback)((e=>{t?.isDrillable&&n(t,r,e.target)}),[t,r,n]),u=(0,s.useCallback)((e=>{t?.isDrillable&&(0,He.isActionKey)(e)&&n(t,r,e.target)}),[t,r,n]);return t?.isDrillable?(0,o.jsxs)("div",{className:"is-drillable s-is-drillable headline-item-link s-headline-item-link",onClick:a,onKeyDown:u,tabIndex:0,role:"button","aria-haspopup":"dialog","aria-describedby":i,children:[(0,o.jsx)(Qe,{...e}),(0,o.jsx)("span",{id:i,hidden:!0,children:(0,o.jsx)(Xe,{id:"visualizations.headline.pagination.drill.hint"})})]}):(0,o.jsx)(Qe,{...e})})));var Qe;function Je(e,t,r){const n=function(e,t){return e?{localIdentifier:e.measureHeaderItem.localIdentifier,title:e.measureHeaderItem.name,value:null===e.value||void 0===e.value?null:String(e.value),format:e.measureHeaderItem.format,isDrillable:!!t}:null}(e,t);return n?{data:n,elementType:r,baseHeadlineDataItemComponent:qe}:null}var et,tt=r(11010),rt=r(16576),nt=r(35967);!function(e){e.POSITIVE="positive",e.NEGATIVE="negative",e.EQUALS="equals"}(et||(et={}));const it={[n.CHANGE]:{defaultLabelKeys:{nonConditionalKey:(0,tt.Em)({id:"visualizations.headline.comparison.title.change"}).id,positiveKey:(0,tt.Em)({id:"visualizations.headline.comparison.title.change.positive"}).id,negativeKey:(0,tt.Em)({id:"visualizations.headline.comparison.title.change.negative"}).id,equalsKey:(0,tt.Em)({id:"visualizations.headline.comparison.title.change.equals"}).id},defaultFormat:"#,##0%"},[n.RATIO]:{defaultLabelKeys:{nonConditionalKey:(0,tt.Em)({id:"visualizations.headline.comparison.title.ratio"}).id},defaultFormat:"#,##0%"},[n.CHANGE_DIFFERENCE]:{defaultLabelKeys:{nonConditionalKey:(0,tt.Em)({id:"visualizations.headline.comparison.title.change"}).id,positiveKey:(0,tt.Em)({id:"visualizations.headline.comparison.title.change.positive"}).id,negativeKey:(0,tt.Em)({id:"visualizations.headline.comparison.title.change.negative"}).id,equalsKey:(0,tt.Em)({id:"visualizations.headline.comparison.title.change.equals"}).id},defaultFormat:"#,##0%",defaultSubFormat:null},[n.DIFFERENCE]:{defaultLabelKeys:{nonConditionalKey:(0,tt.Em)({id:"visualizations.headline.comparison.title.difference"}).id,positiveKey:(0,tt.Em)({id:"visualizations.headline.comparison.title.difference.positive"}).id,negativeKey:(0,tt.Em)({id:"visualizations.headline.comparison.title.difference.negative"}).id,equalsKey:(0,tt.Em)({id:"visualizations.headline.comparison.title.difference.equals"}).id},defaultFormat:null}},at={[et.POSITIVE]:0,[et.NEGATIVE]:1,[et.EQUALS]:2},ot=[{guid:et.POSITIVE,fill:{r:0,g:193,b:141}},{guid:et.NEGATIVE,fill:{r:229,g:77,b:64}},{guid:et.EQUALS,fill:{r:148,g:161,b:173}}],st=(e,t)=>void 0===e?t:e,ut=(e=n.CHANGE)=>it[e],lt=(e,t)=>(0,rt.ju)(t,e,at[e]),ct=(e,t,r)=>(0,rt.ju)(r,e,at[t]),dt=(e,t,r=ot)=>(0,nt.HY)(e,r)?(0,f.isColorFromPalette)(e)?ct(e.value,t,r):e?.value:lt(t,r);function mt({dataItem:e,comparisonStyle:t,isSubItem:r}){const{formattedItem:n}=ze(e),i={...n?.cssStyle||{},...t||{}},a=ve(["comparison-headline-value","s-comparison-headline-value","headline-value","s-headline-value"],{"headline-value--empty s-headline-value--empty":n?.isValueEmpty&&!t?.color});return(0,o.jsx)("div",{style:i,className:a,children:r?`(${n?.value})`:n?.value})}const ft=(0,tt.vU)({singleValuePositiveChange:{id:"visualizations.headline.comparison.ariaLabel.singleValuePositiveChange"},singleValueNegativeChange:{id:"visualizations.headline.comparison.ariaLabel.singleValueNegativeChange"},twoValuesPositiveChange:{id:"visualizations.headline.comparison.ariaLabel.twoValuesPositiveChange"},twoValuesNegativeChange:{id:"visualizations.headline.comparison.ariaLabel.twoValuesNegativeChange"},twoValues:{id:"visualizations.headline.comparison.ariaLabel.twoValues"}}),pt={[ue.POSITIVE_VALUE]:function(){return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("i",{className:"gd-icon-trend-up s-indicator-up","aria-hidden":"true"})})},[ue.NEGATIVE_VALUE]:function(){return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("i",{className:"gd-icon-trend-down s-indicator-down","aria-hidden":"true"})})},[ue.EQUALS_VALUE]:null},ht=(e,t,r=ot)=>{if(e?.disabled||!t)return null;const{providedColor:n,colorType:i}=yt(e,t),a=dt(n,i,r);return a&&(0,rt.yx)(a)},yt=(e,t)=>{switch(t){case ue.POSITIVE_VALUE:return{providedColor:e?.positive,colorType:et.POSITIVE};case ue.NEGATIVE_VALUE:return{providedColor:e?.negative,colorType:et.NEGATIVE};default:case ue.EQUALS_VALUE:return{providedColor:e?.equals,colorType:et.EQUALS}}};function gt(e,t,r){return n=>{if(!r)return;const i=le(r)?r.item:r,a=le(r)?r.subItem:void 0,o=i?Me(i,t):void 0,s=a?Me(a,t):void 0,u=((e,t)=>void 0===e&&t?ft.twoValues:e===ue.POSITIVE_VALUE?t?ft.twoValuesPositiveChange:ft.singleValuePositiveChange:e===ue.NEGATIVE_VALUE?t?ft.twoValuesNegativeChange:ft.singleValueNegativeChange:null)(e,!!s?.value);return u?n.formatMessage(u,{mainValue:o?.value,secondaryValue:s?.value}):o?.value}}const bt=(e,t)=>{const{config:r}=ye(),{colorConfig:n,isArrowEnabled:i}=r.comparison,a=ht(n,e,r.colorPalette);return{style:{...a?{color:a}:{}},indicator:i?pt[e]:null,comparisonAriaLabelFactory:gt(i?e:void 0,r,t)}},vt=Ye((function({dataItem:e,evaluationType:t,onValueOverflow:r,measurementTrigger:n}){const i=(0,ce.Z)(),{style:a,indicator:s,comparisonAriaLabelFactory:u}=bt(t,e),{containerRef:l}=Ne(r,n);return(0,o.jsxs)("div",{ref:l,style:a,className:"headline-value-wrapper s-headline-value-wrapper",children:[(0,o.jsx)(He.ResponsiveText,{minFontSize:10,children:(0,o.jsxs)("div",{className:"comparison-headline-value-wrapper s-comparison-headline-value-wrapper","aria-hidden":!0,children:[s?(0,o.jsx)(s,{}):null,(0,o.jsx)(mt,{dataItem:e,comparisonStyle:a})]})}),(0,o.jsx)("span",{className:"sr-only",children:u?.(i)})]})})),wt=Ye((function({dataItem:e,evaluationType:t,onValueOverflow:r,measurementTrigger:n}){const i=(0,ce.Z)(),{style:a,indicator:s,comparisonAriaLabelFactory:u}=bt(t,e),{containerRef:l}=Ne(r,n);return(0,o.jsxs)("div",{ref:l,style:a,className:"headline-value-wrapper s-headline-value-wrapper",children:[(0,o.jsx)(He.ResponsiveText,{minFontSize:10,children:(0,o.jsxs)("div",{className:"comparison-headline-value-wrapper s-comparison-headline-value-wrapper","aria-hidden":!0,children:[s?(0,o.jsx)(s,{}):null,(0,o.jsx)(mt,{dataItem:e.item,comparisonStyle:a}),(0,o.jsx)(mt,{dataItem:e.subItem,comparisonStyle:a,isSubItem:!0})]})}),(0,o.jsx)("span",{className:"sr-only",children:u?.(i)})]})}));function Ct(e,t,r,i,a,o){const{calculationType:s,format:u,labelConfig:l}=a,c=t?n.CHANGE:n.RATIO,{defaultFormat:d,defaultLabelKeys:m}=ut(s??c);return{title:It(l,m,r,s??c,o),value:xt(e),format:st(u,d)||i}}function kt(e,t,r,n,i){const{calculationType:a,format:o,subFormat:s,labelConfig:u}=n,{defaultFormat:l,defaultSubFormat:c,defaultLabelKeys:d}=ut(a);return{title:It(u,d,t,a,i),item:{value:xt(e),format:st(o,l)||r},subItem:{value:xt(e,!0),format:st(s,c)||r}}}function xt(e,t){const[r,n,i,a]=e;if(!Et(r.value)||!Et(n.value))return null;const{value:o}=t?a:i;return null==o?o:String(o)}function Et(e){return("number"==typeof e||"string"==typeof e&&e.trim())&&!isNaN(e)}function It(e,t,r,i,a){if(e?.isConditional&&i!==n.RATIO)switch(r){case ue.POSITIVE_VALUE:return e?.positive||a.formatMessage({id:t.positiveKey});case ue.NEGATIVE_VALUE:return e?.negative||a.formatMessage({id:t.negativeKey});default:return e?.equals||a.formatMessage({id:t.equalsKey})}return e?.unconditionalValue||a.formatMessage({id:t.nonConditionalKey})}function Bt({dataView:e,drillableItems:t,config:r,onAfterRender:n,onDrill:a}){const l=r?.comparison?r:{...r,comparison:se},{comparison:c}=l,d=(0,ce.Z)(),{handleFiredDrillEvent:m}=me(e,a),f=(0,s.useMemo)((()=>function(e,t,r,n){const a=(0,u.convertDrillableItemsToPredicates)(t??[]),o=u.DataViewFacade.for(e),s=de(o),[l,c]=o.meta().measureDescriptors(),[d,m]=s,f=Je(d,(0,u.isSomeHeaderPredicateMatched)(a,l,o),"primaryValue"),p=Je(m,(0,u.isSomeHeaderPredicateMatched)(a,c,o),"secondaryValue"),h=function(e,t,r,n,i){const[,,,a]=e,o=function(e){const[t,r,n,i]=e;if(!Et(t.value)||!Et(r.value)||!Et(n.value)&&!Et(i?.value))return null;const a=Number(t.value??0),o=Number(r.value??0);return a>o?ue.POSITIVE_VALUE:a<o?ue.NEGATIVE_VALUE:ue.EQUALS_VALUE}(e);return a?{data:kt(e,o,r,n,i),baseHeadlineDataItemComponent:wt,evaluationType:o}:{data:Ct(e,t,o,r,n,i),baseHeadlineDataItemComponent:vt,evaluationType:o}}(s,o.meta().isDerivedMeasure(c),f.data?.format,r,n);return function(e,t){switch(t?.position){case i.TOP:return{primaryItem:e.tertiaryItem,secondaryItem:e.secondaryItem,tertiaryItem:e.primaryItem};case i.RIGHT:return{primaryItem:e.primaryItem,secondaryItem:e.tertiaryItem,tertiaryItem:e.secondaryItem};case i.LEFT:case i.AUTO:default:return e}}({primaryItem:f,secondaryItem:p,tertiaryItem:h},r)}(e,t,c,d)),[e,t,c,d]);return(0,o.jsx)(We,{data:f,config:l,onDrill:m,onAfterRender:n})}class Tt extends oe{comparison;constructor(e){super(),this.comparison=e||se}getHeadlineTransformationComponent(){return Bt}prepareBuckets(e){const t=this.prepareVirtualArithmeticBucket(e);return[...e,t]}prepareVirtualArithmeticBucket(e){const t=(0,f.bucketsFind)(e,u.BucketNames.MEASURES),r=t&&(0,f.bucketMeasure)(t),n=(0,f.bucketsFind)(e,u.BucketNames.SECONDARY_MEASURES),i=n&&(0,f.bucketMeasure)(n);return(0,f.newBucket)("comparison_virtual_arithmetic_bucket",...this.createVirtualArithmeticMeasures(r,i))}createVirtualArithmeticMeasures(e,t){const r=(r,n)=>(0,f.newVirtualArithmeticMeasure)([e,t],r,(e=>(n&&e.combineLocalIdWithOperator(),e)));switch(this.comparison.calculationType){case n.DIFFERENCE:return[r("difference")];case n.RATIO:return[r("ratio")];case n.CHANGE:return[r("change")];case n.CHANGE_DIFFERENCE:return[r("change",!0),r("difference",!0)];default:return(0,f.isPoPMeasure)(t)||(0,f.isPreviousPeriodMeasure)(t)?[r("change")]:[r("ratio")]}}}function At({dataView:e,drillableItems:t,config:r,onAfterRender:n,onDrill:i}){const{handleFiredDrillEvent:a}=me(e,i),l=(0,s.useMemo)((()=>function(e,t){const r=(0,u.convertDrillableItemsToPredicates)(t??[]),n=u.DataViewFacade.for(e),i=de(n),a=n.meta().measureDescriptors(),o=Je(i[0],(0,u.isSomeHeaderPredicateMatched)(r,a[0],n),"primaryValue");let s,l,c,d;return 3===i.length?(s=i[2],l=a[2],c=i[1],d=a[1]):(s=i[1],l=a[1]),{primaryItem:o,secondaryItem:Je(s,l&&(0,u.isSomeHeaderPredicateMatched)(r,l,n),"secondaryValue"),tertiaryItem:Je(c,d&&(0,u.isSomeHeaderPredicateMatched)(r,d,n),"secondaryValue")}}(e,t)),[e,t]);return(0,o.jsx)(We,{data:l,config:r,onDrill:a,onAfterRender:n})}class Mt extends oe{getHeadlineTransformationComponent(){return At}}var Rt;!function(e){e[e.MULTI_MEASURES=0]="MULTI_MEASURES",e[e.COMPARISON=1]="COMPARISON"}(Rt||(Rt={}));const St=(e,t)=>Nt(e,t)===Rt.COMPARISON?new Tt(t?.comparison):new Mt,Nt=(e,t)=>{const r=(0,f.bucketsFind)(e,u.BucketNames.MEASURES),n=r&&(0,f.bucketMeasure)(r),i=(0,f.bucketsFind)(e,u.BucketNames.SECONDARY_MEASURES),a=(0,ie.Z)(i)?[]:(0,f.bucketMeasures)(i);return Dt(n,a,t?.comparison)?Rt.COMPARISON:Rt.MULTI_MEASURES},Dt=(e,t,r)=>{const n=r?.enabled??!0;return e&&1===t?.length&&n},Vt=(0,u.withContexts)((function(e){const{primaryMeasure:t}=e;return(0,re.kG)(t,"The property primaryMeasure must be specified."),(0,o.jsx)(ne,{...Ft(e)})}));function Lt(e){const[t,r,n]=(0,u.useResolveValuesWithPlaceholders)([e.primaryMeasure,e.secondaryMeasure,e.filters],e.placeholdersResolutionContext);return(0,o.jsx)(Vt,{...e,primaryMeasure:t,secondaryMeasure:r,filters:n})}function Ft(e){const t=e.primaryMeasure,r=[e.secondaryMeasure,...e.secondaryMeasures||[]],n=[(0,f.newBucket)(u.BucketNames.MEASURES,t),(0,f.newBucket)(u.BucketNames.SECONDARY_MEASURES,...r)],i=(0,y.Z)(e,["primaryMeasure","secondaryMeasure","filters","backend"]),a=St(n,e.config);return{...i,headlineTransformation:a.getHeadlineTransformationComponent(),execution:jt(a,n,e),exportTitle:e.exportTitle||"Headline",enableExecutionCancelling:e.config?.enableExecutionCancelling??!1}}function jt(e,t,r){const{backend:n,workspace:i,execConfig:a,filters:o}=r,s=n.withTelemetry("Headline",r).workspace(i).execution();return e.createExecution(s,{buckets:t,filters:o,executionConfig:a})}const Pt=(0,s.memo)((function(e){return(0,o.jsx)(m,{type:"heatmap",...e})})),Ot=b({chartName:"Heatmap",bucketPropsKeys:["measure","rows","columns","filters","sortBy"],bucketsFactory:e=>[(0,f.newBucket)(u.BucketNames.MEASURES,e.measure),(0,f.newBucket)(u.BucketNames.VIEW,e.rows),(0,f.newBucket)(u.BucketNames.STACK,e.columns)],executionFactory:(e,t)=>{const{backend:r,workspace:n,execConfig:i}=e,a=e.sortBy??function(e){const t=(0,f.bucketsFind)(e,u.BucketNames.VIEW),r=t?(0,f.bucketAttribute)(t):void 0;return r?[(0,f.newAttributeSort)(r,"desc")]:[]}(t);return r.withTelemetry("Heatmap",e).workspace(n).execution().forBuckets(t,e.filters).withSorting(...a).withDimensions(E).withExecConfig(i)}})(Pt);function Ut(e){const[t,r,n,i,a]=(0,u.useResolveValuesWithPlaceholders)([e.measure,e.rows,e.columns,e.filters,e.sortBy],e.placeholdersResolutionContext);return(0,o.jsx)(Ot,{...e,measure:t,rows:r,columns:n,filters:i,sortBy:a})}const Wt=(0,s.memo)((function(e){return(0,o.jsx)(m,{type:"line",...e})}));function Ht(e){return C(e,u.BucketNames.TREND,u.BucketNames.SEGMENT)}const zt=b({chartName:"LineChart",bucketPropsKeys:["measures","trendBy","segmentBy","filters","sortBy"],bucketsFactory:e=>[(0,f.newBucket)(u.BucketNames.MEASURES,...e.measures),(0,f.newBucket)(u.BucketNames.TREND,e.trendBy),(0,f.newBucket)(u.BucketNames.SEGMENT,e.segmentBy)],executionFactory:(e,t)=>{const{backend:r,workspace:n,execConfig:i}=e,a=e.sortBy??[];return r.withTelemetry("LineChart",e).workspace(n).execution().forBuckets(t,e.filters).withSorting(...a).withDimensions(Ht).withExecConfig(i)}})(Wt);function _t(e){const[t,r,n,i,a]=(0,u.useResolveValuesWithPlaceholders)([e.measures,e.trendBy,e.segmentBy,e.filters,e.sortBy],e.placeholdersResolutionContext);return(0,o.jsx)(zt,{...e,measures:t,trendBy:r,segmentBy:n,filters:i,sortBy:a})}const Kt=(0,s.memo)((function(e){return(0,o.jsx)(m,{type:"pie",...e})})),Gt=b({chartName:"PieChart",bucketPropsKeys:["measures","viewBy","filters","sortBy"],bucketsFactory:e=>[(0,f.newBucket)(u.BucketNames.MEASURES,...e.measures),(0,f.newBucket)(u.BucketNames.VIEW,e.viewBy)],executionFactory:(e,t)=>{const{backend:r,workspace:n,execConfig:i}=e,a=e.sortBy??[];return r.withTelemetry("PieChart",e).workspace(n).execution().forBuckets(t,e.filters).withSorting(...a).withDimensions(x).withExecConfig(i)}})(Kt);function $t(e){const[t,r,n,i]=(0,u.useResolveValuesWithPlaceholders)([e.measures,e.viewBy,e.filters,e.sortBy],e.placeholdersResolutionContext);return(0,o.jsx)(Gt,{...e,measures:t,viewBy:r,filters:n,sortBy:i})}const Zt=(0,s.memo)((function(e){const{config:t}=e,r=t?.clustering?{clusteringConfig:t.clustering}:{};return(0,o.jsx)(m,{type:"scatter",...e,...r})})),Xt=b({chartName:"ScatterPlot",bucketPropsKeys:["xAxisMeasure","yAxisMeasure","attribute","segmentBy","filters","sortBy"],bucketsFactory:e=>[(0,f.newBucket)(u.BucketNames.MEASURES,e.xAxisMeasure),(0,f.newBucket)(u.BucketNames.SECONDARY_MEASURES,e.yAxisMeasure),(0,f.newBucket)(u.BucketNames.ATTRIBUTE,e.attribute),(0,f.newBucket)(u.BucketNames.SEGMENT,e.segmentBy)],executionFactory:(e,t)=>{const{backend:r,workspace:n,execConfig:i}=e,a=e.sortBy??[];return r.withTelemetry("ScatterPlot",e).workspace(n).execution().forBuckets(t,e.filters).withSorting(...a).withDimensions(k).withExecConfig(i)}})(Zt);function Yt(e){const[t,r,n,i,a,s]=(0,u.useResolveValuesWithPlaceholders)([e.xAxisMeasure,e.yAxisMeasure,e.attribute,e.segmentBy,e.filters,e.sortBy],e.placeholdersResolutionContext);return(0,o.jsx)(Xt,{...e,xAxisMeasure:t,yAxisMeasure:r,attribute:n,segmentBy:i,filters:a,sortBy:s})}const qt=(0,s.memo)((function(e){return(0,o.jsx)(m,{type:"treemap",...e})})),Qt=b({chartName:"Treemap",bucketPropsKeys:["measures","viewBy","segmentBy","filters"],bucketsFactory:e=>[(0,f.newBucket)(u.BucketNames.MEASURES,...e.measures),(0,f.newBucket)(u.BucketNames.VIEW,e.viewBy),(0,f.newBucket)(u.BucketNames.SEGMENT,e.segmentBy)],executionFactory:(e,t)=>{const{backend:r,workspace:n,execConfig:i}=e,a=function(e){const t=(0,f.bucketsFind)(e,u.BucketNames.VIEW),r=(0,f.bucketsFind)(e,u.BucketNames.SEGMENT),n=t?(0,f.bucketAttribute)(t):void 0,i=r?(0,f.bucketAttribute)(r):void 0;if(n&&i){const t=(0,f.bucketsMeasures)(e);return[(0,f.newAttributeSort)(n,"asc"),...t.map((e=>(0,f.newMeasureSort)(e,"desc")))]}return[]}(t);return r.withTelemetry("Treemap",e).workspace(n).execution().forBuckets(t,e.filters).withSorting(...a).withDimensions(I).withExecConfig(i)}})(qt);function Jt(e){const[t,r,n,i]=(0,u.useResolveValuesWithPlaceholders)([e.measures,e.viewBy,e.segmentBy,e.filters],e.placeholdersResolutionContext);return(0,o.jsx)(Qt,{...e,measures:t,viewBy:r,segmentBy:n,filters:i})}const er=(0,s.memo)((function(e){return(0,o.jsx)(m,{type:"sankey",...e})})),tr=b({chartName:"SankeyChart",bucketPropsKeys:["measure","attributeFrom","attributeTo","filters","sortBy"],bucketsFactory:e=>[(0,f.newBucket)(u.BucketNames.MEASURES,e.measure),(0,f.newBucket)(u.BucketNames.ATTRIBUTE_FROM,e.attributeFrom),(0,f.newBucket)(u.BucketNames.ATTRIBUTE_TO,e.attributeTo)],executionFactory:(e,t)=>{const{backend:r,workspace:n,execConfig:i}=e;return r.withTelemetry("SankeyChart",e).workspace(n).execution().forBuckets(t,e.filters).withDimensions(B).withExecConfig(i)}})(er);function rr(e){const[t,r,n,i,a]=(0,u.useResolveValuesWithPlaceholders)([e.measure,e.attributeFrom,e.attributeTo,e.filters,e.sortBy],e.placeholdersResolutionContext);return(0,o.jsx)(tr,{...e,measure:t,attributeFrom:r,attributeTo:n,filters:i,sortBy:a})}const nr=(0,s.memo)((function(e){return(0,o.jsx)(m,{type:"dependencywheel",...e})})),ir=b({chartName:"DependencyWheelChart",bucketPropsKeys:["measure","attributeFrom","attributeTo","filters","sortBy"],bucketsFactory:e=>[(0,f.newBucket)(u.BucketNames.MEASURES,e.measure),(0,f.newBucket)(u.BucketNames.ATTRIBUTE_FROM,e.attributeFrom),(0,f.newBucket)(u.BucketNames.ATTRIBUTE_TO,e.attributeTo)],executionFactory:(e,t)=>{const{backend:r,workspace:n,execConfig:i}=e;return r.withTelemetry("DependencyWheelChart",e).workspace(n).execution().forBuckets(t,e.filters).withDimensions(T).withExecConfig(i)}})(nr);function ar(e){const[t,r,n,i,a]=(0,u.useResolveValuesWithPlaceholders)([e.measure,e.attributeFrom,e.attributeTo,e.filters,e.sortBy],e.placeholdersResolutionContext);return(0,o.jsx)(ir,{...e,measure:t,attributeFrom:r,attributeTo:n,filters:i,sortBy:a})}const or=(0,s.memo)((function(e){return(0,o.jsx)(m,{type:"waterfall",...e})})),sr=b({chartName:"WaterfallChart",bucketPropsKeys:["measures","viewBy","filters","sortBy"],bucketsFactory:e=>[(0,f.newBucket)(u.BucketNames.MEASURES,...e.measures),(0,f.newBucket)(u.BucketNames.VIEW,e.viewBy)],executionFactory:(e,t)=>{const{backend:r,workspace:n,execConfig:i}=e,a=e.sortBy??[];return r.withTelemetry("WaterfallChart",e).workspace(n).execution().forBuckets(t,e.filters).withSorting(...a).withDimensions(x).withExecConfig(i)}})(or);function ur(e){const[t,r,n,i]=(0,u.useResolveValuesWithPlaceholders)([e.measures,e.viewBy,e.filters,e.sortBy],e.placeholdersResolutionContext);return(0,o.jsx)(sr,{...e,measures:t,viewBy:r,filters:n,sortBy:i})}var lr=r(68652),cr=r(91771),dr=r(10146);function mr(e,t,r){const[n,i]=(0,cr.d)(r?.in,e,t),a=fr(n,i),o=Math.abs((0,dr.w)(n,i));n.setDate(n.getDate()-a*o);const s=a*(o-Number(fr(n,i)===-a));return 0===s?0:s}function fr(e,t){const r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}var pr=r(11442),hr=r(58811),yr=function(e,t){return e&&e.length?(0,hr.Z)(e,(0,pr.Z)(t,2)):0};const gr=e=>{if(!e?.length)return NaN;return((e,t=.1)=>{const r=e[0].when,n=e.map((e=>({C_n:e.amount,t_n:mr(e.when,r)/365})));return((e,t,r)=>{const n=Math.pow(10,-4);let i=0,a=0,o=r;do{if(i=o,o=i-e(o)/t(o),++a>=100)return NaN}while(Math.abs(o-i)>n);return o})((e=>yr(n,(({t_n:t,C_n:r})=>r/Math.pow(1+e,t)))),(e=>-1*yr(n,(({t_n:t,C_n:r})=>t*r/Math.pow(1+e,t+1)))),t)})(e.map((e=>({amount:null==e.value?0:Number.parseFloat(e.value.toString()),date:e.date}))).filter((e=>0!==e.amount)).map((({amount:e,date:t})=>({amount:e,when:new Date(t)}))))};const br=(0,fe.b)(pe.Z);var vr=function({data:e,config:t={},onDrill:r=(()=>!0),onAfterRender:n=(()=>{}),disableDrillUnderline:i=!1}){const a=(0,s.useRef)(null),u=(0,s.useRef)(null),l=(0,s.useRef)(!1);(0,s.useEffect)((()=>(u.current=setTimeout((()=>{l.current||n()}),3e3),()=>{u.current&&clearTimeout(u.current)})),[n]);const c=(0,s.useCallback)((e=>ve(["headline-primary-item","s-headline-primary-item",...Re(e.isDrillable)])),[]),d=(0,s.useCallback)((e=>ve(["gd-flex-item","headline-compare-section-item","headline-secondary-item","s-headline-secondary-item",...Re(e.isDrillable)])),[]),m=(0,s.useCallback)((e=>ve(["headline-value-wrapper","s-headline-value-wrapper"],{"headline-value--empty":e.isValueEmpty,"s-headline-value--empty":e.isValueEmpty})),[]),f=(0,s.useCallback)(((e,t,n)=>{if(r){const i={localIdentifier:e.localIdentifier,value:e.value,element:t};r(i,n)}}),[r]),p=(0,s.useCallback)((t=>{const{primaryItem:r}=e;f(r,"primaryValue",t.target)}),[e,f]),h=(0,s.useCallback)((t=>{const{secondaryItem:r}=e;f(r,"secondaryValue",t.target)}),[e,f]),y=(0,s.useCallback)((()=>{const{tertiaryItem:t}=e,r=function(e){if(null===e?.value||Number.isNaN(parseFloat(e.value)))return{value:Ie,isValueEmpty:!0};const t=Math.round(parseFloat(e.value));let r=`${t}%`;return t>Te?r=">999%":t<-999&&(r="<-999%"),{value:r,isValueEmpty:!1}}(t);return(0,o.jsxs)("div",{className:"gd-flex-item headline-compare-section-item headline-tertiary-item s-headline-tertiary-item",children:[(0,o.jsx)("div",{className:m(r),children:r.value}),(0,o.jsx)("div",{className:"headline-title-wrapper s-headline-title-wrapper",title:t.title,children:t.title})]})}),[e,m]),g=(0,s.useCallback)((e=>{const t=ve(["headline-value","s-headline-value"],{"headline-value--empty":e.isValueEmpty,"s-headline-value--empty":e.isValueEmpty,"headline-link-style-underline":!i});return(0,o.jsx)("div",{className:t,children:e.value})}),[i]),b=(0,s.useCallback)((e=>(0,o.jsx)("div",{className:"headline-item-link s-headline-item-link",children:g(e)})),[g]),v=(0,s.useCallback)(((e,t)=>e.isDrillable?b(t):g(t)),[b,g]),w=(0,s.useCallback)((()=>{const{secondaryItem:r}=e,n=Me(r,t),i=r.isDrillable?h:null,s=r.isDrillable?b(n):g(n);return(0,o.jsxs)("div",{className:d(r),onClick:i,children:[(0,o.jsx)("div",{className:"headline-value-wrapper s-headline-value-wrapper",style:n.cssStyle,children:(0,o.jsx)(He.ResponsiveText,{children:s})}),(0,o.jsx)("div",{className:"headline-title-wrapper s-headline-title-wrapper",title:r.title,ref:a,children:r.title})]})}),[e,t,h,b,g,d]),C=(0,s.useCallback)(((r,n)=>{const{secondaryItem:i}=e;return i?xe(t.enableCompactSize,r,n)?(0,o.jsx)("div",{className:"gd-flex-container headline-compare-section headline-paginated-compare-section",children:(0,o.jsx)(Ce,{renderSecondaryItem:w,renderTertiaryItem:y})}):(0,o.jsxs)("div",{className:Se(r,a),children:[y(),w()]}):null}),[t.enableCompactSize,e,w,y]),k=(0,s.useCallback)((r=>{const{primaryItem:n,secondaryItem:i}=e,a=Me(n,t),s=n.isDrillable?p:null;if(t.enableCompactSize){if(!r)return null;const{height:e,fontSize:t}=ke(!!i,r),u={height:`${e}px`,lineHeight:`${e}px`};return(0,o.jsx)("div",{className:c(n),style:{...a.cssStyle,...u},children:(0,o.jsx)("div",{style:{fontSize:`${t}px`},children:(0,o.jsx)(He.ResponsiveText,{children:(0,o.jsx)("div",{className:"headline-value-wrapper",onClick:s,children:v(n,a)})})})})}return(0,o.jsx)("div",{className:c(n),style:a.cssStyle,children:(0,o.jsx)(He.ResponsiveText,{children:(0,o.jsx)("div",{className:"headline-value-wrapper",onClick:s,children:v(n,a)})})})}),[t,e,c,p,v]);return(0,o.jsx)(br,{client:!0,onResize:e=>{e?.client?.width>0&&e?.client?.height>0&&!l.current&&(n(),l.current=!0)},children:({measureRef:e,contentRect:t})=>(0,o.jsxs)("div",{className:"headline",ref:e,children:[k(t.client?.height),C(t.client?.width,t.client?.height)]})})};function wr({drillableItems:e=[],config:t={},onDrill:r=(()=>!0),onAfterRender:n=(()=>{}),dataView:i}){const a=(0,s.useCallback)((()=>!!t&&t.disableDrillUnderline),[t]),l=(0,s.useCallback)(((e,t)=>{const n=function(e,t){const r=u.DataViewFacade.for(t).meta().measureDescriptor(e.localIdentifier);if(!r)throw new Error("The metric uri has not been found in execution response!");const n={header:r};return{dataView:t,drillContext:{type:u.VisualizationTypes.XIRR,element:"primaryValue",value:e.value,intersection:[n]}}}(e,i);(0,u.fireDrillEvent)(r,n,t)}),[i,r]),c=(0,u.convertDrillableItemsToPredicates)(e),d=function(e,t,r){const n=u.DataViewFacade.for(r),i=(0,lr.Z)(e),{primaryItem:a}=i,[o]=n.meta().measureDescriptors();return(0,ie.Z)(a)||(0,ie.Z)(o)||(a.isDrillable=(0,u.isSomeHeaderPredicateMatched)(t,o,n)),i}(function(e){const t=u.DataViewFacade.for(e),r=t.meta().measureDescriptors()[0],n=function(e){const t=e.meta().attributeHeaders()[0][0],r=e.rawData().singleDimData();return t?t.map(((e,t)=>{const n=r[t];return(0,re.kG)(void 0!==n,"Undefined execution value data for XIRR transformation"),(0,re.kG)(e.attributeHeaderItem,"Missing expected attributeHeaderItem"),{date:(0,u.getMappingHeaderFormattedName)(e),value:n}})):[]}(t),i=gr(n);return{primaryItem:{localIdentifier:r.measureHeaderItem.localIdentifier,title:r.measureHeaderItem.name,value:i?String(i):null,format:r.measureHeaderItem.format,isDrillable:!1}}}(i),c,i),m=a();return(0,o.jsx)(vr,{data:d,config:t,onDrill:l,onAfterRender:n,disableDrillUnderline:m})}const Cr=(0,u.withEntireDataView)((function(e){const{dataView:t,error:r,isLoading:n,intl:i,afterRender:a,drillableItems:l,locale:c,onDrill:m,config:f}=d(e),p=(0,s.useMemo)((()=>(0,u.newErrorMapping)(i)),[i]),h=e.ErrorComponent,y=e.LoadingComponent;if(r){const e=p[Object.prototype.hasOwnProperty.call(p,r)?r:u.ErrorCodes.UNKNOWN_ERROR];return h?(0,o.jsx)(h,{code:r,...e}):null}return n||!t?y?(0,o.jsx)(y,{}):null:(0,o.jsx)(u.IntlWrapper,{locale:c,children:(0,o.jsx)(wr,{dataView:t,onAfterRender:a,onDrill:m,drillableItems:l,config:f})})})),kr=(0,u.withContexts)((function(e){return(0,o.jsx)(Cr,{...Er(e)})}));function xr(e){const[t,r,n]=(0,u.useResolveValuesWithPlaceholders)([e.measure,e.attribute,e.filters],e.placeholdersResolutionContext);return(0,o.jsx)(kr,{...e,measure:t,attribute:r,filters:n})}function Er(e){const t=[(0,f.newBucket)(u.BucketNames.MEASURES,e.measure),(0,f.newBucket)(u.BucketNames.ATTRIBUTE,e.attribute)];return{...(0,y.Z)(e,["measure","attribute","filters","backend"]),execution:Ir(t,e),exportTitle:e.exportTitle||"Xirr",enableExecutionCancelling:e.config?.enableExecutionCancelling??!1}}function Ir(e,t){const{backend:r,workspace:n,execConfig:i}=t;return r.withTelemetry("Xirr",t).workspace(n).execution().forBuckets(e,t.filters).withDimensions((0,f.newDimension)([f.MeasureGroupIdentifier,...(0,f.bucketsAttributes)(e)])).withExecConfig(i)}function Br(e,t,r,n){const i=(0,f.attributeDisplayFormRef)(e).identifier,a=!!r,o=t.map((e=>{if((0,f.isMeasure)(e)){const t=(0,f.measureLocalId)(e);return"metric"===(n?.[t]?.type??"metric")&&a?function(e,t){if((0,f.isInlineMeasure)(e))return e;if((0,f.isArithmeticMeasure)(e))return e;const r=(0,f.measureItem)(e),n=(0,f.measureAggregation)(e),i=`{${"measure"===r.type?"metric":r.type}/${r.identifier}}`;let a;a=n?`SELECT ${n}(${i})`:`SELECT ${i}`,a+=` BY ALL OTHER EXCEPT {label/${t}}`;const o=(0,f.newInlineMeasure)(a);return(0,f.modifyInlineMeasure)(o,(t=>t.format((0,f.measureFormat)(e)).localId((0,f.measureLocalId)(e)).title((0,f.measureTitle)(e)).alias((0,f.measureAlias)(e))))}(e,i):e}return e}));return[(0,f.newBucket)(u.BucketNames.ATTRIBUTE,e),(0,f.newBucket)(u.BucketNames.COLUMNS,...o),r?(0,f.newBucket)(u.BucketNames.VIEW,r):void 0].filter(Boolean)}function Tr(e){const t=(0,f.bucketsFind)(e,u.BucketNames.ATTRIBUTE),r=(t?(0,f.bucketAttributes)(t):[])[0],n=(0,f.bucketsFind)(e,u.BucketNames.COLUMNS);let i=[],a=[];n&&(i=n?(0,f.bucketMeasures)(n):[],a=n?(0,f.bucketAttributes)(n):[]);const o=(0,f.bucketsFind)(e,u.BucketNames.VIEW);let s,l=[];o&&(l=(0,f.bucketAttributes)(o),s=l[0]);const c=[[r,...a]];return(s||i.length>0)&&c.push([]),s&&c[1].push(s),i.length>0&&c[1].push(f.MeasureGroupIdentifier),c.map((e=>(0,f.newDimension)(e)))}function Ar(e){return function(t,r){const n=Ee.X.convertValue(t),{formattedValue:i}=Ee.X.formatValue(n,r,e);return i}}const Mr=(e,t=0,r=100)=>{const n=2===e;return{offset:n?[t,0]:[t],size:n?[r-t,1e3]:[r-t]}};class Rr{rowCount;dataViewFacade;onError;config;constructor(e,t,r){const[n]=e.dataView.count;this.dataViewFacade=e,this.rowCount=n,this.onError=t.onError,this.config=r}async loadExecutionWindow(e,t){const r=this.dataViewFacade.meta().dimensions().length,{offset:n,size:i}=Mr(r,e,t);return this.dataViewFacade.result().readWindow(n,i)}getRows=e=>{const{startRow:t,endRow:r,successCallback:n,failCallback:i}=e;this.loadExecutionWindow(t,r).then((e=>{const t=function(e,t){const r=[],[n,i]=[e.meta().dimensionItemDescriptors(0),e.meta().dimensionItemDescriptors(1)],[a,o]=e.meta().allHeaders(),s=i.find(f.isMeasureGroupDescriptor)?.measureGroupHeader?.items.length??0;return n.forEach(((e,t)=>{if((0,f.isAttributeDescriptor)(e)){const n=(0,f.attributeDescriptorLocalId)(e);a[t].forEach(((e,t)=>{r[t]=r[t]||{},r[t][n]=e.attributeHeaderItem}))}})),i.forEach((n=>{if((0,f.isAttributeDescriptor)(n)){const e=(0,f.attributeDescriptorLocalId)(n),t=o[i.indexOf(n)];r.forEach((r=>{r[e]=t.filter(((e,t)=>t%s==0)).map((e=>e.attributeHeaderItem))}))}else(0,f.isMeasureGroupDescriptor)(n)&&n.measureGroupHeader.items.forEach((n=>{[...e.data({valueFormatter:Ar(t)}).series().allForMeasure(n.measureHeaderItem.localIdentifier)].forEach(((e,t)=>{e.dataPoints().forEach(((e,i)=>{const a=n.measureHeaderItem.localIdentifier;r[i][a]=r[i][a]||[],r[i][a][t]=function(e){return{formattedValue:e.formattedValue(),value:"string"==typeof e.rawValue?parseInt(e.rawValue,10):e.rawValue}}(e)}))}))}))})),r}(u.DataViewFacade.for(e),this.config?.separators);n(t,e.totalCount[0])})).catch((e=>{console.error("error",{error:e}),i(),this.onError?.(e)}))}}var Sr=r(51256),Nr=r(50975),Dr=r(67266),Vr=r(38467),Lr=r(75708);function Fr({sliceValue:e,metricValue:t,sliceTitle:r,metricTitle:n,pointColor:i="#14B2E2"}){return`\n<div class="hc-tooltip gd-viz-tooltip">\n    <span class="gd-viz-tooltip-stroke" style="${i?`border-top-color: ${i};`:""}"></span>\n    <div class="gd-viz-tooltip-content">\n        ${r&&e?`\n<div class="gd-viz-tooltip-item">\n    <div class="gd-viz-tooltip-title">${r}</div>\n    <div class="gd-viz-tooltip-value-wraper">\n        <div class="gd-viz-tooltip-value">${e}</div>\n    </div>\n</div>`:""}\n        <div class="gd-viz-tooltip-item">\n            <div class="gd-viz-tooltip-title">${n}</div>\n            <div class="gd-viz-tooltip-value-wraper">\n                <div class="gd-viz-tooltip-value">${t}</div>\n            </div>\n        </div>\n    </div>\n</div>`}function jr(e){const t=function({height:e,data:t,headerItems:r,metricTitle:n,sliceTitle:i,color:a}){return{credits:{enabled:!1},accessibility:{enabled:!1},title:{text:void 0,style:{height:0,width:0}},chart:{backgroundColor:"transparent",height:e,margin:1},yAxis:{visible:!1},xAxis:{visible:!1},legend:{enabled:!1},tooltip:{shared:!0,outside:!0,useHTML:!0,formatter:function(){const e=r[this.x]?.name,o=t[this.x]?.formattedValue;return Fr({metricTitle:n,metricValue:o,sliceTitle:i,sliceValue:e,pointColor:a})}},plotOptions:{series:{states:{inactive:{opacity:1}}}},series:[{type:"column",color:a,data:t.map((e=>e.value)),states:{hover:{enabled:!1}},borderRadius:0}]}}(e);return(0,o.jsx)(Lr.HighchartsReact,{options:t,highcharts:Vr.Z})}function Pr(e){const t=function({height:e,data:t,headerItems:r,metricTitle:n,sliceTitle:i,color:a}){return{accessibility:{enabled:!1},credits:{enabled:!1},title:{text:void 0,style:{height:0,width:0}},chart:{backgroundColor:"transparent",height:e,margin:5},yAxis:{visible:!1},xAxis:{visible:!1},legend:{enabled:!1},tooltip:{shared:!0,outside:!0,useHTML:!0,formatter:function(){const e=r[this.x]?.name,o=t[this.x]?.formattedValue;return Fr({metricTitle:n,metricValue:o,sliceTitle:i,sliceValue:e,pointColor:a})}},plotOptions:{series:{states:{inactive:{opacity:1}}}},series:[{lineWidth:e>30?2:1,type:"line",color:a,data:t.map((e=>e.value)),states:{hover:{enabled:!1}},marker:{radius:e>30?3:2}}]}}(e);return(0,o.jsx)(Lr.HighchartsReact,{options:t,highcharts:Vr.Z})}function Or(e,t,r){const n=[...e.meta().attributeDescriptors(),...e.meta().measureDescriptors()].find((e=>(0,f.isAttributeDescriptor)(e)?e.attributeHeader.localIdentifier===r.field:e.measureHeaderItem.localIdentifier===r.field));return(0,u.isSomeHeaderPredicateMatched)(t,n,e)?n:null}const Ur=500;var Wr,Hr;function zr(e,t){return e.current.manuallyResizedColumns.find((e=>e.getColId()===t.getColId()))??null}function _r(e,t){if(!t.growToFit)return;const{columnApi:r}=e.current;if(!r)return;const n=r.getAllGridColumns(),i=n.filter((t=>t.getColDef().resizable&&!zr(e,t))),a=n.filter((t=>t.getColDef().resizable&&zr(e,t)));if(0===i.length)return;const o=a.map((e=>e.getActualWidth())).reduce(((e,t)=>e+t),0),s=t.clientWidth-15;if(o>=s)return;const u=(s-o)/i.length,l=[];i.forEach((e=>{l.push({key:e.getColId(),newWidth:u})})),setTimeout((()=>{r.setColumnWidths(l),r.refreshCells()}),0)}!function(e){e.AUTOSIZE_COLUMNS="autosizeColumns",e.FIT_GROW="growToFit",e.UI_RESIZED="uiColumnResized"}(Wr||(Wr={})),function(e){e[e.CLICK=1]="CLICK",e[e.DOUBLE_CLICK=2]="DOUBLE_CLICK"}(Hr||(Hr={}));const Kr=300,Gr=2e3,$r=500;function Zr(e,t,r){const n=[],i=t.current.columnApi;i&&(r.widths?.forEach((r=>{if(a=r,void 0!==a?.attributeColumnWidthItem){const a=e.find((e=>e.field===r.attributeColumnWidthItem.attributeIdentifier));if(a&&!i&&(a.width=r.attributeColumnWidthItem.width.value),a&&i){const e=i.getAllGridColumns().find((e=>e.getColDef().field===a.field));n.push({key:e.getColId(),newWidth:r.attributeColumnWidthItem.width.value}),zr(t,e)||t.current.manuallyResizedColumns.push(e)}}var a;if(function(e){return e?.measureColumnWidthItem&&void 0!==e?.measureColumnWidthItem.locators}(r)&&r.measureColumnWidthItem.locators.forEach((i=>{const a=Xr(e,t,i,r.measureColumnWidthItem.width.value);a&&n.push(a)})),function(e){return e?.measureColumnWidthItem&&void 0!==e?.measureColumnWidthItem.locator}(r)){const i=Xr(e,t,r.measureColumnWidthItem.locator,r.measureColumnWidthItem.width.value);i&&n.push(i)}})),setTimeout((()=>{i.setColumnWidths(n.filter((e=>!!e))),i.refreshCells()}),0))}function Xr(e,t,r,n){const i=t.current.columnApi;if(a=r,void 0!==a?.measureLocatorItem){const a=e.find((e=>e.field===r.measureLocatorItem.measureIdentifier));if(a&&!i&&"auto"!==n&&(a.width=n,a.suppressSizeToFit=!0),a&&i&&"auto"!==n){const e=i.getAllGridColumns().find((e=>e.getColDef().field===a.field));return zr(t,e)||t.current.manuallyResizedColumns.push(e),{key:e.getColId(),newWidth:n}}}var a}function Yr(e,t){_r(e,t);const r=function(e){const t=e.columnApi;return t?[...e.manuallyResizedColumns.map((r=>{const n=t.getColumn(r.getColId()),i=function(e,t){return e.items.find((e=>(0,f.isMeasure)(e)?e.measure.localIdentifier===t.getColDef().field:e.attribute.localIdentifier===t.getColDef().field))}(e,n),a=function(e,t,r){if((0,f.isAttribute)(e)){const n=e.attribute.localIdentifier;if(Number(r.value)===r.value)return{attributeColumnWidthItem:{width:r,attributeIdentifier:n}};throw new re.ej(`width value for attributeColumnWidthItem has to be number ${t.getColId()}`)}if((0,f.isMeasure)(e))return{measureColumnWidthItem:{width:r,locators:[(n=e,{measureLocatorItem:{measureIdentifier:n.measure.localIdentifier}})]}};var n;throw new re.ej(`could not find header matching ${t.getColId()}`)}(i,n,{value:n.getActualWidth(),allowGrowToFit:!1});return(0,re.kG)(a,`unable to find size item by filed ${r.getColId()}`),a}))]:[]}(e.current);t.onColumnResized?.(r)}function qr(e,t,r){!function(e,t,r,n){t.forEach((t=>{const n=e.getColumn(t);n&&(n.maxWidth=r,n.getColDef().maxWidth=r)}))}(e,t,r)}Sr.O3h.registerModules([Sr.ea9]),(0,Sr.hbW)({theme:"legacy"});const Qr={resizable:!0,sortable:!1,suppressHeaderMenuButton:!0};function Jr(e){const{dataView:t,onError:r,config:n,afterRender:i}=e,a=(0,s.useMemo)((()=>new Rr(t,{onError:r},n)),[t.fingerprint(),r,n]),l=un(n),c=(0,s.useMemo)((()=>(0,f.bucketsFind)(t.definition.buckets,u.BucketNames.COLUMNS).items??[]),[t.fingerprint()]),d=(0,s.useMemo)((()=>{let e=0;return c.map((r=>{const i={headerName:dn(r,t,n.enableAliasAttributeLabel),field:(a=r,(0,f.isMeasure)(a)?(0,f.measureLocalId)(a):(0,f.attributeLocalId)(a)),cellClass:"gd-cell",minWidth:50};var a;if((0,f.isMeasure)(r)){const a=(0,f.measureLocalId)(r),s=mn(r,t),u=pn(t),l=function(e){return function(e){const t=e.meta().attributeDescriptors(),r=pn(e);return t.find((e=>e.attributeHeader.localIdentifier===r))}(e)?.attributeHeader?.name}(t),c=function(e,t,r,n){const i=fn(e,t),a=r?.colorPalette,o=r?.colorMapping?.find((e=>e.predicate?.(i,{dv:t})));let s;if("rgb"===o?.color?.type){const e=o.color.value;s=`rgb(${e.r}, ${e.g}, ${e.b})`}else if("guid"===o?.color?.type){const e=a?.find((e=>e.guid===o.color.value));if(e){const t=e.fill;s=`rgb(${t.r}, ${t.g}, ${t.b})`}}if(!s){const e=a?.[n];if(e){const t=e.fill;s=`rgb(${t.r}, ${t.g}, ${t.b})`}else s="#14B2E2"}return s}(r,t,n,e);return e+=1,{...i,cellRenderer:function(e){const{node:t}=e,r=e.value,n=void 0===t.id;return(0,o.jsx)(rn,{measureColumnData:r,isLoading:n})},valueGetter:e=>({measureLocalId:a,measureTitle:s,measureDataPoints:e.data?.[a],viewByAttributeTitle:l,viewByAttributeHeaderItems:e.data?.[u]??[],config:n,measureColor:c})}}{const e=t.meta().attributeDescriptors(),a=(0,f.attributeLocalId)(r),s=function(e){const t=e.attributeHeader.labelType;return"GDC.image"===t?"image":"GDC.link"===t?"hyperlink":"text"}(e.find((e=>e.attributeHeader.localIdentifier===a)));return{...i,cellRenderer:function(e){const{node:t}=e,r=e.value,n=void 0===t.id;return(0,o.jsx)(nn,{attributeColumnData:r,isLoading:n})},valueGetter:e=>({attributeLocalId:a,value:e.data?.[a]?.name,config:n,renderingType:s})}}}))}),[c,n?.cellVerticalAlign,n?.cellTextWrapping,n?.cellImageSizing,n?.hyperLinks,n?.inlineVisualizations]),{onColumnResized:m,onGridReady:p,containerRef:h}=function(e,t,r){const n=(0,s.useRef)(null),i=(0,s.useRef)({items:t,isAltKeyPressed:!1,isMetaOrCtrlKeyPressed:!1,clicks:0,columnApi:null,manuallyResizedColumns:[]});(0,s.useEffect)((()=>{const e=n.current;if(e){const t=e=>{i.current.isAltKeyPressed=e.altKey,i.current.isMetaOrCtrlKeyPressed=e.metaKey||e.ctrlKey};return e.addEventListener("mousedown",t),()=>{e.removeEventListener("mousedown",t)}}}),[n,i]);const a=(0,s.useMemo)((()=>({defaultWidth:200,growToFit:!0===r.config?.columnSizing?.growToFit,columnAutoresizeOption:r.config?.columnSizing?.defaultWidth??"unset",widths:r.config?.columnSizing?.columnWidths,isAltKeyPressed:i.current.isAltKeyPressed,isMetaOrCtrlKeyPressed:i.current.isMetaOrCtrlKeyPressed,clientWidth:n.current?.getElementsByClassName("ag-body-viewport")[0]?.clientWidth??0,containerRef:n.current,separators:r?.config?.separators,onColumnResized:r.onColumnResized})),[r.config,r.onColumnResized,i]),o=(0,s.useCallback)((e=>{e.finished&&function(e){return e?.source===Wr.UI_RESIZED&&!!e.columns}(e)&&async function(e,t,r){e.current.clicks++,await async function(e){return new Promise((t=>{setTimeout(t,e)}))}(Kr),e.current.clicks===Hr.DOUBLE_CLICK?(e.current.clicks=0,await async function(e,t,r){const n=e.current.columnApi;for(const i of r)if(e.current.manuallyResizedColumns=e.current.manuallyResizedColumns.filter((e=>e.getColId()!==i.getColId())),i.getColDef().suppressSizeToFit=!1,!t.growToFit){const t=[i.getColId()];qr(e.current.columnApi,t,$r),n.autoSizeColumns(t),qr(n,t,Gr),e.current.manuallyResizedColumns.push(i)}Yr(e,t)}(e,t,r)):e.current.clicks===Hr.CLICK&&(e.current.clicks=0,async function(e,t,r){r.forEach((t=>{zr(e,t)||e.current.manuallyResizedColumns.push(t)})),Yr(e,t)}(e,t,r))}(i,a,e.columns)}),[a]),u=(0,s.useCallback)((t=>{i.current.columnApi=t.api,Zr(e,i,a),_r(i,a)}),[e,a]);return(0,s.useEffect)((()=>{Zr(e,i,a)}),[e,i,a]),{containerRef:n,onColumnResized:o,onGridReady:u}}(d,c,e),{onCellClicked:y,onCellKeyDown:g,onGridReady:b}=function(e,t,r){const n=(0,s.useRef)({items:t,columnApi:null,drillablePredicates:[],onDrill:r.onDrill,dataView:r.dataView});(0,s.useEffect)((()=>{n.current.drillablePredicates=(0,u.convertDrillableItemsToPredicates)(r.drillableItems),n.current.onDrill=r.onDrill,n.current.dataView=r.dataView}),[r.dataView,r.drillableItems,r.onDrill]);const i=(0,s.useCallback)((e=>{const t=Or(n.current.dataView,n.current.drillablePredicates,e.colDef);if(!t)return!1;const r=e.api.getAllGridColumns().findIndex((t=>t===e.column)),i=e.data[e.colDef.field],a={header:{...t,attributeHeaderItem:i}},o=function(e,t,r,n,i){const a={type:u.VisualizationTypes.REPEATER,element:"cell",columnIndex:t,rowIndex:r,value:n,intersection:[i]};return{dataView:e.current.dataView.dataView,drillContext:a}}(n,r,e.rowIndex,i?.name,a);return function(e,t,r){if(e.current.onDrill?.(t)){const e=new CustomEvent("drill",{detail:t,bubbles:!0});return r.event?.target?.dispatchEvent(e),!0}return!1}(n,o,e)}),[]),a=(0,s.useCallback)((e=>!!(0,He.isActionKey)(e.event)&&i(e)),[i]),o=(0,s.useCallback)((e=>{n.current.columnApi=e.api}),[n]);return(0,s.useEffect)((()=>{!function(e,t){const r=t.current.columnApi;e.forEach((e=>{Or(t.current.dataView,t.current.drillablePredicates,e)&&!r&&(e.cellClass=ve(e.cellClass,"gd-repeater-cell-drillable"))}))}(e,n)}),[e]),{onGridReady:o,onCellClicked:i,onCellKeyDown:a}}(d,c,e),{onFirstDataRendered:v}=function(e){const[t,r]=(0,s.useState)(null),n=(0,s.useCallback)((t=>{const n=window.setInterval((()=>{var r;(r=t.api)&&(()=>{const e=r.getCacheBlockState();return e&&Object.keys(e).every((t=>"loaded"===e[t].pageStatus||"failed"===e[t].pageStatus))})()&&(clearInterval(n),e?.())}),Ur);r(n)}),[e]);return(0,s.useEffect)((()=>()=>{t&&clearInterval(t)}),[t]),{onFirstDataRendered:n}}(i),{switchToBrowserDefault:w,focusGridInnerElement:C}={switchToBrowserDefault:(0,s.useCallback)((()=>!1),[]),focusGridInnerElement:(0,s.useCallback)((e=>{const t=e.api.getAllDisplayedColumns()[0];return e.api.setFocusedHeader(t.getId()),!0}),[])};return(0,o.jsx)("div",{className:"gd-repeater s-repeater",ref:h,children:(0,o.jsx)(Nr.s,{className:"ag-theme-balham",defaultColDef:Qr,modules:[Sr.ea9],columnDefs:d,rowClass:"gd-table-row",datasource:a,rowModelType:"infinite",rowHeight:l,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMovableColumns:!0,onCellClicked:y,onCellKeyDown:g,focusGridInnerElement:C,tabToNextHeader:w,tabToNextCell:w,onGridReady:e=>{p(e),b(e)},onColumnResized:m,onFirstDataRendered:v,suppressContextMenu:!0},Dr({rowHeight:l,cellVerticalAlign:n?.cellVerticalAlign,cellTextWrapping:n?.cellTextWrapping,cellImageSizing:n?.cellImageSizing,dataView:t.fingerprint(),hyperLinks:n?.hyperLinks,onError:r?.toString()}))})}function en({src:e}){const[t,r]=(0,s.useState)(!1);return!e||t?(0,o.jsx)("div",{className:"gd-repeater-image-empty",children:(0,o.jsx)(He.IconImage,{})}):(0,o.jsx)("img",{className:"gd-repeater-image",src:e,alt:e,onError:()=>r(!0)})}function tn({value:e,hyperlinkStaticText:t}){const r=(0,ce.Z)();return e?(0,o.jsx)("a",{className:"gd-repeater-link",href:e,target:"_blank",rel:"noopener noreferrer",children:t||e}):(0,u.emptyHeaderTitleFromIntl)(r)}function rn({measureColumnData:e,isLoading:t}){const{measureLocalId:r,measureTitle:n,config:i,viewByAttributeTitle:a,measureDataPoints:s,viewByAttributeHeaderItems:l}=e,c=un(i),d=function(e,t){return t?.inlineVisualizations?.[e]?.type??"metric"}(r,i),m=(0,h.Fg)(),f=m?.table?.loadingIconColor??m?.palette?.complementary?.c6??void 0;if(t)return(0,o.jsx)(u.LoadingComponent,{color:f,width:36,imageHeight:8,height:c,speed:2});if("line"===d)return(0,o.jsx)(Pr,{metricTitle:n,sliceTitle:a,data:s,color:e.measureColor,headerItems:l,height:c});if("column"===d)return(0,o.jsx)(jr,{metricTitle:n,sliceTitle:a,data:s,color:e.measureColor,headerItems:l,height:c});const p=ln(i),y=cn(i);return(0,o.jsx)("div",{className:ve("gd-repeater-cell-wrapper",`gd-vertical-align-${p}`,`gd-text-wrapping-${y}`),children:s.find((e=>!(null===e.value||void 0===e.value)))?.formattedValue})}function nn({attributeColumnData:e,isLoading:t}){const{config:r,attributeLocalId:n,value:i,renderingType:a}=e,s=un(r),l=(0,ce.Z)(),c=(0,h.Fg)(),d=c?.table?.loadingIconColor??c?.palette?.complementary?.c6??void 0;if(t)return(0,o.jsx)(u.LoadingComponent,{color:d,width:36,imageHeight:8,height:s,speed:2});let m=i||(0,u.emptyHeaderTitleFromIntl)(l);if("text"===a)m=(0,o.jsx)("span",{children:m});else if("hyperlink"===a){const e=function(e,t){return t?.hyperLinks?.[e]?.staticElementsText}(n,r);m=(0,o.jsx)(tn,{hyperlinkStaticText:e,value:i})}else"image"===a&&(m=(0,o.jsx)(en,{src:i}));const f=ln(r),p=cn(r),y=function(e){return e?.cellImageSizing??"fit"}(r);return(0,o.jsx)("div",{className:ve("gd-repeater-cell-wrapper",`gd-vertical-align-${f}`,`gd-row-height-${s}`,`gd-text-wrapping-${p}`,`gd-image-sizing-${y}`),children:m})}const an=25,on=55,sn=85;function un(e){const t=e?.rowHeight;switch(t){case"small":default:return an;case"medium":return on;case"large":return sn}}function ln(e){return e?.cellVerticalAlign??"top"}function cn(e){return e?.cellTextWrapping??"clip"}function dn(e,t,r){return(0,f.isMeasure)(e)?mn(e,t):function(e,t,r=!1){const n=(0,f.attributeLocalId)(e),i=t.meta().attributeDescriptors().find((e=>e.attributeHeader.localIdentifier===n));return r?i?.attributeHeader?.formOf.name:i?.attributeHeader?.name}(e,t,r)}function mn(e,t){const r=fn(e,t);return r?.measureHeaderItem?.name}function fn(e,t){const r=(0,f.measureLocalId)(e);return t.meta().measureDescriptors().find((e=>e.measureHeaderItem.localIdentifier===r))}function pn(e){const t=(0,f.bucketsFind)(e.definition.buckets,u.BucketNames.VIEW),r=t?.items?.[0];return r?(0,f.attributeLocalId)(r):void 0}var hn=r(81310),yn=r(18013);const gn=(0,h.Zz)((function(e){const{execution:t,ErrorComponent:r=u.ErrorComponent,LoadingComponent:n=u.LoadingComponent,onLoadingChanged:i,pushData:a,onError:l,onColumnResized:c,onDataView:d,config:m={},drillableItems:p=[],onDrill:y=(()=>{}),afterRender:g=(()=>{})}=e,b=(0,ce.Z)(),v=m.enableExecutionCancelling??!1,{result:w,error:C}=(0,u.useCancelablePromise)({enableAbortController:v,promise:async e=>{const{offset:r,size:n}=Mr(t.definition.dimensions.length);let i=t;v&&(i=t.withSignal(e));const a=await i.execute(),o=await a.readWindow(r,n);return u.DataViewFacade.for(o)},onLoading:()=>{i?.({isLoading:!0})},onSuccess:e=>{i?.({isLoading:!1}),a?.({dataView:e.dataView}),d?.(e)},onError:e=>{i?.({isLoading:!1}),l?.((0,u.convertError)(e))}},[t.fingerprint(),v]),k=(0,s.useMemo)((()=>{const e=(0,hn.CW)(m);return{...m,colorPalette:e}}),[m]),x=(0,h.Fg)(),E=JSON.stringify([k.colorPalette,k.colorMapping]);if((0,s.useEffect)((()=>{if(w){const e=yn.H.getColorStrategy(k.colorPalette,k.colorMapping,null,null,null,w,"repeater",x).getColorAssignment();a?.({colors:{colorAssignments:e,colorPalette:k.colorPalette}})}}),[x,E,a,w]),(0,s.useEffect)((()=>{if(w){const e=(0,f.bucketsFind)(w.definition.buckets,u.BucketNames.COLUMNS);a?.({availableDrillTargets:{attributes:w.meta().attributeDescriptors().filter((t=>e.items.find((e=>!!(0,f.isAttribute)(e)&&e.attribute.localIdentifier===t.attributeHeader.localIdentifier)))).map((e=>({attribute:e,intersectionAttributes:[e]}))),measures:[]}})}}),[a,w]),C){const e=(0,u.convertError)(C).getMessage(),t=(0,u.newErrorMapping)(b),n=t[Object.prototype.hasOwnProperty.call(t,C)?C:u.ErrorCodes.UNKNOWN_ERROR];return(0,o.jsx)(r,{code:e,...n})}if(!w)return(0,o.jsx)(n,{});const I=(0,f.bucketsFind)(w.definition.buckets,u.BucketNames.COLUMNS);if(!I||0===I.items.length){const e=new Error("Repeater chart requires at least one column"),t=(0,u.convertError)(e).getMessage(),n=(0,u.newErrorMapping)(b),i=n[Object.prototype.hasOwnProperty.call(n,e)?e:u.ErrorCodes.UNKNOWN_ERROR];return(0,o.jsx)(r,{code:t,...i})}return(0,o.jsx)(Jr,{dataView:w,drillableItems:p,onDrill:y,config:k,onError:l,onColumnResized:c,afterRender:g})}));function bn(e){return(0,o.jsx)(h.ze,{theme:e.theme,themeIsLoading:!1,children:(0,o.jsx)(u.IntlWrapper,{locale:e.locale,children:(0,o.jsx)(gn,{...e})})})}const vn=(0,u.withContexts)((function(e){return(0,o.jsx)(bn,{...Cn(e)})}));function wn(e){const[t,r,n,i]=(0,u.useResolveValuesWithPlaceholders)([e.attribute,e.columns,e.viewBy,e.filters],e.placeholdersResolutionContext);return(0,o.jsx)(vn,{...e,attribute:t,columns:r,viewBy:n,filters:i})}function Cn(e){const{attribute:t,columns:r=[],viewBy:n}=e,i=Br(t,r,n,e.config?.inlineVisualizations);return{...(0,y.Z)(e,["attribute","columns","viewBy","filters","backend"]),execution:kn(i,e),exportTitle:e.exportTitle||"Repeater",enableExecutionCancelling:e.config?.enableExecutionCancelling??!1}}function kn(e,t){const{backend:r,workspace:n,execConfig:i}=t,a=Tr(e);return r.withTelemetry("Repeater",t).workspace(n).execution().forBuckets(e,t.filters).withDimensions(...a).withExecConfig(i)}var xn=r(8679);const En=e=>e.displayName||e.name||"Component",In=e=>{const t=class extends s.Component{static displayName=`WithJsxExport(${En(e)})`;toJsx=()=>{const t=Object.entries(this.props).filter((([e,t])=>!("function"==typeof t))).map((([e,t])=>"string"==typeof t?`${e}="${t}"`:`${e}={${(0,f.factoryNotationFor)(t)}}`)).join("\n").replace(/^/gm,"    ");return`<${En(e)}\n${t}\n/>`};render(){return(0,o.jsx)(e,{...this.props})}};return xn(t,e),t};function Bn(e,t){return t?{...e||{},enableCompactSize:!0,...t.disableKpiDashboardHeadlineUnderline?{disableDrillUnderline:!0}:{},...void 0===e?.enableJoinedAttributeAxisName?{enableJoinedAttributeAxisName:!0}:{},enableChartSorting:!0,enableReversedStacking:!0,enableSeparateTotalLabels:!0,...t.enableKDCrossFiltering?{useGenericInteractionTooltip:!0}:{},...t.enableCrossFilteringAliasTitles?{enableAliasAttributeLabel:!0}:{},...t.separators?{separators:t.separators}:{},...t.enableVisualizationFineTuning?{enableVisualizationFineTuning:!0}:{},...t.enableExecutionCancelling?{enableExecutionCancelling:!0}:{},...t.enableHighchartsAccessibility?{enableHighchartsAccessibility:!0}:{},...t.enableLineChartTrendThreshold?{enableLineChartTrendThreshold:!0}:{},...t.enableKDRespectLegendPosition?{respectLegendPosition:!0}:{},...t.enableAccessibleChartTooltip||t.enableAccessibilityMode?{enableAccessibleTooltip:!0}:{},...t.enableAccessibilityMode?{enableSingleBubbleSeries:!0}:{}}:{enableCompactSize:!0,...e||{}}}var Tn=r(30384),An=r(21241),Mn=r(63328),Rn=r(43626)}}]);