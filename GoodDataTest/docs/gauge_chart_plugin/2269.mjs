(self.webpackChunkgauge_chart_plugin=self.webpackChunkgauge_chart_plugin||[]).push([[2269],{62269:function(e,n,t){t.d(n,{Z:function(){return R}});var r=t(5549),i=t(24544),o=t(94184),u=t(25356),c=t(88699),a=t(85932),s=t(33805),l=t(3746),d=t(34910),m=t(91964),f=t(75131),g=t(17096),h=t(72666),p=t(19679);const x=161;function N(e){const{contentRect:n,hasSizeLegend:t,isFluidLegend:i,renderPopUp:o,isSizeLegendVisible:u=!0}=e;return o?(0,r.jsx)(I,{...e,isSizeLegendVisible:u}):(0,r.jsx)("div",{className:"s-geo-category-legend",children:i?b(e,n):v(e,n,t)})}function b(e,n){const{categoryItems:t,onItemClick:i,chartFill:o}=e,u={series:t??[],onItemClick:i,chartFill:o},{client:c}=n,a=c?.width?Math.floor(c.width):0;return(0,r.jsx)(f.a,{...u,containerWidth:a})}function v(e,n,t){const{categoryItems:i=[],position:o="top",height:u,format:c,locale:a,onItemClick:s,responsive:l,chartFill:d}=e,m={format:c,locale:a,position:o,responsive:l,series:i,shouldFillAvailableSpace:"left"!==o&&"right"!==o,onItemClick:s,chartFill:d},{client:f}=n,p=t&&(o===g.tV.LEFT||o===g.tV.RIGHT),N=f?.height?Math.floor(f.height):0,b=(u||N)-(p?x:0);return(0,r.jsx)(h.M,{...m,containerHeight:b})}function I({containerId:e,categoryItems:n=[],onItemClick:t=(e=>{}),name:i,maxRows:o,customComponent:u,customComponentName:c,hasSizeLegend:a,isSizeLegendVisible:s,chartFill:l}){return(0,r.jsx)(p.a,{series:n,onLegendItemClick:t,maxRows:a&&s&&o?o-1:o,name:i,containerId:e,customComponent:u,customComponentName:c,chartFill:l})}var C=t(40207),k=t(50038);function y(e){const{sizes:n=[],format:t,numericSymbols:i=[],measureName:u,isSmall:c,showMiddleCircle:a}=e,s=z(n);if(!s.length)return null;const l=B(s),d=S(s);if(l===d)return null;const m=d-l,f=o("pushpin-size-legend s-pushpin-size-legend",{"is-small-container":c}),g=o("pushpin-size-legend-circle-list",{"is-small-circles":c});return(0,r.jsxs)("div",{className:f,children:[u?(0,r.jsxs)("div",{className:"metric-name",title:u,children:[u,":"]}):null,(0,r.jsxs)("div",{className:g,children:[(0,r.jsxs)("div",{className:"pushpin-size-legend-circle circle-min-value",children:[(0,r.jsx)("span",{className:"circle-min-icon"}),(0,r.jsx)("span",{className:"circle-value",children:(0,C.N5)(l,t,m,i)})]}),a?L(e):null,u?null:(0,r.jsx)("div",{className:"circle-separator"}),(0,r.jsxs)("div",{className:"pushpin-size-legend-circle circle-max-value",children:[(0,r.jsx)("span",{className:"circle-max-icon"}),(0,r.jsx)("span",{className:"circle-value",children:(0,C.N5)(d,t,m,i)})]})]})]})}function L({sizes:e=[],format:n,numericSymbols:t=[],measureName:o}){const u=z(e),c=S(u)-B(u);return(0,r.jsxs)(i.Fragment,{children:[!o&&(0,r.jsx)("div",{className:"circle-separator"}),(0,r.jsxs)("div",{className:"pushpin-size-legend-circle circle-average-value",children:[(0,r.jsx)("span",{className:"circle-average-icon"}),(0,r.jsx)("span",{className:"circle-value",children:(0,C.N5)((0,k.j3)(u),n,c,t)})]})]})}function z(e){return e.filter((e=>null!==e&&isFinite(e)&&!isNaN(e)))}function B(e){return Math.min(...e)}function S(e){return Math.max(...e)}const j=210,T=(0,u.b)(c.Z);function D(e,n){const{position:t,isFluidLegend:r}=e,{hasSizeLegend:i}=n,u=r||"bottom"===t;return o("geo-legend","s-geo-legend","viz-legend",{"viz-fluid-legend-wrap":r,"viz-static-legend-wrap":!r,static:!r,"has-size-legend":i,[`position-${t}`]:!u,"position-bottom":u})}function R(e){const{categoryItems:n=[],geoData:t={},height:i,numericSymbols:u=[]}=e,c=e.position??"top",a=(0,d.T6)(n,t),{hasCategoryLegend:s,hasColorLegend:l,hasSizeLegend:f}=a;return s||l||f?s?function(e,n){const{contentRect:t,renderPopUp:i}=e,{hasSizeLegend:u}=n,c=o(D(e,n));return(0,r.jsx)(T,{client:!0,children:({measureRef:n,contentRect:o})=>(0,m.M3)(t?.client?.width,i)?(0,r.jsx)("div",{className:c,ref:n,children:H(e,o,u)}):(0,r.jsxs)("div",{className:c,ref:n,children:[O(e,o,u),E(e,u)]})})}(e,a):l&&f&&function(e,n){return void 0!==e&&("left"===n||"right"===n)&&e<j+x}(i,c)?(0,r.jsx)(F,{...e,numericSymbols:u,availableLegends:a}):function(e,n){const{hasColorLegend:t,hasSizeLegend:i}=n,o=D(e,n);return(0,r.jsxs)("div",{className:o,children:[w(e,t),E(e,i)]})}(e,a):null}function F(e){const[n,t]=(0,i.useState)(1),{availableLegends:o}=e,u=D(e,o);return(0,r.jsxs)("div",{className:u,children:[(0,r.jsxs)("div",{className:"geo-legend-paging",children:[w(e,1===n),E(e,2===n)]}),(0,r.jsx)(a.P,{page:n,pagesCount:2,showNextPage:()=>t(2),showPrevPage:()=>t(1)})]})}function w(e,n){if(!n)return null;const{geoData:t,position:i="top",responsive:o,isFluidLegend:u,colorLegendValue:c,numericSymbols:a=[],contentRect:d}=e,f=t.color.data,g=t.color.format,h=f.filter(isFinite),p=(0,l.fC)(h,c),x=d?.client?.width,N=(0,m.AW)(x,u,o),b=(0,m.yd)(t?.color?.name,x,o);return(0,r.jsx)(s.n6,{data:p,format:g,size:N,numericSymbols:a,position:i,title:b})}function O(e,n,t){const{containerId:i}=e;return i?(0,r.jsx)(N,{...e,contentRect:n,hasSizeLegend:t,containerId:i}):null}function E(e,n,t=!1,i=!1){if(!n)return null;const{geoData:o,numericSymbols:u=[],responsive:c,contentRect:a}=e;if(!o?.size)return null;const{size:{data:s,format:l,name:d}}=o,f=a?.client?.width,g=(0,m.C1)(f,i,c),h=(0,m.i1)(d,f,t),p=(0,m.iD)(f,i);return(0,r.jsx)(y,{format:l,measureName:h,numericSymbols:u,sizes:s,isSmall:g,showMiddleCircle:p})}function H(e,n,t){const{containerId:i}=e;return i?(0,r.jsx)(N,{...e,contentRect:n,hasSizeLegend:t,isSizeLegendVisible:!1,containerId:i,customComponent:E(e,t,!0,!0),customComponentName:e.geoData?.size?.name}):null}},4270:function(e,n,t){t.d(n,{$t:function(){return m},Cu:function(){return l},Gq:function(){return T},I7:function(){return c},J5:function(){return x},KZ:function(){return B},Mc:function(){return H},N6:function(){return g},Pm:function(){return u},RW:function(){return j},Ul:function(){return o},VL:function(){return D},X9:function(){return f},eH:function(){return a},gN:function(){return d},gc:function(){return p},hm:function(){return R},jc:function(){return w},lS:function(){return h},m6:function(){return I},me:function(){return z},nJ:function(){return s},ri:function(){return O},ry:function(){return C},sV:function(){return S},ti:function(){return N},vB:function(){return E},vR:function(){return F},wu:function(){return b},yJ:function(){return L},yv:function(){return y},z2:function(){return k}});var r=t(51485),i=t(65613);const o={northEast:{lat:-84,lng:-180},southWest:{lat:84,lng:180}},u={continent_af:[{lat:-36,lng:-20},{lat:38,lng:54}],continent_as:[{lat:-8,lng:26},{lat:64,lng:146}],continent_au:[{lat:-50,lng:107},{lat:0,lng:180}],continent_eu:[{lat:36,lng:-24},{lat:72,lng:43}],continent_na:[{lat:11,lng:-170},{lat:72,lng:-52}],continent_sa:[{lat:-56,lng:-90},{lat:14,lng:-31}],world:[o.northEast,o.southWest]},c=["has","point_count"],a={id:"gdcClusterLabels",type:"symbol",layout:{"text-allow-overlap":!0,"text-field":"{point_count_abbreviated}","text-font":["Lato Bold"],"text-size":14},paint:{"text-color":"#fff"}},s="gdcClusters",l=14,d={"circle-stroke-color":["step",["get","point_count"],"#00D398",10,"#F38700",100,"#E84C3C"],"circle-stroke-opacity":.2,"circle-stroke-width":8},m=["step",["get","point_count"],"#00D398",10,"#F38700",100,"#E84C3C"],f=["step",["get","point_count"],15,100,25],g={min:{default:8,"0.5x":4,"0.75x":6,normal:8,"1.25x":10,"1.5x":12},max:{default:60,"0.5x":30,"0.75x":45,normal:60,"1.25x":75,"1.5x":90}},h=50,p=5e4,x="gdcPushpinsData",N="gdcPushpins",b=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],v=(0,r.colorPaletteToColors)(i.DefaultColorPalette),I=2,C={lat:34,lng:5},k="rgb(233,237,241)",y=.7,L=6,z=v[0],B={"circle-stroke-width":1},S={attributionControl:!1,dragRotate:!1,fitBoundsOptions:{padding:45,maxDuration:1},maxBounds:u.world,maxZoom:14,pitchWithRotate:!1,renderWorldCopies:!1,touchZoomRotate:!1,style:"mapbox://styles/gooddata/ck88ltry127yx1iql358df6xn"},j={closeButton:!1,closeOnClick:!1,offset:10},T="circle",D="circle-color",R="circle-radius",F="circle-stroke-color",w="empty-segment-filter",O="-label",E="-",H=100},3746:function(e,n,t){t.d(n,{fC:function(){return h},yQ:function(){return g}});var r=t(79697),i=t(96446),o=t(51485),u=t(4270);function c(e,n,t,r=1){return 1===r?`rgb(${e},${n},${t})`:`rgba(${e},${n},${t},${r})`}function a(e){const n=e.split(",");return{R:parseInt(n[0].slice(4),10),G:parseInt(n[1],10),B:parseInt(n[2],10)}}function s(e,n,t){return Math.trunc(e+n*t)}function l(e,n=1){const{r:t,g:r,b:o}=function(e){if("string"==typeof e){const{R:n,G:t,B:r}=a(e);return{r:n,g:t,b:r}}return e}(e),u=[t,r,o],l=u.map((e=>(255-e)/6)),d=function(e,n,t,r=1){return(0,i.Z)(1,e).map((e=>c(s(n[0],e,t[0]),s(n[1],e,t[1]),s(n[2],e,t[2]),r)))}(6,u,l,n);return[...d.reverse(),c(t,r,o,n)]}var d=t(50038);const m="default_segment_item",f=u.yJ-1;function g(e,n=[],t){const r=function(e,n=1){const{R:t,G:r,B:i}=a(e);return c(t,r,i,n)}(t.getColorByIndex(0),u.yv);if(!e.length&&!n.length)return[{border:u.z2,background:r}];const i=[...n],s=function(e){return e.getColorAssignment().reduce(((n,t,r)=>{const i=l(e.getColorByIndex(r),u.yv);return(0,o.isAttributeDescriptor)(t.headerItem)?{[m]:i}:(n[((0,o.isResultAttributeHeader)(t.headerItem)?t.headerItem.attributeHeaderItem.name:m)??m]=i,n)}),{})}(t);if(!e.length)return i.map((e=>{const n=s[e];return{border:u.z2,background:n[f]}}));const g=e.filter((e=>null!==e&&Number.isFinite(e))),{min:h,max:p}=(0,d.X9)(g);return h!==p||n.length?e.map(((e,n)=>{const t=function(e,n,t){if(null===e||!Number.isFinite(e)||n===t||e===n)return 0;if(e===t)return f;const r=(t-n)/u.yJ;for(let t=0,i=n;t<u.yJ;t++,i+=r)if(i>=e)return t;return f}(null!==e&&Number.isFinite(e)?e:h,h,p),r=i[n]||m,o=s[r];return{border:o[f],background:o[t]}})):[{border:u.z2,background:r}]}function h(e,n){if((0,r.Z)(e))return[];const t=l(n,u.yv),o=Math.min(...e),c=Math.max(...e),a=(c-o)/u.yJ;return o===c?[]:(0,i.Z)(0,u.yJ).map((e=>{const n=o+a*e;return{range:{from:n,to:e===u.yJ-1?c:n+a},color:t[e]}}))}},50038:function(e,n,t){t.d(n,{B8:function(){return l},Ur:function(){return a},V5:function(){return m},Wl:function(){return p},X9:function(){return h},aL:function(){return N},cT:function(){return g},eC:function(){return x},iP:function(){return f},j3:function(){return d},xm:function(){return c}});var r=t(50576),i=t(51485),o=t(65613),u=t(91964);function c(e,n){const{color:t,size:r}=n,i=void 0!==t||void 0!==r?1:0;return e.meta().allHeaders()[i]}function a(e,n,t){const{location:r}=n,i=c(e,n);return(void 0===r?[]:i[r.index]).length<=t}const s=e=>void 0!==e&&!(0,i.bucketIsEmpty)(e);function l(e){const n=(0,i.bucketsFind)(e,o.BucketNames.LOCATION),t=(0,i.bucketsFind)(e,o.BucketNames.LATITUDE),r=(0,i.bucketsFind)(e,o.BucketNames.LONGITUDE);return s(n)||s(t)&&s(r)}function d(e=[]){return e.length?e.reduce(((e,n)=>e+n),0)/e.length:0}function m(e,n){return e.meta().measureDescriptors()[n].measureHeaderItem.format}function f(e,n=!0){const{color:t,location:r,segment:i,size:o}=e;return Boolean(n&&r&&!(t||i||o))}function g(e,n){return!(0,r.Z)(e,n)}function h(e){return e.reduce(((e,n)=>isFinite(n)?{min:e.min&&isFinite(e.min)?Math.min(n,e.min):n,max:e.max&&isFinite(e.max)?Math.max(n,e.max):n}:e),{min:void 0,max:void 0})}function p(e){if(null===e)return NaN;const n="string"==typeof e?parseFloat(e):e;return isNaN(n)&&console.warn(`SDK: utils - stringToFloat: ${e} is not a number`),n}function x(e,n){return!0===(0,u.o2)(e)&&n}function N(e,n){return!(0,r.Z)(e,n)}},34910:function(e,n,t){t.d(n,{Bz:function(){return g},Dc:function(){return h},T6:function(){return m},uR:function(){return a}});var r=t(51485),i=t(65613),o=t(50038);function u(e){if(!e)return null;const[n,t]=e.split(";").map(o.Wl);return isNaN(n)||isNaN(t)?(console.warn("UI-SDK: geoChartDataSource - getLocation: invalid location",e),null):{lat:n,lng:t}}function c(e){if(!e)return null;const n=(0,o.Wl)(e);return isNaN(n)?(console.warn("UI-SDK: geoChartDataSource - getLocation: invalid latitude/longitude coordinate",n),null):n}function a(e,n,t){const a=function(e){const n=e.def().buckets(),t=e.meta().measureDescriptors(),o=e.meta().attributeDescriptors(),u=n.reduce(((e,n)=>(e[n.localIdentifier]=function(e){if(!e)return null;if((0,r.isAttribute)(e))return{localIdentifier:(0,r.attributeLocalId)(e),...d((0,r.attributeDisplayFormRef)(e))};const n=(0,r.measureLocalId)(e),t=(0,r.measureItem)(e);return t?{localIdentifier:n,...d(t)}:{localIdentifier:n}}(n.items[0]),e)),{}),c={};return[i.BucketNames.LOCATION,i.BucketNames.LATITUDE,i.BucketNames.LONGITUDE,i.BucketNames.SEGMENT,i.BucketNames.TOOLTIP_TEXT].forEach((e=>{const n=u[e];if(!n)return;const t=o.findIndex((e=>e.attributeHeader.localIdentifier===n.localIdentifier&&(e.attributeHeader.uri===n.uri||e.attributeHeader.identifier===n.identifier)));if(-1!==t){const{formOf:{name:n}}=o[t].attributeHeader;c[e]={index:t,name:n}}})),[i.BucketNames.SIZE,i.BucketNames.COLOR].forEach((e=>{const n=u[e];if(!n)return;const r=t.findIndex((e=>e.measureHeaderItem.localIdentifier===n.localIdentifier&&(e.measureHeaderItem.uri===n.uri||e.measureHeaderItem.identifier===n.identifier)));-1!==r&&(c[e]={index:r,name:t[r].measureHeaderItem.name})})),c}(e),m=(0,o.xm)(e,a),f=a.location?.index,g=a.latitude?.index,h=a.longitude?.index,p=a?.segment?.index,x=a?.tooltipText?.index,N=a?.size?.index,b=a?.color?.index;if(void 0!==f){const e=l(m,f,n,t);a[i.BucketNames.LOCATION].data=e.map(u)}if(void 0!==g&&null!=h){const e=l(m,g,n,t),r=l(m,h,n,t);a[i.BucketNames.LOCATION]={...a[i.BucketNames.LATITUDE],data:e.map(((e,n)=>({lat:c(e),lng:c(r[n])})))}}if(void 0!==p){const{data:e,uris:n}=function(e,n,t){return e[n].reduce(((e,n)=>{if(n&&(0,r.isResultAttributeHeader)(n)){const{uri:r,name:i}=n.attributeHeaderItem;return{uris:[...e.uris,r],data:[...e.data,i??t]}}return e}),{uris:[],data:[]})}(m,p,t);a[i.BucketNames.SEGMENT].data=e,a[i.BucketNames.SEGMENT].uris=n}return void 0!==x&&(a[i.BucketNames.TOOLTIP_TEXT].data=l(m,x,n,t)),void 0!==N&&(a[i.BucketNames.SIZE].data=s(e,N),a[i.BucketNames.SIZE].format=(0,o.V5)(e,N)),void 0!==b&&(a[i.BucketNames.COLOR].data=s(e,b),a[i.BucketNames.COLOR].format=(0,o.V5)(e,b)),a}function s(e,n){return e.rawData().twoDimData()[n].map(o.Wl)}function l(e,n,t,i){return e[n].map((e=>{const n=(0,r.resultHeaderName)(e);return n||(""===n?t:i)}))}function d(e){return(0,r.isIdentifierRef)(e)?{identifier:e.identifier}:{uri:e.uri}}function m(e,n){const{color:{data:t=[]}={},size:{data:r=[]}={}}=n,{min:i,max:u}=(0,o.X9)(t),{min:c,max:a}=(0,o.X9)(r),s=Boolean(e?.length);return{hasCategoryLegend:s,hasColorLegend:Boolean(t.length)&&i!==u&&!s,hasSizeLegend:Boolean(r.length)&&c!==a}}function f(e){try{return JSON.parse(e)}catch{return{}}}function g(e){const{locationName:n="{}",color:t="{}",size:r="{}",segment:i="{}"}=e||{};return{locationName:f(n),size:f(r),color:f(t),segment:f(i)}}function h(e,n){const{color:t,location:r,segment:i,size:o,tooltipText:u}=n,c=r?.index??0,a=e.meta().allHeaders(),s=o||t?1:0,l=e.meta().attributeDescriptors(),d=a[s];return{locationAttribute:{...l[c].attributeHeader,items:d[c]},segmentByAttribute:i?.data.length?{...l[i.index].attributeHeader,items:d[i.index]}:void 0,tooltipTextAttribute:u?.data.length?{...l[u.index].attributeHeader,items:d[u.index]}:void 0}}},91964:function(e,n,t){t.d(n,{AW:function(){return d},C1:function(){return f},M3:function(){return h},fO:function(){return l},i1:function(){return g},iD:function(){return p},o2:function(){return s},yd:function(){return m}});const r=260,i=330,o=410,u=410;function c(e){return!e||e>=r}function a(e){return!e||e>=i}function s(e){return l(e)?e:Boolean(e)}function l(e){return"autoPositionWithPopup"===e}function d(e,n,t){const r=l(t)&&!function(e){return!e||e>=u}(e);let i="large";return r&&(i="small"),n&&(i="medium"),i}function m(e,n,t){return l(t)&&e&&c(n)?e:void 0}function f(e,n,t){return!n&&l(t)&&!a(e)}function g(e,n,t){return!t&&c(n)?e:void 0}function h(e,n){return!a(e)&&Boolean(n)}function p(e,n){return n||a(e)&&(!e||e>=o)}}}]);